import{c as Ti,r as b,j as u,z as Un,u as Wi,A as Li}from"./index--xrktNsK.js";import{S as qn,B as Bi,N as Ei}from"./Navigation-CCnB3BJO.js";import{C as pt}from"./card-3sR0m8q4.js";import{B as Kn,m as ft}from"./button-qKzjhVfS.js";import{R as Ri,P as Ii}from"./refresh-cw-LHX02uMk.js";import{S as Pi}from"./switch-BnjStIBk.js";import{y as Jn,M as mt,I as wn,a as lt,D as Et,u as Ot,f as Ni,b as Di,h as $i,c as Ai,$ as Ft,F as zt,d as Ht,e as Zn,g as Qn,V as ei,j as ti,P as ni,R as Cn,T as ii,z as Tt,t as Bn,i as Oi,k as gn,l as Qt,m as oi,Y as en,E as ai,p as Mn,q as Fi,n as zi,o as li,r as tn,W as ri,s as En,L as si,v as Dt,w as di,x as ui,A as Hi,B as Vi,C as nn,G as Rn,H as Gi,J as Yi,K as Xi,N as Ui,O as qi,Q as ci}from"./nivo-legends-CmabIw_H.js";import{_ as Ki,a as Ji,b as Zi,i as Qi,D as eo,J as In,t as to,l as Pn,I as no,k as io}from"./_baseAssignValue-Dol-jihx.js";import{e as Nn}from"./isNumber-BwiXoauw.js";import{C as oo}from"./cpu-5R8CygKB.js";import{D as ao}from"./database-BhRGqcbv.js";import{Z as lo}from"./zap-CCOOT5oZ.js";import{T as ro}from"./triangle-alert-BraIuoH7.js";import{C as so}from"./circle-x-CEjRgKuY.js";import{B as Dn}from"./badge-DyOow1xh.js";import"./log-out-CriHxoqG.js";import"./index-9Pc22ChG.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=Ti("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function co({className:e}){const[t,n]=b.useState(""),[o,i]=b.useState(!1),a=async()=>{i(!0);try{const r=await(await fetch("http://localhost:8000/metrics")).text();n(r)}catch{n(`# Error fetching metrics
# Ensure backend is running at http://localhost:8000`)}finally{i(!1)}};return b.useEffect(()=>{a();const l=setInterval(a,1e4);return()=>clearInterval(l)},[]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"font-semibold text-sm",children:"Prometheus Exporter Output"}),u.jsx(Kn,{variant:"ghost",size:"sm",onClick:a,disabled:o,children:u.jsx(Ri,{className:`w-4 h-4 ${o?"animate-spin":""}`})})]}),u.jsx(qn,{className:"h-[200px] bg-slate-950 rounded p-4 font-mono text-xs text-green-400",children:u.jsx("pre",{children:t})})]})}function ho({className:e}){const[t,n]=b.useState([{id:1,name:"High Latency > 200ms",active:!0},{id:2,name:"Error Rate > 1%",active:!0},{id:3,name:"Low Throughput < 10 eps",active:!1},{id:4,name:"Bot Activity Spike > 50%",active:!0}]),o=i=>{n(t.map(a=>a.id===i?{...a,active:!a.active}:a))};return u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[u.jsx(Bi,{className:"w-4 h-4"}),"Alert Rules"]}),u.jsxs(Kn,{variant:"outline",size:"sm",className:"h-7 text-xs",children:[u.jsx(Ii,{className:"w-3 h-3 mr-1"})," Add Rule"]})]}),u.jsx("div",{className:"space-y-3",children:t.map(i=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900/30 rounded border border-slate-800",children:[u.jsx("span",{className:"text-sm text-slate-300",children:i.name}),u.jsx(Pi,{checked:i.active,onCheckedChange:()=>o(i.id)})]},i.id))})]})}function fo({className:e}){const t=[{name:"WebSocket Receive",width:"15%",color:"bg-blue-500"},{name:"JSON Parse",width:"10%",color:"bg-green-500"},{name:"TDA Analysis",width:"40%",color:"bg-purple-500"},{name:"ML Inference",width:"25%",color:"bg-orange-500"},{name:"Render",width:"10%",color:"bg-pink-500"}];return u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Pipeline Flamegraph"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"h-12 w-full flex rounded-md overflow-hidden",children:t.map((n,o)=>u.jsx("div",{className:`${n.color} h-full flex items-center justify-center text-xs font-bold text-white/90 hover:opacity-90 transition-opacity cursor-help`,style:{width:n.width},title:n.name,children:n.name},o))}),u.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-400",children:t.map((n,o)=>u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:`w-3 h-3 rounded-full ${n.color}`}),u.jsx("span",{children:n.name})]},o))})]})]})}var mo=Ki;function go(e,t){var n=[];return mo(e,function(o,i,a){t(o,i,a)&&n.push(o)}),n}var bo=go,vo=Ji,xo=bo,po=Zi,yo=Qi;function ko(e,t){var n=yo(e)?vo:xo;return n(e,po(t))}var wo=ko;const Co=Un(wo);function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xt.apply(null,arguments)}var pn={dotSize:4,noteWidth:120,noteTextOffset:8},Mo=function(e){var t=typeof e;return b.isValidElement(e)||t==="string"||t==="function"||t==="object"},So=function(e){var t=typeof e;return t==="string"||t==="function"},$t=function(e){return e.type==="circle"},yn=function(e){return e.type==="dot"},At=function(e){return e.type==="rect"},jo=function(e){var t=e.data,n=e.annotations,o=e.getPosition,i=e.getDimensions;return n.reduce(function(a,l){var r=l.offset||0;return[].concat(a,Co(t,l.match).map(function(s){var d=o(s),m=i(s);return($t(l)||At(l))&&(m.size=m.size+2*r,m.width=m.width+2*r,m.height=m.height+2*r),xt({},Jn(l,["match","offset"]),d,m,{size:l.size||m.size,datum:s})}))},[])},_o=function(e,t,n,o){var i=Math.atan2(o-t,n-e);return $i(Ai(i))},hi=function(e){var t,n,o=e.x,i=e.y,a=e.noteX,l=e.noteY,r=e.noteWidth,s=r===void 0?pn.noteWidth:r,d=e.noteTextOffset,m=d===void 0?pn.noteTextOffset:d;if(Nn(a))t=o+a;else{if(a.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");t=a.abs}if(Nn(l))n=i+l;else{if(l.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");n=l.abs}var c=o,f=i,h=_o(o,i,t,n);if($t(e)){var v=Ni(Di(h),e.size/2);c+=v.x,f+=v.y}if(At(e)){var g=Math.round((h+90)/45)%8;g===0&&(f-=e.height/2),g===1&&(c+=e.width/2,f-=e.height/2),g===2&&(c+=e.width/2),g===3&&(c+=e.width/2,f+=e.height/2),g===4&&(f+=e.height/2),g===5&&(c-=e.width/2,f+=e.height/2),g===6&&(c-=e.width/2),g===7&&(c-=e.width/2,f-=e.height/2)}var p=t,y=t;return(h+90)%360>180?(p-=s,y-=s):y+=s,{points:[[c,f],[t,n],[y,n]],text:[p,n-m],angle:h+90}},fi=function(e){var t=e.data,n=e.annotations,o=e.getPosition,i=e.getDimensions;return b.useMemo(function(){return jo({data:t,annotations:n,getPosition:o,getDimensions:i})},[t,n,o,i])},To=function(e){var t=e.annotations;return b.useMemo(function(){return t.map(function(n){return xt({},n,{computed:hi(xt({},n))})})},[t])},Wo=function(e){return b.useMemo(function(){return hi(e)},[e])},Lo=function(e){var t=e.datum,n=e.x,o=e.y,i=e.note,a=mt(),l=Et(),r=l.animate,s=l.config,d=Ot({x:n,y:o,config:s,immediate:!r});return typeof i=="function"?b.createElement(i,{x:n,y:o,datum:t}):u.jsxs(u.Fragment,{children:[a.annotations.text.outlineWidth>0&&u.jsx(lt.text,{x:d.x,y:d.y,style:xt({},a.annotations.text,{strokeLinejoin:"round",strokeWidth:2*a.annotations.text.outlineWidth,stroke:a.annotations.text.outlineColor}),children:i}),u.jsx(lt.text,{x:d.x,y:d.y,style:Jn(a.annotations.text,["outlineWidth","outlineColor"]),children:i})]})},$n=function(e){var t=e.points,n=e.isOutline,o=n!==void 0&&n,i=mt(),a=b.useMemo(function(){var s=t[0];return t.slice(1).reduce(function(d,m){return d+" L"+m[0]+","+m[1]},"M"+s[0]+","+s[1])},[t]),l=wn(a);if(o&&i.annotations.link.outlineWidth<=0)return null;var r=xt({},i.annotations.link);return o&&(r.strokeLinecap="square",r.strokeWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,r.stroke=i.annotations.link.outlineColor,r.opacity=i.annotations.link.outlineOpacity),u.jsx(lt.path,{fill:"none",d:l,style:r})},Bo=function(e){var t=e.x,n=e.y,o=e.size,i=mt(),a=Et(),l=a.animate,r=a.config,s=Ot({x:t,y:n,radius:o/2,config:r,immediate:!l});return u.jsxs(u.Fragment,{children:[i.annotations.outline.outlineWidth>0&&u.jsx(lt.circle,{cx:s.x,cy:s.y,r:s.radius,style:xt({},i.annotations.outline,{fill:"none",strokeWidth:i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,stroke:i.annotations.outline.outlineColor,opacity:i.annotations.outline.outlineOpacity})}),u.jsx(lt.circle,{cx:s.x,cy:s.y,r:s.radius,style:i.annotations.outline})]})},Eo=function(e){var t=e.x,n=e.y,o=e.size,i=o===void 0?pn.dotSize:o,a=mt(),l=Et(),r=l.animate,s=l.config,d=Ot({x:t,y:n,radius:i/2,config:s,immediate:!r});return u.jsxs(u.Fragment,{children:[a.annotations.outline.outlineWidth>0&&u.jsx(lt.circle,{cx:d.x,cy:d.y,r:d.radius,style:xt({},a.annotations.outline,{fill:"none",strokeWidth:2*a.annotations.outline.outlineWidth,stroke:a.annotations.outline.outlineColor,opacity:a.annotations.outline.outlineOpacity})}),u.jsx(lt.circle,{cx:d.x,cy:d.y,r:d.radius,style:a.annotations.symbol})]})},Ro=function(e){var t=e.x,n=e.y,o=e.width,i=e.height,a=e.borderRadius,l=a===void 0?6:a,r=mt(),s=Et(),d=s.animate,m=s.config,c=Ot({x:t-o/2,y:n-i/2,width:o,height:i,config:m,immediate:!d});return u.jsxs(u.Fragment,{children:[r.annotations.outline.outlineWidth>0&&u.jsx(lt.rect,{x:c.x,y:c.y,rx:l,ry:l,width:c.width,height:c.height,style:xt({},r.annotations.outline,{fill:"none",strokeWidth:r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,stroke:r.annotations.outline.outlineColor,opacity:r.annotations.outline.outlineOpacity})}),u.jsx(lt.rect,{x:c.x,y:c.y,rx:l,ry:l,width:c.width,height:c.height,style:r.annotations.outline})]})},Io=function(e){var t=e.datum,n=e.x,o=e.y,i=e.note,a=Wo(e);if(!Mo(i))throw new Error("note should be a valid react element");return u.jsxs(u.Fragment,{children:[u.jsx($n,{points:a.points,isOutline:!0}),$t(e)&&u.jsx(Bo,{x:n,y:o,size:e.size}),yn(e)&&u.jsx(Eo,{x:n,y:o,size:e.size}),At(e)&&u.jsx(Ro,{x:n,y:o,width:e.width,height:e.height,borderRadius:e.borderRadius}),u.jsx($n,{points:a.points}),u.jsx(Lo,{datum:t,x:a.text[0],y:a.text[1],note:i})]})},An=function(e,t){t.forEach(function(n,o){var i=n[0],a=n[1];o===0?e.moveTo(i,a):e.lineTo(i,a)})},Po=function(e,t){var n=t.annotations,o=t.theme;n.length!==0&&(e.save(),n.forEach(function(i){if(!So(i.note))throw new Error("note is invalid for canvas implementation");o.annotations.link.outlineWidth>0&&(e.lineCap="square",e.strokeStyle=o.annotations.link.outlineColor,e.lineWidth=o.annotations.link.strokeWidth+2*o.annotations.link.outlineWidth,e.beginPath(),An(e,i.computed.points),e.stroke(),e.lineCap="butt"),$t(i)&&o.annotations.outline.outlineWidth>0&&(e.strokeStyle=o.annotations.outline.outlineColor,e.lineWidth=o.annotations.outline.strokeWidth+2*o.annotations.outline.outlineWidth,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.stroke()),yn(i)&&o.annotations.symbol.outlineWidth>0&&(e.strokeStyle=o.annotations.symbol.outlineColor,e.lineWidth=2*o.annotations.symbol.outlineWidth,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.stroke()),At(i)&&o.annotations.outline.outlineWidth>0&&(e.strokeStyle=o.annotations.outline.outlineColor,e.lineWidth=o.annotations.outline.strokeWidth+2*o.annotations.outline.outlineWidth,e.beginPath(),e.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),e.stroke()),e.strokeStyle=o.annotations.link.stroke,e.lineWidth=o.annotations.link.strokeWidth,e.beginPath(),An(e,i.computed.points),e.stroke(),$t(i)&&(e.strokeStyle=o.annotations.outline.stroke,e.lineWidth=o.annotations.outline.strokeWidth,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.stroke()),yn(i)&&(e.fillStyle=o.annotations.symbol.fill,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.fill()),At(i)&&(e.strokeStyle=o.annotations.outline.stroke,e.lineWidth=o.annotations.outline.strokeWidth,e.beginPath(),e.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),e.stroke()),typeof i.note=="function"?i.note(e,{datum:i.datum,x:i.computed.text[0],y:i.computed.text[1],theme:o}):(e.font=o.annotations.text.fontSize+"px "+o.annotations.text.fontFamily,e.textAlign="left",e.textBaseline="alphabetic",e.fillStyle=o.annotations.text.fill,e.strokeStyle=o.annotations.text.outlineColor,e.lineWidth=2*o.annotations.text.outlineWidth,o.annotations.text.outlineWidth>0&&(e.lineJoin="round",e.strokeText(i.note,i.computed.text[0],i.computed.text[1]),e.lineJoin="miter"),e.fillText(i.note,i.computed.text[0],i.computed.text[1]))}),e.restore())},No=function(e,t,n,o,i,a){a>0?(e.moveTo(t+a,n),e.lineTo(t+o-a,n),e.quadraticCurveTo(t+o,n,t+o,n+a),e.lineTo(t+o,n+i-a),e.quadraticCurveTo(t+o,n+i,t+o-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath()):e.rect(t,n,o,i)};function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ae.apply(null,arguments)}function St(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var On,Do=function(e){var t=e.bars,n=e.annotations,o=fi({data:t,annotations:n,getPosition:function(i){return{x:i.x+i.width/2,y:i.y+i.height/2}},getDimensions:function(i){var a=i.height,l=i.width;return{width:l,height:a,size:Math.max(l,a)}}});return u.jsx(u.Fragment,{children:o.map(function(i,a){return u.jsx(Io,ae({},i),a)})})},$o=function(e){var t=e.width,n=e.height,o=e.legends,i=e.toggleSerie;return u.jsx(u.Fragment,{children:o.map(function(a,l){var r,s=a[0],d=a[1];return u.jsx(ai,ae({},s,{containerWidth:t,containerHeight:n,data:(r=s.data)!=null?r:d,toggleSerie:s.toggleSerie&&s.dataFrom==="keys"?i:void 0}),l)})})},Ao=["data"],Oo=function(e){var t,n=e.bar,o=n.data,i=St(n,Ao),a=e.style,l=a.borderColor,r=a.color,s=a.height,d=a.labelColor,m=a.labelOpacity,c=a.labelX,f=a.labelY,h=a.transform,v=a.width,g=a.textAnchor,p=e.borderRadius,y=e.borderWidth,C=e.label,T=e.shouldRenderLabel,M=e.isInteractive,B=e.onClick,k=e.onMouseEnter,R=e.onMouseLeave,E=e.tooltip,w=e.isFocusable,W=e.ariaLabel,S=e.ariaLabelledBy,L=e.ariaDescribedBy,I=e.ariaDisabled,D=e.ariaHidden,j=mt(),x=Tt(),_=x.showTooltipFromEvent,P=x.showTooltipAt,F=x.hideTooltip,X=b.useMemo(function(){return function(){return b.createElement(E,ae({},i,o))}},[E,i,o]),ve=b.useCallback(function(Q){B==null||B(ae({color:i.color},o),Q)},[i,o,B]),ne=b.useCallback(function(Q){return _(X(),Q)},[_,X]),ce=b.useCallback(function(Q){k==null||k(o,Q),_(X(),Q)},[o,k,_,X]),le=b.useCallback(function(Q){R==null||R(o,Q),F()},[o,F,R]),Me=b.useCallback(function(){P(X(),[i.absX+i.width/2,i.absY])},[P,X,i]),re=b.useCallback(function(){F()},[F]);return u.jsxs(lt.g,{transform:h,children:[u.jsx(lt.rect,{width:Bn(v,function(Q){return Math.max(Q,0)}),height:Bn(s,function(Q){return Math.max(Q,0)}),rx:p,ry:p,fill:(t=o.fill)!=null?t:r,strokeWidth:y,stroke:l,focusable:w,tabIndex:w?0:void 0,"aria-label":W?W(o):void 0,"aria-labelledby":S?S(o):void 0,"aria-describedby":L?L(o):void 0,"aria-disabled":I?I(o):void 0,"aria-hidden":D?D(o):void 0,onMouseEnter:M?ce:void 0,onMouseMove:M?ne:void 0,onMouseLeave:M?le:void 0,onClick:M?ve:void 0,onFocus:M&&w?Me:void 0,onBlur:M&&w?re:void 0,"data-testid":"bar.item."+o.id+"."+o.index}),T&&u.jsx(Oi,{x:c,y:f,textAnchor:g,dominantBaseline:"central",fillOpacity:m,style:ae({},j.labels.text,{pointerEvents:"none",fill:d}),children:C})]})},Fo=["color","label"],zo=function(e){var t=e.color,n=e.label,o=St(e,Fo);return u.jsx(ii,{id:n,value:o.formattedValue,enableChip:!0,color:t})},be={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",valueScale:{type:"linear",nice:!0,round:!1},indexScale:{type:"band",round:!1},padding:.1,innerPadding:0,enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:zo,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],enableTotals:!1,totalsOffset:10},ge=ae({},be,{layers:["grid","axes","bars","totals","markers","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},barComponent:Oo,defs:[],fill:[],markers:[],animate:!0,animateOnMount:!1,motionConfig:"default",role:"img",isFocusable:!1}),$e=ae({},be,{layers:["grid","axes","bars","totals","legends","annotations"],axisTop:null,axisRight:null,axisBottom:{},axisLeft:{},renderBar:function(e,t){var n=t.bar,o=n.color,i=n.height,a=n.width,l=n.x,r=n.y,s=t.borderColor,d=t.borderRadius,m=t.borderWidth,c=t.label,f=t.shouldRenderLabel,h=t.labelStyle,v=t.labelX,g=t.labelY,p=t.textAnchor;e.fillStyle=o,m>0&&(e.strokeStyle=s,e.lineWidth=m),e.beginPath(),No(e,l,r,a,i,Math.min(d,i)),e.fill(),m>0&&e.stroke(),f&&(e.textBaseline="middle",e.textAlign=p==="middle"?"center":p,li(e,h,c,l+v,r+g))},pixelRatio:typeof window<"u"&&(On=window.devicePixelRatio)!=null?On:1}),mi=function(e,t,n,o,i,a){return Mn(o,{all:e.map(t),min:0,max:0},i,a).padding(n)},gi=function(e,t){return e.map(function(n){return ae({},t.reduce(function(o,i){return o[i]=null,o},{}),n)})},ln=function(e){return Object.keys(e).reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{})},rn=function(e){return[e,Number(e)]};function bi(e,t,n,o){return e===void 0&&(e=be.layout),n===void 0&&(n=be.labelPosition),o===void 0&&(o=be.labelOffset),function(i,a){var l=o*(t?-1:1);if(e==="horizontal"){var r=i/2;return n==="start"?r=t?i:0:n==="end"&&(r=t?0:i),{labelX:r+l,labelY:a/2,textAnchor:n==="middle"?"middle":t?"end":"start"}}var s=a/2;return n==="start"?s=t?0:a:n==="end"&&(s=t?a:0),{labelX:i/2,labelY:s-l,textAnchor:"middle"}}}var Ho=["layout","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],Sn=function(e,t){return e>t},vi=function(e,t){return e<t},xi=function(e,t){return Array.from(" ".repeat(t-e),function(n,o){return e+o})},Vo=function(e){return Sn(e,0)?0:e},Go=function(e,t,n,o){var i=e.data,a=e.formatValue,l=e.getColor,r=e.getIndex,s=e.getTooltipLabel,d=e.innerPadding,m=d===void 0?0:d,c=e.keys,f=e.xScale,h=e.yScale,v=e.margin,g=n?vi:Sn,p=i.map(ln),y=[];return c.forEach(function(C,T){return xi(0,f.domain().length).forEach(function(M){var B,k,R,E=rn(i[M][C]),w=E[0],W=E[1],S=r(i[M]),L=((B=f(S))!=null?B:0)+t*T+m*T,I=g(k=W,0)?(R=h(k))!=null?R:0:o,D=function(x,_){var P;return g(x,0)?o-_:((P=h(x))!=null?P:0)-o}(W,I),j={id:C,value:w===null?w:W,formattedValue:a(W),hidden:!1,index:M,indexValue:S,data:p[M]};y.push({key:C+"."+j.indexValue,index:y.length,data:j,x:L,y:I,absX:v.left+L,absY:v.top+I,width:t,height:D,color:l(j),label:s(j)})})}),y},Yo=function(e,t,n,o){var i=e.data,a=e.formatValue,l=e.getIndex,r=e.getColor,s=e.getTooltipLabel,d=e.keys,m=e.innerPadding,c=m===void 0?0:m,f=e.xScale,h=e.yScale,v=e.margin,g=n?vi:Sn,p=i.map(ln),y=[];return d.forEach(function(C,T){return xi(0,h.domain().length).forEach(function(M){var B,k,R,E=rn(i[M][C]),w=E[0],W=E[1],S=l(i[M]),L=g(k=W,0)?o:(R=f(k))!=null?R:0,I=((B=h(S))!=null?B:0)+t*T+c*T,D=function(x,_){var P;return g(x,0)?((P=f(x))!=null?P:0)-o:o-_}(W,L),j={id:C,value:w===null?w:W,formattedValue:a(W),hidden:!1,index:M,indexValue:S,data:p[M]};y.push({key:C+"."+j.indexValue,index:y.length,data:j,x:L,y:I,absX:v.left+L,absY:v.top+I,width:D,height:t,color:r(j),label:s(j)})})}),y},Xo=function(e){var t,n,o,i=e.layout,a=e.width,l=e.height,r=e.padding,s=r===void 0?0:r,d=e.innerPadding,m=d===void 0?0:d,c=e.valueScale,f=e.indexScale,h=e.hiddenIds,v=h===void 0?[]:h,g=St(e,Ho),p=g.keys.filter(function(_){return!v.includes(_)}),y=gi(g.data,p),C=i==="vertical"?["y","x",a]:["x","y",l],T=C[0],M=C[1],B=C[2],k=mi(y,g.getIndex,s,f,B,M),R=c.min==="auto"?Vo:function(_){return _},E=y.reduce(function(_,P){return[].concat(_,p.map(function(F){return P[F]}))},[]).filter(Boolean),w=R(Math.min.apply(Math,E)),W=(o=Math.max.apply(Math,E),isFinite(o)?o:0),S=Mn(c,{all:E,min:w,max:W},T==="x"?a:l,T),L=i==="vertical"?[k,S]:[S,k],I=L[0],D=L[1],j=(k.bandwidth()-m*(p.length-1))/p.length,x=[ae({},g,{data:y,keys:p,innerPadding:m,xScale:I,yScale:D}),j,(t=c.reverse)!=null&&t,(n=S(0))!=null?n:0];return{xScale:I,yScale:D,bars:j>0?i==="vertical"?Go.apply(void 0,x):Yo.apply(void 0,x):[]}},Uo=["data","layout","width","height","padding","valueScale","indexScale","hiddenIds"],pi=function(e){var t;return e.some(Array.isArray)?pi((t=[]).concat.apply(t,e)):e},qo=function(e,t,n){var o=e.formatValue,i=e.getColor,a=e.getIndex,l=e.getTooltipLabel,r=e.innerPadding,s=e.stackedData,d=e.xScale,m=e.yScale,c=e.margin,f=[];return s.forEach(function(h){return d.domain().forEach(function(v,g){var p,y,C=h[g],T=(p=d(a(C.data)))!=null?p:0,M=((y=function(W){return m(W[n?0:1])}(C))!=null?y:0)+.5*r,B=function(W,S){var L;return((L=m(W[n?1:0]))!=null?L:0)-S}(C,M)-r,k=rn(C.data[h.key]),R=k[0],E=k[1],w={id:h.key,value:R===null?R:E,formattedValue:o(E),hidden:!1,index:g,indexValue:v,data:ln(C.data)};f.push({key:h.key+"."+v,index:f.length,data:w,x:T,y:M,absX:c.left+T,absY:c.top+M,width:t,height:B,color:i(w),label:l(w)})})}),f},Ko=function(e,t,n){var o=e.formatValue,i=e.getColor,a=e.getIndex,l=e.getTooltipLabel,r=e.innerPadding,s=e.stackedData,d=e.xScale,m=e.yScale,c=e.margin,f=[];return s.forEach(function(h){return m.domain().forEach(function(v,g){var p,y,C=h[g],T=(p=m(a(C.data)))!=null?p:0,M=((y=function(W){return d(W[n?1:0])}(C))!=null?y:0)+.5*r,B=function(W,S){var L;return((L=d(W[n?0:1]))!=null?L:0)-S}(C,M)-r,k=rn(C.data[h.key]),R=k[0],E=k[1],w={id:h.key,value:R===null?R:E,formattedValue:o(E),hidden:!1,index:g,indexValue:v,data:ln(C.data)};f.push({key:h.key+"."+v,index:f.length,data:w,x:M,y:T,absX:c.left+M,absY:c.top+T,width:B,height:t,color:i(w),label:l(w)})})}),f},Jo=function(e){var t,n,o=e.data,i=e.layout,a=e.width,l=e.height,r=e.padding,s=r===void 0?0:r,d=e.valueScale,m=e.indexScale,c=e.hiddenIds,f=c===void 0?[]:c,h=St(e,Uo),v=h.keys.filter(function(j){return!f.includes(j)}),g=eo().keys(v).offset(Fi)(gi(o,v)),p=i==="vertical"?["y","x",a]:["x","y",l],y=p[0],C=p[1],T=p[2],M=mi(o,h.getIndex,s,m,T,C),B=(n=pi(g),d.type==="log"?n.filter(function(j){return j!==0}):n),k=Math.min.apply(Math,B),R=Math.max.apply(Math,B),E=Mn(d,{all:B,min:k,max:R},y==="x"?a:l,y),w=i==="vertical"?[M,E]:[E,M],W=w[0],S=w[1],L=h.innerPadding>0?h.innerPadding:0,I=M.bandwidth(),D=[ae({},h,{innerPadding:L,stackedData:g,xScale:W,yScale:S}),I,(t=d.reverse)!=null&&t];return{xScale:W,yScale:S,bars:I>0?i==="vertical"?qo.apply(void 0,D):Ko.apply(void 0,D):[]}},Zo=function(e){var t=e.bars,n=e.direction,o=e.from,i=e.groupMode,a=e.layout,l=e.legendLabel,r=e.reverse,s=zi(l??(o==="indexes"?"indexValue":"id"));return o==="indexes"?function(d,m,c){var f=In(d.map(function(h){var v,g;return{id:(v=h.data.indexValue)!=null?v:"",label:c(h.data),hidden:h.data.hidden,color:(g=h.color)!=null?g:"#000"}}),function(h){return h.id});return m==="horizontal"&&f.reverse(),f}(t,a,s):function(d,m,c,f,h,v){var g=In(d.map(function(p){var y;return{id:p.data.id,label:v(p.data),hidden:p.data.hidden,color:(y=p.color)!=null?y:"#000"}}),function(p){return p.id});return(m==="vertical"&&f==="stacked"&&c==="column"&&h!==!0||m==="horizontal"&&f==="stacked"&&h===!0)&&g.reverse(),g}(t,a,n,i,r,s)},Fn=function(e,t,n){var o=e.get(t)||0;e.set(t,o+n)},Qo=function(e,t,n){var o=e.get(t)||0;e.set(t,o+(n>0?n:0))},ea=function(e,t,n){var o=e.get(t)||0;e.set(t,Math.max(o,Number(n)))},ta=function(e,t){var n=e.get(t)||0;e.set(t,n+1)},yi=function(e){var t,n=e.indexBy,o=n===void 0?be.indexBy:n,i=e.keys,a=i===void 0?be.keys:i,l=e.label,r=l===void 0?be.label:l,s=e.tooltipLabel,d=s===void 0?be.tooltipLabel:s,m=e.valueFormat,c=e.colors,f=c===void 0?be.colors:c,h=e.colorBy,v=h===void 0?be.colorBy:h,g=e.borderColor,p=g===void 0?be.borderColor:g,y=e.labelTextColor,C=y===void 0?be.labelTextColor:y,T=e.groupMode,M=T===void 0?be.groupMode:T,B=e.layout,k=B===void 0?be.layout:B,R=e.data,E=e.margin,w=e.width,W=e.height,S=e.padding,L=S===void 0?be.padding:S,I=e.innerPadding,D=I===void 0?be.innerPadding:I,j=e.valueScale,x=j===void 0?be.valueScale:j,_=e.indexScale,P=_===void 0?be.indexScale:_,F=e.initialHiddenIds,X=F===void 0?be.initialHiddenIds:F,ve=e.enableLabel,ne=ve===void 0?be.enableLabel:ve,ce=e.labelSkipWidth,le=ce===void 0?be.labelSkipWidth:ce,Me=e.labelSkipHeight,re=Me===void 0?be.labelSkipHeight:Me,Q=e.legends,U=Q===void 0?be.legends:Q,de=e.legendLabel,ee=e.totalsOffset,we=ee===void 0?be.totalsOffset:ee,Ve=b.useState(X??[]),Ae=Ve[0],O=Ve[1],N=b.useCallback(function(z){O(function(V){return V.indexOf(z)>-1?V.filter(function(pe){return pe!==z}):[].concat(V,[z])})},[]),se=gn(o),ie=gn(r),xe=gn(d),K=Qt(m),Fe=mt(),ze=oi(f,v),Ge=en(p,Fe),Ye=en(C,Fe),He=(M==="grouped"?Xo:Jo)({layout:k,data:R,getIndex:se,keys:a,width:w,height:W,getColor:ze,padding:L,innerPadding:D,valueScale:x,indexScale:P,hiddenIds:Ae,formatValue:K,getTooltipLabel:xe,margin:E}),Ie=He.bars,it=He.xScale,Le=He.yScale,Pe=b.useMemo(function(){return Ie.filter(function(z){return z.data.value!==null}).map(function(z,V){return ae({},z,{index:V})})},[Ie]),Ze=b.useCallback(function(z){var V=z.width,pe=z.height;return!!ne&&!(le>0&&V<le)&&!(re>0&&pe<re)},[ne,le,re]),je=b.useMemo(function(){return a.map(function(z){var V=Ie.find(function(pe){return pe.data.id===z});return ae({},V,{data:ae({id:z},V==null?void 0:V.data,{hidden:Ae.includes(z)})})})},[Ae,a,Ie]),Be=(t=x.reverse)!=null&&t,_e=b.useMemo(function(){return U.map(function(z){return[z,Zo({bars:z.dataFrom==="keys"?je:Ie,direction:z.direction,from:z.dataFrom,groupMode:M,layout:k,legendLabel:de,reverse:Be})]})},[U,je,Ie,M,k,de,Be]),ot=b.useMemo(function(){return function(z,V,pe,q,he,ye,Ne){q===void 0&&(q=be.layout),he===void 0&&(he=be.groupMode);var Te=[];if(z.length===0)return Te;var oe=new Map,fe=z[0].width,Xe=z[0].height;if(he==="stacked"){var ke=new Map;z.forEach(function(Ce){var ue=Ce.data,J=ue.indexValue,me=ue.value;Fn(oe,J,Number(me)),Qo(ke,J,Number(me))}),ke.forEach(function(Ce,ue){var J,me,Ee,Re=oe.get(ue)||0;q==="vertical"?(J=V(ue),me=pe(Ce),Ee=pe(Ce/2)):(J=V(Ce),me=pe(ue),Ee=V(Ce/2)),J+=q==="vertical"?fe/2:ye,me+=q==="vertical"?-ye:Xe/2,Te.push({key:"total_"+ue,x:J,y:me,value:Re,formattedValue:Ne(Re),animationOffset:Ee})})}else if(he==="grouped"){var Ue=new Map,rt=new Map;z.forEach(function(Ce){var ue=Ce.data,J=ue.indexValue,me=ue.value;Fn(oe,J,Number(me)),ea(Ue,J,Number(me)),ta(rt,J)}),Ue.forEach(function(Ce,ue){var J,me,Ee,Re=oe.get(ue)||0,st=rt.get(ue);q==="vertical"?(J=V(ue),me=pe(Ce),Ee=pe(Ce/2)):(J=V(Ce),me=pe(ue),Ee=V(Ce/2)),J+=q==="vertical"?st*fe/2:ye,me+=q==="vertical"?-ye:st*Xe/2,Te.push({key:"total_"+ue,x:J,y:me,value:Re,formattedValue:Ne(Re),animationOffset:Ee})})}return Te}(Ie,it,Le,k,M,we,K)},[Ie,it,Le,k,M,we,K]);return{bars:Ie,barsWithValue:Pe,xScale:it,yScale:Le,getIndex:se,getLabel:ie,getTooltipLabel:xe,formatValue:K,getColor:ze,getBorderColor:Ge,getLabelColor:Ye,shouldRenderBarLabel:Ze,hiddenIds:Ae,toggleSerie:N,legendsWithData:_e,barTotals:ot}},na=function(e){var t=e.data,n=e.springConfig,o=e.animate,i=e.layout,a=i===void 0?ge.layout:i,l=mt();return Zn(t,{keys:function(r){return r.key},from:function(r){return{x:a==="vertical"?r.x:r.animationOffset,y:a==="vertical"?r.animationOffset:r.y,labelOpacity:0}},enter:function(r){return{x:r.x,y:r.y,labelOpacity:1}},update:function(r){return{x:r.x,y:r.y,labelOpacity:1}},leave:function(r){return{x:a==="vertical"?r.x:r.animationOffset,y:a==="vertical"?r.animationOffset:r.y,labelOpacity:0}},config:n,immediate:!o,initial:o?void 0:null})(function(r,s){return u.jsx(lt.text,{x:r.x,y:r.y,fillOpacity:r.labelOpacity,style:ae({},l.labels.text,{pointerEvents:"none"}),fontWeight:"bold",fontSize:l.labels.text.fontSize,fontFamily:l.labels.text.fontFamily,textAnchor:a==="vertical"?"middle":"start",alignmentBaseline:a==="vertical"?"alphabetic":"middle",children:s.formattedValue},s.key)})},ia=["isInteractive","animate","motionConfig","theme","renderWrapper"],oa=function(e){var t,n=e.data,o=e.indexBy,i=e.keys,a=e.margin,l=e.width,r=e.height,s=e.groupMode,d=e.layout,m=e.valueScale,c=e.indexScale,f=e.padding,h=e.innerPadding,v=e.axisTop,g=e.axisRight,p=e.axisBottom,y=p===void 0?ge.axisBottom:p,C=e.axisLeft,T=C===void 0?ge.axisLeft:C,M=e.enableGridX,B=M===void 0?ge.enableGridX:M,k=e.enableGridY,R=k===void 0?ge.enableGridY:k,E=e.gridXValues,w=e.gridYValues,W=e.layers,S=W===void 0?ge.layers:W,L=e.barComponent,I=L===void 0?ge.barComponent:L,D=e.enableLabel,j=D===void 0?ge.enableLabel:D,x=e.label,_=e.labelSkipWidth,P=_===void 0?ge.labelSkipWidth:_,F=e.labelSkipHeight,X=F===void 0?ge.labelSkipHeight:F,ve=e.labelTextColor,ne=e.labelPosition,ce=ne===void 0?ge.labelPosition:ne,le=e.labelOffset,Me=le===void 0?ge.labelOffset:le,re=e.markers,Q=re===void 0?ge.markers:re,U=e.colorBy,de=e.colors,ee=e.defs,we=ee===void 0?ge.defs:ee,Ve=e.fill,Ae=Ve===void 0?ge.fill:Ve,O=e.borderRadius,N=O===void 0?ge.borderRadius:O,se=e.borderWidth,ie=se===void 0?ge.borderWidth:se,xe=e.borderColor,K=e.annotations,Fe=K===void 0?ge.annotations:K,ze=e.legendLabel,Ge=e.tooltipLabel,Ye=e.valueFormat,He=e.isInteractive,Ie=He===void 0?ge.isInteractive:He,it=e.tooltip,Le=it===void 0?ge.tooltip:it,Pe=e.onClick,Ze=e.onMouseEnter,je=e.onMouseLeave,Be=e.legends,_e=e.role,ot=_e===void 0?ge.role:_e,z=e.ariaLabel,V=e.ariaLabelledBy,pe=e.ariaDescribedBy,q=e.isFocusable,he=q===void 0?ge.isFocusable:q,ye=e.barAriaLabel,Ne=e.barAriaLabelledBy,Te=e.barAriaDescribedBy,oe=e.barAriaHidden,fe=e.barAriaDisabled,Xe=e.initialHiddenIds,ke=e.enableTotals,Ue=ke===void 0?ge.enableTotals:ke,rt=e.totalsOffset,Ce=rt===void 0?ge.totalsOffset:rt,ue=e.forwardedRef,J=Et(),me=J.animate,Ee=J.config,Re=Ht(l,r,a),st=Re.outerWidth,Ct=Re.outerHeight,gt=Re.margin,Qe=Re.innerWidth,dt=Re.innerHeight,De=yi({indexBy:o,label:x,tooltipLabel:Ge,valueFormat:Ye,colors:de,colorBy:U,borderColor:xe,labelTextColor:ve,groupMode:s,layout:d,data:n,keys:i,margin:gt,width:Qe,height:dt,padding:f,innerPadding:h,valueScale:m,indexScale:c,enableLabel:j,labelSkipWidth:P,labelSkipHeight:X,legends:Be,legendLabel:ze,initialHiddenIds:Xe,totalsOffset:Ce}),$=De.bars,Z=De.barsWithValue,qe=De.xScale,et=De.yScale,ct=De.getLabel,Y=De.getTooltipLabel,H=De.getBorderColor,te=De.getLabelColor,at=De.shouldRenderBarLabel,We=De.toggleSerie,yt=De.legendsWithData,bt=De.barTotals,Rt=De.getColor,tt=bi(d,(t=m==null?void 0:m.reverse)!=null&&t,ce,Me),vt=Zn(Z,{keys:function(A){return A.key},from:function(A){return ae({borderColor:H(A),color:A.color,height:0,labelColor:te(A),labelOpacity:0},tt(A.width,A.height),{transform:"translate("+A.x+", "+(A.y+A.height)+")",width:A.width},d==="vertical"?{}:{height:A.height,transform:"translate("+A.x+", "+A.y+")",width:0})},enter:function(A){return ae({borderColor:H(A),color:A.color,height:A.height,labelColor:te(A),labelOpacity:1},tt(A.width,A.height),{transform:"translate("+A.x+", "+A.y+")",width:A.width})},update:function(A){return ae({borderColor:H(A),color:A.color,height:A.height,labelColor:te(A),labelOpacity:1},tt(A.width,A.height),{transform:"translate("+A.x+", "+A.y+")",width:A.width})},leave:function(A){return ae({borderColor:H(A),color:A.color,height:0,labelColor:te(A),labelOpacity:0},tt(A.width,A.height),{labelY:0,transform:"translate("+A.x+", "+(A.y+A.height)+")",width:A.width},d==="vertical"?{}:ae({},tt(A.width,A.height),{labelX:0,height:A.height,transform:"translate("+A.x+", "+A.y+")",width:0}))},config:Ee,immediate:!me,initial:me?void 0:null}),Yt=b.useMemo(function(){return{borderRadius:N,borderWidth:ie,enableLabel:j,isInteractive:Ie,labelSkipWidth:P,labelSkipHeight:X,onClick:Pe,onMouseEnter:Ze,onMouseLeave:je,getTooltipLabel:Y,tooltip:Le,isFocusable:he,ariaLabel:ye,ariaLabelledBy:Ne,ariaDescribedBy:Te,ariaHidden:oe,ariaDisabled:fe}},[N,ie,j,Y,Ie,X,P,Pe,Ze,je,Le,he,ye,Ne,Te,oe,fe]),un=Qn(we,$,Ae,{dataKey:"data",targetKey:"data.fill"}),Oe={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};S.includes("annotations")&&(Oe.annotations=u.jsx(Do,{bars:$,annotations:Fe},"annotations")),S.includes("axes")&&(Oe.axes=u.jsx(ei,{xScale:qe,yScale:et,width:Qe,height:dt,top:v,right:g,bottom:y,left:T},"axes")),S.includes("bars")&&(Oe.bars=u.jsx(b.Fragment,{children:vt(function(A,Mt){return b.createElement(I,ae({},Yt,{bar:Mt,style:A,shouldRenderLabel:at(Mt),label:ct(Mt.data)}))})},"bars")),S.includes("grid")&&(Oe.grid=u.jsx(ti,{width:Qe,height:dt,xScale:B?qe:null,yScale:R?et:null,xValues:E,yValues:w},"grid")),S.includes("legends")&&(Oe.legends=u.jsx($o,{width:Qe,height:dt,legends:yt,toggleSerie:We},"legends")),S.includes("markers")&&(Oe.markers=u.jsx(ni,{markers:Q,width:Qe,height:dt,xScale:qe,yScale:et},"markers")),S.includes("totals")&&Ue&&(Oe.totals=u.jsx(na,{data:bt,springConfig:Ee,animate:me,layout:d},"totals"));var cn=ae({},Yt,{margin:gt,width:l,height:r,innerWidth:Qe,innerHeight:dt,bars:$,legendData:yt,enableLabel:j,xScale:qe,yScale:et,tooltip:Le,getTooltipLabel:Y,onClick:Pe,onMouseEnter:Ze,onMouseLeave:je,getColor:Rt});return u.jsx(Cn,{width:st,height:Ct,margin:gt,defs:un,role:ot,ariaLabel:z,ariaLabelledBy:V,ariaDescribedBy:pe,isFocusable:he,ref:ue,children:S.map(function(A,Mt){var It;return typeof A=="function"?u.jsx(b.Fragment,{children:b.createElement(A,cn)},Mt):(It=Oe==null?void 0:Oe[A])!=null?It:null})})},aa=b.forwardRef(function(e,t){var n=e.isInteractive,o=n===void 0?ge.isInteractive:n,i=e.animate,a=i===void 0?ge.animate:i,l=e.motionConfig,r=l===void 0?ge.motionConfig:l,s=e.theme,d=e.renderWrapper,m=St(e,ia);return u.jsx(zt,{animate:a,isInteractive:o,motionConfig:r,renderWrapper:d,theme:s,children:u.jsx(oa,ae({},m,{isInteractive:o,forwardedRef:t}))})}),la=["isInteractive","renderWrapper","theme"],bn=function(e,t,n,o){return e.find(function(i){return ui(i.x+t.left,i.y+t.top,i.width,i.height,n,o)})},ra=function(e){var t,n=e.data,o=e.indexBy,i=e.keys,a=e.margin,l=e.width,r=e.height,s=e.groupMode,d=e.layout,m=e.valueScale,c=e.indexScale,f=e.padding,h=e.innerPadding,v=e.axisTop,g=e.axisRight,p=e.axisBottom,y=p===void 0?$e.axisBottom:p,C=e.axisLeft,T=C===void 0?$e.axisLeft:C,M=e.enableGridX,B=M===void 0?$e.enableGridX:M,k=e.enableGridY,R=k===void 0?$e.enableGridY:k,E=e.gridXValues,w=e.gridYValues,W=e.labelPosition,S=W===void 0?$e.labelPosition:W,L=e.labelOffset,I=L===void 0?$e.labelOffset:L,D=e.layers,j=D===void 0?$e.layers:D,x=e.renderBar,_=x===void 0?$e.renderBar:x,P=e.enableLabel,F=P===void 0?$e.enableLabel:P,X=e.label,ve=e.labelSkipWidth,ne=ve===void 0?$e.labelSkipWidth:ve,ce=e.labelSkipHeight,le=ce===void 0?$e.labelSkipHeight:ce,Me=e.labelTextColor,re=e.colorBy,Q=e.colors,U=e.borderRadius,de=U===void 0?$e.borderRadius:U,ee=e.borderWidth,we=ee===void 0?$e.borderWidth:ee,Ve=e.borderColor,Ae=e.annotations,O=Ae===void 0?$e.annotations:Ae,N=e.legendLabel,se=e.tooltipLabel,ie=e.valueFormat,xe=e.isInteractive,K=xe===void 0?$e.isInteractive:xe,Fe=e.tooltip,ze=Fe===void 0?$e.tooltip:Fe,Ge=e.onClick,Ye=e.onMouseEnter,He=e.onMouseLeave,Ie=e.legends,it=e.pixelRatio,Le=it===void 0?$e.pixelRatio:it,Pe=e.role,Ze=e.forwardedRef,je=e.enableTotals,Be=je===void 0?$e.enableTotals:je,_e=e.totalsOffset,ot=_e===void 0?$e.totalsOffset:_e,z=b.useRef(null),V=mt(),pe=Ht(l,r,a),q=pe.margin,he=pe.innerWidth,ye=pe.innerHeight,Ne=pe.outerWidth,Te=pe.outerHeight,oe=yi({indexBy:o,label:X,tooltipLabel:se,valueFormat:ie,colors:Q,colorBy:re,borderColor:Ve,labelTextColor:Me,groupMode:s,layout:d,data:n,keys:i,margin:q,width:he,height:ye,padding:f,innerPadding:h,valueScale:m,indexScale:c,enableLabel:F,labelSkipWidth:ne,labelSkipHeight:le,legends:Ie,legendLabel:N,totalsOffset:ot}),fe=oe.bars,Xe=oe.barsWithValue,ke=oe.xScale,Ue=oe.yScale,rt=oe.getLabel,Ce=oe.getTooltipLabel,ue=oe.getBorderColor,J=oe.getLabelColor,me=oe.shouldRenderBarLabel,Ee=oe.legendsWithData,Re=oe.barTotals,st=oe.getColor,Ct=Tt(),gt=Ct.showTooltipFromEvent,Qe=Ct.hideTooltip,dt=To({annotations:fi({data:fe,annotations:O,getPosition:function(Y){return{x:Y.x,y:Y.y}},getDimensions:function(Y){var H=Y.width,te=Y.height;return{width:H,height:te,size:Math.max(H,te)}}})}),De=b.useMemo(function(){return{borderRadius:de,borderWidth:we,isInteractive:K,isFocusable:!1,labelSkipWidth:ne,labelSkipHeight:le,margin:q,width:l,height:r,innerWidth:he,innerHeight:ye,bars:fe,legendData:Ee,enableLabel:F,xScale:ke,yScale:Ue,tooltip:ze,getTooltipLabel:Ce,onClick:Ge,onMouseEnter:Ye,onMouseLeave:He,getColor:st}},[de,we,K,ne,le,q,l,r,he,ye,fe,Ee,F,ke,Ue,ze,Ce,Ge,Ye,He,st]),$=Qt(ie),Z=bi(d,(t=m==null?void 0:m.reverse)!=null&&t,S,I);b.useEffect(function(){if(z.current){z.current.width=Ne*Le,z.current.height=Te*Le;var Y=z.current.getContext("2d");Y.scale(Le,Le),Y.fillStyle=V.background,Y.fillRect(0,0,Ne,Te),Y.translate(q.left,q.top),j.forEach(function(H){H==="grid"?typeof V.grid.line.strokeWidth=="number"&&V.grid.line.strokeWidth>0&&(Y.lineWidth=V.grid.line.strokeWidth,Y.strokeStyle=V.grid.line.stroke,B&&tn(Y,{width:he,height:ye,scale:ke,axis:"x",values:E}),R&&tn(Y,{width:he,height:ye,scale:Ue,axis:"y",values:w})):H==="axes"?ri(Y,{xScale:ke,yScale:Ue,width:he,height:ye,top:v,right:g,bottom:y,left:T,theme:V}):H==="bars"?(En(Y,V.text),Xe.forEach(function(te){_(Y,ae({bar:te,borderColor:ue(te),borderRadius:de,borderWidth:we,label:rt(te.data),shouldRenderLabel:me(te),labelStyle:ae({},V.labels.text,{fill:J(te)})},Z(te.width,te.height)))})):H==="legends"?Ee.forEach(function(te){var at=te[0],We=te[1];si(Y,ae({},at,{data:We,containerWidth:he,containerHeight:ye,theme:V}))}):H==="annotations"?Po(Y,{annotations:dt,theme:V}):H==="totals"&&Be?function(te,at,We,yt){yt===void 0&&(yt=$e.layout),En(te,We.labels.text),te.textBaseline=yt==="vertical"?"alphabetic":"middle",te.textAlign=yt==="vertical"?"center":"start",at.forEach(function(bt){li(te,We.labels.text,bt.formattedValue,bt.x,bt.y)})}(Y,Re,V,d):typeof H=="function"&&H(Y,De)}),Y.save()}},[y,T,g,v,Xe,de,we,dt,B,R,ue,rt,J,E,w,s,r,ye,he,De,j,d,Ee,q.left,q.top,Te,Ne,Le,_,ke,Ue,me,V,l,Re,Be,$,Z]);var qe=b.useCallback(function(Y){if(fe&&z.current){var H=Dt(z.current,Y),te=H[0],at=H[1],We=bn(fe,q,te,at);We!==void 0?(gt(b.createElement(ze,ae({},We.data,{color:We.color,label:We.label,value:Number(We.data.value)})),Y),Y.type==="mouseenter"&&(Ye==null||Ye(We.data,Y))):Qe()}},[Qe,q,Ye,fe,gt,ze]),et=b.useCallback(function(Y){if(fe&&z.current){Qe();var H=Dt(z.current,Y),te=H[0],at=H[1],We=bn(fe,q,te,at);We&&(He==null||He(We.data,Y))}},[Qe,q,He,fe]),ct=b.useCallback(function(Y){if(fe&&z.current){var H=Dt(z.current,Y),te=H[0],at=H[1],We=bn(fe,q,te,at);We!==void 0&&(Ge==null||Ge(ae({},We.data,{color:We.color}),Y))}},[q,Ge,fe]);return u.jsx("canvas",{ref:di(z,Ze),width:Ne*Le,height:Te*Le,style:{width:Ne,height:Te,cursor:K?"auto":"normal"},onMouseEnter:K?qe:void 0,onMouseMove:K?qe:void 0,onMouseLeave:K?et:void 0,onClick:K?ct:void 0,role:Pe})},sa=b.forwardRef(function(e,t){var n=e.isInteractive,o=e.renderWrapper,i=e.theme,a=St(e,la);return u.jsx(zt,{isInteractive:n,renderWrapper:o,theme:i,animate:!1,children:u.jsx(ra,ae({},a,{isInteractive:n,forwardedRef:t}))})}),da=["defaultWidth","defaultHeight","onResize","debounceResize"],ua=b.forwardRef(function(e,t){var n=e.defaultWidth,o=e.defaultHeight,i=e.onResize,a=e.debounceResize,l=St(e,da);return u.jsx(Ft,{defaultWidth:n,defaultHeight:o,onResize:i,debounceResize:a,children:function(r){var s=r.width,d=r.height;return u.jsx(aa,ae({},l,{width:s,height:d,ref:t}))}})}),ca=["defaultWidth","defaultHeight","onResize","debounceResize"];b.forwardRef(function(e,t){var n=e.defaultWidth,o=e.defaultHeight,i=e.onResize,a=e.debounceResize,l=St(e,ca);return u.jsx(Ft,{defaultWidth:n,defaultHeight:o,onResize:i,debounceResize:a,children:function(r){var s=r.width,d=r.height;return u.jsx(sa,ae({},l,{width:s,height:d,ref:t}))}})});function ha({className:e}){const[t,n]=b.useState([]);return b.useEffect(()=>{n([{range:"0-50ms",count:45},{range:"50-100ms",count:30},{range:"100-200ms",count:15},{range:"200-500ms",count:8},{range:"500ms+",count:2}])},[]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Latency Distribution"}),u.jsx("div",{className:"h-[250px]",children:u.jsx(ua,{data:t,keys:["count"],indexBy:"range",margin:{top:10,right:10,bottom:30,left:40},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:"#3b82f6",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},theme:{axis:{ticks:{text:{fill:"#666"}}},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}var fa=to,ma=0;function ga(e){var t=++ma;return fa(e)+t}var ba=ga;const va=Un(ba),wt=11102230246251565e-32,Ke=134217729,xa=(3+8*wt)*wt;function vn(e,t,n,o,i){let a,l,r,s,d=t[0],m=o[0],c=0,f=0;m>d==m>-d?(a=d,d=t[++c]):(a=m,m=o[++f]);let h=0;if(c<e&&f<n)for(m>d==m>-d?(l=d+a,r=a-(l-d),d=t[++c]):(l=m+a,r=a-(l-m),m=o[++f]),a=l,r!==0&&(i[h++]=r);c<e&&f<n;)m>d==m>-d?(l=a+d,s=l-a,r=a-(l-s)+(d-s),d=t[++c]):(l=a+m,s=l-a,r=a-(l-s)+(m-s),m=o[++f]),a=l,r!==0&&(i[h++]=r);for(;c<e;)l=a+d,s=l-a,r=a-(l-s)+(d-s),d=t[++c],a=l,r!==0&&(i[h++]=r);for(;f<n;)l=a+m,s=l-a,r=a-(l-s)+(m-s),m=o[++f],a=l,r!==0&&(i[h++]=r);return(a!==0||h===0)&&(i[h++]=a),h}function pa(e,t){let n=t[0];for(let o=1;o<e;o++)n+=t[o];return n}function Vt(e){return new Float64Array(e)}const ya=(3+16*wt)*wt,ka=(2+12*wt)*wt,wa=(9+64*wt)*wt*wt,Wt=Vt(4),zn=Vt(8),Hn=Vt(12),Vn=Vt(16),nt=Vt(4);function Ca(e,t,n,o,i,a,l){let r,s,d,m,c,f,h,v,g,p,y,C,T,M,B,k,R,E;const w=e-i,W=n-i,S=t-a,L=o-a;M=w*L,f=Ke*w,h=f-(f-w),v=w-h,f=Ke*L,g=f-(f-L),p=L-g,B=v*p-(M-h*g-v*g-h*p),k=S*W,f=Ke*S,h=f-(f-S),v=S-h,f=Ke*W,g=f-(f-W),p=W-g,R=v*p-(k-h*g-v*g-h*p),y=B-R,c=B-y,Wt[0]=B-(y+c)+(c-R),C=M+y,c=C-M,T=M-(C-c)+(y-c),y=T-k,c=T-y,Wt[1]=T-(y+c)+(c-k),E=C+y,c=E-C,Wt[2]=C-(E-c)+(y-c),Wt[3]=E;let I=pa(4,Wt),D=ka*l;if(I>=D||-I>=D||(c=e-w,r=e-(w+c)+(c-i),c=n-W,d=n-(W+c)+(c-i),c=t-S,s=t-(S+c)+(c-a),c=o-L,m=o-(L+c)+(c-a),r===0&&s===0&&d===0&&m===0)||(D=wa*l+xa*Math.abs(I),I+=w*m+L*r-(S*d+W*s),I>=D||-I>=D))return I;M=r*L,f=Ke*r,h=f-(f-r),v=r-h,f=Ke*L,g=f-(f-L),p=L-g,B=v*p-(M-h*g-v*g-h*p),k=s*W,f=Ke*s,h=f-(f-s),v=s-h,f=Ke*W,g=f-(f-W),p=W-g,R=v*p-(k-h*g-v*g-h*p),y=B-R,c=B-y,nt[0]=B-(y+c)+(c-R),C=M+y,c=C-M,T=M-(C-c)+(y-c),y=T-k,c=T-y,nt[1]=T-(y+c)+(c-k),E=C+y,c=E-C,nt[2]=C-(E-c)+(y-c),nt[3]=E;const j=vn(4,Wt,4,nt,zn);M=w*m,f=Ke*w,h=f-(f-w),v=w-h,f=Ke*m,g=f-(f-m),p=m-g,B=v*p-(M-h*g-v*g-h*p),k=S*d,f=Ke*S,h=f-(f-S),v=S-h,f=Ke*d,g=f-(f-d),p=d-g,R=v*p-(k-h*g-v*g-h*p),y=B-R,c=B-y,nt[0]=B-(y+c)+(c-R),C=M+y,c=C-M,T=M-(C-c)+(y-c),y=T-k,c=T-y,nt[1]=T-(y+c)+(c-k),E=C+y,c=E-C,nt[2]=C-(E-c)+(y-c),nt[3]=E;const x=vn(j,zn,4,nt,Hn);M=r*m,f=Ke*r,h=f-(f-r),v=r-h,f=Ke*m,g=f-(f-m),p=m-g,B=v*p-(M-h*g-v*g-h*p),k=s*d,f=Ke*s,h=f-(f-s),v=s-h,f=Ke*d,g=f-(f-d),p=d-g,R=v*p-(k-h*g-v*g-h*p),y=B-R,c=B-y,nt[0]=B-(y+c)+(c-R),C=M+y,c=C-M,T=M-(C-c)+(y-c),y=T-k,c=T-y,nt[1]=T-(y+c)+(c-k),E=C+y,c=E-C,nt[2]=C-(E-c)+(y-c),nt[3]=E;const _=vn(x,Hn,4,nt,Vn);return Vn[_-1]}function Jt(e,t,n,o,i,a){const l=(t-a)*(n-i),r=(e-i)*(o-a),s=l-r,d=Math.abs(l+r);return Math.abs(s)>=ya*d?s:-Ca(e,t,n,o,i,a,d)}const Gn=Math.pow(2,-52),Zt=new Uint32Array(512);class on{static from(t,n=Ta,o=Wa){const i=t.length,a=new Float64Array(i*2);for(let l=0;l<i;l++){const r=t[l];a[2*l]=n(r),a[2*l+1]=o(r)}return new on(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const o=Math.max(2*n-5,0);this._triangles=new Uint32Array(o*3),this._halfedges=new Int32Array(o*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:o,_hullTri:i,_hullHash:a}=this,l=t.length>>1;let r=1/0,s=1/0,d=-1/0,m=-1/0;for(let w=0;w<l;w++){const W=t[2*w],S=t[2*w+1];W<r&&(r=W),S<s&&(s=S),W>d&&(d=W),S>m&&(m=S),this._ids[w]=w}const c=(r+d)/2,f=(s+m)/2;let h,v,g;for(let w=0,W=1/0;w<l;w++){const S=xn(c,f,t[2*w],t[2*w+1]);S<W&&(h=w,W=S)}const p=t[2*h],y=t[2*h+1];for(let w=0,W=1/0;w<l;w++){if(w===h)continue;const S=xn(p,y,t[2*w],t[2*w+1]);S<W&&S>0&&(v=w,W=S)}let C=t[2*v],T=t[2*v+1],M=1/0;for(let w=0;w<l;w++){if(w===h||w===v)continue;const W=ja(p,y,C,T,t[2*w],t[2*w+1]);W<M&&(g=w,M=W)}let B=t[2*g],k=t[2*g+1];if(M===1/0){for(let S=0;S<l;S++)this._dists[S]=t[2*S]-t[0]||t[2*S+1]-t[1];Bt(this._ids,this._dists,0,l-1);const w=new Uint32Array(l);let W=0;for(let S=0,L=-1/0;S<l;S++){const I=this._ids[S],D=this._dists[I];D>L&&(w[W++]=I,L=D)}this.hull=w.subarray(0,W),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Jt(p,y,C,T,B,k)<0){const w=v,W=C,S=T;v=g,C=B,T=k,g=w,B=W,k=S}const R=_a(p,y,C,T,B,k);this._cx=R.x,this._cy=R.y;for(let w=0;w<l;w++)this._dists[w]=xn(t[2*w],t[2*w+1],R.x,R.y);Bt(this._ids,this._dists,0,l-1),this._hullStart=h;let E=3;o[h]=n[g]=v,o[v]=n[h]=g,o[g]=n[v]=h,i[h]=0,i[v]=1,i[g]=2,a.fill(-1),a[this._hashKey(p,y)]=h,a[this._hashKey(C,T)]=v,a[this._hashKey(B,k)]=g,this.trianglesLen=0,this._addTriangle(h,v,g,-1,-1,-1);for(let w=0,W,S;w<this._ids.length;w++){const L=this._ids[w],I=t[2*L],D=t[2*L+1];if(w>0&&Math.abs(I-W)<=Gn&&Math.abs(D-S)<=Gn||(W=I,S=D,L===h||L===v||L===g))continue;let j=0;for(let X=0,ve=this._hashKey(I,D);X<this._hashSize&&(j=a[(ve+X)%this._hashSize],!(j!==-1&&j!==o[j]));X++);j=n[j];let x=j,_;for(;_=o[x],Jt(I,D,t[2*x],t[2*x+1],t[2*_],t[2*_+1])>=0;)if(x=_,x===j){x=-1;break}if(x===-1)continue;let P=this._addTriangle(x,L,o[x],-1,-1,i[x]);i[L]=this._legalize(P+2),i[x]=P,E++;let F=o[x];for(;_=o[F],Jt(I,D,t[2*F],t[2*F+1],t[2*_],t[2*_+1])<0;)P=this._addTriangle(F,L,_,i[L],-1,i[F]),i[L]=this._legalize(P+2),o[F]=F,E--,F=_;if(x===j)for(;_=n[x],Jt(I,D,t[2*_],t[2*_+1],t[2*x],t[2*x+1])<0;)P=this._addTriangle(_,L,x,-1,i[x],i[_]),this._legalize(P+2),i[_]=P,o[x]=x,E--,x=_;this._hullStart=n[L]=x,o[x]=n[F]=L,o[L]=F,a[this._hashKey(I,D)]=L,a[this._hashKey(t[2*x],t[2*x+1])]=x}this.hull=new Uint32Array(E);for(let w=0,W=this._hullStart;w<E;w++)this.hull[w]=W,W=o[W];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Ma(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:o,coords:i}=this;let a=0,l=0;for(;;){const r=o[t],s=t-t%3;if(l=s+(t+2)%3,r===-1){if(a===0)break;t=Zt[--a];continue}const d=r-r%3,m=s+(t+1)%3,c=d+(r+2)%3,f=n[l],h=n[t],v=n[m],g=n[c];if(Sa(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*v],i[2*v+1],i[2*g],i[2*g+1])){n[t]=g,n[r]=f;const y=o[c];if(y===-1){let T=this._hullStart;do{if(this._hullTri[T]===c){this._hullTri[T]=t;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(t,y),this._link(r,o[l]),this._link(l,c);const C=d+(r+1)%3;a<Zt.length&&(Zt[a++]=C)}else{if(a===0)break;t=Zt[--a]}}return l}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,o,i,a,l){const r=this.trianglesLen;return this._triangles[r]=t,this._triangles[r+1]=n,this._triangles[r+2]=o,this._link(r,i),this._link(r+1,a),this._link(r+2,l),this.trianglesLen+=3,r}}function Ma(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function xn(e,t,n,o){const i=e-n,a=t-o;return i*i+a*a}function Sa(e,t,n,o,i,a,l,r){const s=e-l,d=t-r,m=n-l,c=o-r,f=i-l,h=a-r,v=s*s+d*d,g=m*m+c*c,p=f*f+h*h;return s*(c*p-g*h)-d*(m*p-g*f)+v*(m*h-c*f)<0}function ja(e,t,n,o,i,a){const l=n-e,r=o-t,s=i-e,d=a-t,m=l*l+r*r,c=s*s+d*d,f=.5/(l*d-r*s),h=(d*m-r*c)*f,v=(l*c-s*m)*f;return h*h+v*v}function _a(e,t,n,o,i,a){const l=n-e,r=o-t,s=i-e,d=a-t,m=l*l+r*r,c=s*s+d*d,f=.5/(l*d-r*s),h=e+(d*m-r*c)*f,v=t+(l*c-s*m)*f;return{x:h,y:v}}function Bt(e,t,n,o){if(o-n<=20)for(let i=n+1;i<=o;i++){const a=e[i],l=t[a];let r=i-1;for(;r>=n&&t[e[r]]>l;)e[r+1]=e[r--];e[r+1]=a}else{const i=n+o>>1;let a=n+1,l=o;Nt(e,i,a),t[e[n]]>t[e[o]]&&Nt(e,n,o),t[e[a]]>t[e[o]]&&Nt(e,a,o),t[e[n]]>t[e[a]]&&Nt(e,n,a);const r=e[a],s=t[r];for(;;){do a++;while(t[e[a]]<s);do l--;while(t[e[l]]>s);if(l<a)break;Nt(e,a,l)}e[n+1]=e[l],e[l]=r,o-a+1>=l-n?(Bt(e,t,a,o),Bt(e,t,n,l-1)):(Bt(e,t,n,l-1),Bt(e,t,a,o))}}function Nt(e,t,n){const o=e[t];e[t]=e[n],e[n]=o}function Ta(e){return e[0]}function Wa(e){return e[1]}const Yn=1e-6;class _t{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,o){t=+t,n=+n,o=+o;const i=t+o,a=n;if(o<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>Yn||Math.abs(this._y1-a)>Yn)&&(this._+="L"+i+","+a),o&&(this._+=`A${o},${o},0,1,1,${t-o},${n}A${o},${o},0,1,1,${this._x1=i},${this._y1=a}`)}rect(t,n,o,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+o}v${+i}h${-o}Z`}value(){return this._||null}}class kn{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class La{constructor(t,[n,o,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((a=+a)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=o,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:o},vectors:i}=this;let a,l;const r=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let g=0,p=0,y=o.length,C,T;g<y;g+=3,p+=2){const M=o[g]*2,B=o[g+1]*2,k=o[g+2]*2,R=t[M],E=t[M+1],w=t[B],W=t[B+1],S=t[k],L=t[k+1],I=w-R,D=W-E,j=S-R,x=L-E,_=(I*x-D*j)*2;if(Math.abs(_)<1e-9){if(a===void 0){a=l=0;for(const F of n)a+=t[F*2],l+=t[F*2+1];a/=n.length,l/=n.length}const P=1e9*Math.sign((a-R)*x-(l-E)*j);C=(R+S)/2-P*x,T=(E+L)/2+P*j}else{const P=1/_,F=I*I+D*D,X=j*j+x*x;C=R+(x*F-D*X)*P,T=E+(I*X-j*F)*P}r[p]=C,r[p+1]=T}let s=n[n.length-1],d,m=s*4,c,f=t[2*s],h,v=t[2*s+1];i.fill(0);for(let g=0;g<n.length;++g)s=n[g],d=m,c=f,h=v,m=s*4,f=t[2*s],v=t[2*s+1],i[d+2]=i[m]=h-v,i[d+3]=i[m+1]=f-c}render(t){const n=t==null?t=new _t:void 0,{delaunay:{halfedges:o,inedges:i,hull:a},circumcenters:l,vectors:r}=this;if(a.length<=1)return null;for(let m=0,c=o.length;m<c;++m){const f=o[m];if(f<m)continue;const h=Math.floor(m/3)*2,v=Math.floor(f/3)*2,g=l[h],p=l[h+1],y=l[v],C=l[v+1];this._renderSegment(g,p,y,C,t)}let s,d=a[a.length-1];for(let m=0;m<a.length;++m){s=d,d=a[m];const c=Math.floor(i[d]/3)*2,f=l[c],h=l[c+1],v=s*4,g=this._project(f,h,r[v+2],r[v+3]);g&&this._renderSegment(f,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new _t:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const o=n==null?n=new _t:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let l=2;l<a;l+=2)(i[l]!==i[l-2]||i[l+1]!==i[l-1])&&n.lineTo(i[l],i[l+1]);return n.closePath(),o&&o.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,o=t.length/2;n<o;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new kn;return this.renderCell(t,n),n.value()}_renderSegment(t,n,o,i,a){let l;const r=this._regioncode(t,n),s=this._regioncode(o,i);r===0&&s===0?(a.moveTo(t,n),a.lineTo(o,i)):(l=this._clipSegment(t,n,o,i,r,s))&&(a.moveTo(l[0],l[1]),a.lineTo(l[2],l[3]))}contains(t,n,o){return n=+n,n!==n||(o=+o,o!==o)?!1:this.delaunay._step(t,n,o)===t}*neighbors(t){const n=this._clip(t);if(n)for(const o of this.delaunay.neighbors(t)){const i=this._clip(o);if(i){e:for(let a=0,l=n.length;a<l;a+=2)for(let r=0,s=i.length;r<s;r+=2)if(n[a]===i[r]&&n[a+1]===i[r+1]&&n[(a+2)%l]===i[(r+s-2)%s]&&n[(a+3)%l]===i[(r+s-1)%s]){yield o;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:o,halfedges:i,triangles:a}}=this,l=o[t];if(l===-1)return null;const r=[];let s=l;do{const d=Math.floor(s/3);if(r.push(n[d*2],n[d*2+1]),s=s%3===2?s-2:s+1,a[s]!==t)break;s=i[s]}while(s!==l&&s!==-1);return r}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:o}=this,i=t*4;return this._simplify(o[i]||o[i+1]?this._clipInfinite(t,n,o[i],o[i+1],o[i+2],o[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const o=n.length;let i=null,a,l,r=n[o-2],s=n[o-1],d,m=this._regioncode(r,s),c,f=0;for(let h=0;h<o;h+=2)if(a=r,l=s,r=n[h],s=n[h+1],d=m,m=this._regioncode(r,s),d===0&&m===0)c=f,f=0,i?i.push(r,s):i=[r,s];else{let v,g,p,y,C;if(d===0){if((v=this._clipSegment(a,l,r,s,d,m))===null)continue;[g,p,y,C]=v}else{if((v=this._clipSegment(r,s,a,l,m,d))===null)continue;[y,C,g,p]=v,c=f,f=this._edgecode(g,p),c&&f&&this._edge(t,c,f,i,i.length),i?i.push(g,p):i=[g,p]}c=f,f=this._edgecode(y,C),c&&f&&this._edge(t,c,f,i,i.length),i?i.push(y,C):i=[y,C]}if(i)c=f,f=this._edgecode(i[0],i[1]),c&&f&&this._edge(t,c,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,o,i,a,l){const r=a<l;for(r&&([t,n,o,i,a,l]=[o,i,t,n,l,a]);;){if(a===0&&l===0)return r?[o,i,t,n]:[t,n,o,i];if(a&l)return null;let s,d,m=a||l;m&8?(s=t+(o-t)*(this.ymax-n)/(i-n),d=this.ymax):m&4?(s=t+(o-t)*(this.ymin-n)/(i-n),d=this.ymin):m&2?(d=n+(i-n)*(this.xmax-t)/(o-t),s=this.xmax):(d=n+(i-n)*(this.xmin-t)/(o-t),s=this.xmin),a?(t=s,n=d,a=this._regioncode(t,n)):(o=s,i=d,l=this._regioncode(o,i))}}_clipInfinite(t,n,o,i,a,l){let r=Array.from(n),s;if((s=this._project(r[0],r[1],o,i))&&r.unshift(s[0],s[1]),(s=this._project(r[r.length-2],r[r.length-1],a,l))&&r.push(s[0],s[1]),r=this._clipFinite(t,r))for(let d=0,m=r.length,c,f=this._edgecode(r[m-2],r[m-1]);d<m;d+=2)c=f,f=this._edgecode(r[d],r[d+1]),c&&f&&(d=this._edge(t,c,f,r,d),m=r.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(r=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return r}_edge(t,n,o,i,a){for(;n!==o;){let l,r;switch(n){case 5:n=4;continue;case 4:n=6,l=this.xmax,r=this.ymin;break;case 6:n=2;continue;case 2:n=10,l=this.xmax,r=this.ymax;break;case 10:n=8;continue;case 8:n=9,l=this.xmin,r=this.ymax;break;case 9:n=1;continue;case 1:n=5,l=this.xmin,r=this.ymin;break}(i[a]!==l||i[a+1]!==r)&&this.contains(t,l,r)&&(i.splice(a,0,l,r),a+=2)}return a}_project(t,n,o,i){let a=1/0,l,r,s;if(i<0){if(n<=this.ymin)return null;(l=(this.ymin-n)/i)<a&&(s=this.ymin,r=t+(a=l)*o)}else if(i>0){if(n>=this.ymax)return null;(l=(this.ymax-n)/i)<a&&(s=this.ymax,r=t+(a=l)*o)}if(o>0){if(t>=this.xmax)return null;(l=(this.xmax-t)/o)<a&&(r=this.xmax,s=n+(a=l)*i)}else if(o<0){if(t<=this.xmin)return null;(l=(this.xmin-t)/o)<a&&(r=this.xmin,s=n+(a=l)*i)}return[r,s]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const o=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[o]&&t[o]===t[i]||t[n+1]===t[o+1]&&t[o+1]===t[i+1])&&(t.splice(o,2),n-=2)}t.length||(t=null)}return t}}const Ba=2*Math.PI,Lt=Math.pow;function Ea(e){return e[0]}function Ra(e){return e[1]}function Ia(e){const{triangles:t,coords:n}=e;for(let o=0;o<t.length;o+=3){const i=2*t[o],a=2*t[o+1],l=2*t[o+2];if((n[l]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[l+1]-n[i+1])>1e-10)return!1}return!0}function Pa(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class sn{static from(t,n=Ea,o=Ra,i){return new sn("length"in t?Na(t,n,o,i):Float64Array.from(Da(t,n,o,i)))}constructor(t){this._delaunator=new on(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Ia(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const s=this.collinear[0],d=this.collinear[this.collinear.length-1],m=[n[2*s],n[2*s+1],n[2*d],n[2*d+1]],c=1e-8*Math.hypot(m[3]-m[1],m[2]-m[0]);for(let f=0,h=n.length/2;f<h;++f){const v=Pa(n[2*f],n[2*f+1],c);n[2*f]=v[0],n[2*f+1]=v[1]}this._delaunator=new on(n)}else delete this.collinear;const o=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),r=this._hullIndex.fill(-1);for(let s=0,d=o.length;s<d;++s){const m=a[s%3===2?s-2:s+1];(o[s]===-1||l[m]===-1)&&(l[m]=s)}for(let s=0,d=i.length;s<d;++s)r[i[s]]=s;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],l[i[0]]=1,i.length===2&&(l[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new La(this,t)}*neighbors(t){const{inedges:n,hull:o,_hullIndex:i,halfedges:a,triangles:l,collinear:r}=this;if(r){const c=r.indexOf(t);c>0&&(yield r[c-1]),c<r.length-1&&(yield r[c+1]);return}const s=n[t];if(s===-1)return;let d=s,m=-1;do{if(yield m=l[d],d=d%3===2?d-2:d+1,l[d]!==t)return;if(d=a[d],d===-1){const c=o[(i[t]+1)%o.length];c!==m&&(yield c);return}}while(d!==s)}find(t,n,o=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=o;let a;for(;(a=this._step(o,t,n))>=0&&a!==o&&a!==i;)o=a;return a}_step(t,n,o){const{inedges:i,hull:a,_hullIndex:l,halfedges:r,triangles:s,points:d}=this;if(i[t]===-1||!d.length)return(t+1)%(d.length>>1);let m=t,c=Lt(n-d[t*2],2)+Lt(o-d[t*2+1],2);const f=i[t];let h=f;do{let v=s[h];const g=Lt(n-d[v*2],2)+Lt(o-d[v*2+1],2);if(g<c&&(c=g,m=v),h=h%3===2?h-2:h+1,s[h]!==t)break;if(h=r[h],h===-1){if(h=a[(l[t]+1)%a.length],h!==v&&Lt(n-d[h*2],2)+Lt(o-d[h*2+1],2)<c)return h;break}}while(h!==f);return m}render(t){const n=t==null?t=new _t:void 0,{points:o,halfedges:i,triangles:a}=this;for(let l=0,r=i.length;l<r;++l){const s=i[l];if(s<l)continue;const d=a[l]*2,m=a[s]*2;t.moveTo(o[d],o[d+1]),t.lineTo(o[m],o[m+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const o=t==null?t=new _t:void 0,{points:i}=this;for(let a=0,l=i.length;a<l;a+=2){const r=i[a],s=i[a+1];t.moveTo(r+n,s),t.arc(r,s,n,0,Ba)}return o&&o.value()}renderHull(t){const n=t==null?t=new _t:void 0,{hull:o,points:i}=this,a=o[0]*2,l=o.length;t.moveTo(i[a],i[a+1]);for(let r=1;r<l;++r){const s=2*o[r];t.lineTo(i[s],i[s+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new kn;return this.renderHull(t),t.value()}renderTriangle(t,n){const o=n==null?n=new _t:void 0,{points:i,triangles:a}=this,l=a[t*=3]*2,r=a[t+1]*2,s=a[t+2]*2;return n.moveTo(i[l],i[l+1]),n.lineTo(i[r],i[r+1]),n.lineTo(i[s],i[s+1]),n.closePath(),o&&o.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,o=t.length/3;n<o;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new kn;return this.renderTriangle(t,n),n.value()}}function Na(e,t,n,o){const i=e.length,a=new Float64Array(i*2);for(let l=0;l<i;++l){const r=e[l];a[l*2]=t.call(o,r,l,e),a[l*2+1]=n.call(o,r,l,e)}return a}function*Da(e,t,n,o){let i=0;for(const a of e)yield t.call(o,a,i,e),yield n.call(o,a,i,e),++i}function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},an.apply(null,arguments)}function ki(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var ut={xDomain:[0,1],yDomain:[0,1],layers:["links","cells","points","bounds"],enableLinks:!1,linkLineWidth:1,linkLineColor:"#bbbbbb",enableCells:!0,cellLineWidth:2,cellLineColor:"#000000",pointSize:4,pointColor:"#666666",role:"img"},jn=function(e){return[e.x,e.y]},Gt=Hi,wi="cursor",Ci="top",$a=function(e){var t=e.points,n=e.getNodePosition,o=n===void 0?jn:n,i=e.margin,a=i===void 0?Gt:i;return t.map(function(l){var r=o(l),s=r[0],d=r[1];return[s+a.left,d+a.top]})},Aa=function(e){var t=e.points,n=e.width,o=e.height,i=e.margin,a=i===void 0?Gt:i,l=e.debug,r=sn.from(t),s=l?r.voronoi([0,0,a.left+n+a.right,a.top+o+a.bottom]):void 0;return{points:t,delaunay:r,voronoi:s}},Mi=function(e){var t=e.points,n=e.getNodePosition,o=n===void 0?jn:n,i=e.width,a=e.height,l=e.margin,r=l===void 0?Gt:l,s=e.debug;return b.useMemo(function(){return Aa({points:$a({points:t,margin:r,getNodePosition:o}),width:i,height:a,margin:r,debug:s})},[o,t,i,a,r,s])},Oa=function(e){var t=e.data,n=e.width,o=e.height,i=e.xDomain,a=e.yDomain,l=b.useMemo(function(){return Pn().domain(i).range([0,n])},[i,n]),r=b.useMemo(function(){return Pn().domain(a).range([0,o])},[a,o]),s=b.useMemo(function(){return t.map(function(d){return{x:l(d.x),y:r(d.y),data:d}})},[t,l,r]);return b.useMemo(function(){var d=sn.from(s.map(function(c){return[c.x,c.y]})),m=d.voronoi([0,0,n,o]);return{points:s,delaunay:d,voronoi:m}},[s,n,o])},Fa=function(e){var t=e.points,n=e.delaunay,o=e.voronoi;return b.useMemo(function(){return{points:t,delaunay:n,voronoi:o}},[t,n,o])},za=function(e){var t=e.elementRef,n=e.nodes,o=e.getNodePosition,i=o===void 0?jn:o,a=e.delaunay,l=e.setCurrent,r=e.margin,s=r===void 0?Gt:r,d=e.detectionRadius,m=d===void 0?1/0:d,c=e.isInteractive,f=c===void 0||c,h=e.onMouseEnter,v=e.onMouseMove,g=e.onMouseLeave,p=e.onMouseDown,y=e.onMouseUp,C=e.onClick,T=e.onDoubleClick,M=e.onTouchStart,B=e.onTouchMove,k=e.onTouchEnd,R=e.enableTouchCrosshair,E=R!==void 0&&R,w=e.tooltip,W=e.tooltipPosition,S=W===void 0?wi:W,L=e.tooltipAnchor,I=L===void 0?Ci:L,D=b.useState(null),j=D[0],x=D[1],_=b.useRef(null);b.useEffect(function(){_.current=j},[_,j]);var P=b.useCallback(function(O){if(!t.current||n.length===0)return null;var N=Dt(t.current,O),se=N[0],ie=N[1],xe=a.find(se,ie),K=xe!==void 0?n[xe]:null;if(K&&m!==1/0){var Fe=i(K),ze=Fe[0],Ge=Fe[1];Vi(se,ie,ze+s.left,Ge+s.top)>m&&(xe=null,K=null)}return xe===null||K===null?null:[xe,K]},[t,a,n,i,s,m]),F=Tt(),X=F.showTooltipAt,ve=F.showTooltipFromEvent,ne=F.hideTooltip,ce=b.useMemo(function(){if(w)return S==="cursor"?function(O,N){ve(w(O),N,I)}:function(O){var N=i(O),se=N[0],ie=N[1];X(w(O),[se+s.left,ie+s.top],I)}},[X,ve,w,S,I,i,s]),le=b.useCallback(function(O){var N=P(O);if(x(N),l==null||l(N?N[1]:null),N){var se=N[1];ce==null||ce(se,O),h==null||h(N[1],O)}},[P,x,l,ce,h]),Me=b.useCallback(function(O){var N=P(O);if(x(N),N){var se=N[0],ie=N[1];if(l==null||l(ie),ce==null||ce(ie,O),_.current){var xe=_.current,K=xe[0],Fe=xe[1];se!==K?g==null||g(Fe,O):v==null||v(ie,O)}else h==null||h(ie,O)}else l==null||l(null),ne==null||ne(),_.current&&(g==null||g(_.current[1],O))},[P,x,l,_,h,v,g,ce,ne]),re=b.useCallback(function(O){x(null),l==null||l(null),ne(),g&&_.current&&g(_.current[1],O)},[x,l,_,ne,g]),Q=b.useCallback(function(O){var N=P(O);x(N),N&&(p==null||p(N[1],O))},[P,x,p]),U=b.useCallback(function(O){var N=P(O);x(N),N&&(y==null||y(N[1],O))},[P,x,y]),de=b.useCallback(function(O){var N=P(O);x(N),N&&(C==null||C(N[1],O))},[P,x,C]),ee=b.useCallback(function(O){var N=P(O);x(N),N&&(T==null||T(N[1],O))},[P,x,T]),we=b.useCallback(function(O){var N=P(O);E&&(x(N),l==null||l(N?N[1]:null)),N&&(M==null||M(N[1],O))},[P,x,l,E,M]),Ve=b.useCallback(function(O){var N=P(O);E&&(x(N),l==null||l(N?N[1]:null)),N&&(B==null||B(N[1],O))},[P,x,l,E,B]),Ae=b.useCallback(function(O){E&&(x(null),l==null||l(null)),k&&_.current&&k(_.current[1],O)},[E,x,l,k,_]);return{current:j,handleMouseEnter:f?le:void 0,handleMouseMove:f?Me:void 0,handleMouseLeave:f?re:void 0,handleMouseDown:f?Q:void 0,handleMouseUp:f?U:void 0,handleClick:f?de:void 0,handleDoubleClick:f?ee:void 0,handleTouchStart:f?we:void 0,handleTouchMove:f?Ve:void 0,handleTouchEnd:f?Ae:void 0}},Ha=["theme"],Va=function(e){var t=e.data,n=e.width,o=e.height,i=e.margin,a=e.layers,l=a===void 0?ut.layers:a,r=e.xDomain,s=r===void 0?ut.xDomain:r,d=e.yDomain,m=d===void 0?ut.yDomain:d,c=e.enableLinks,f=c===void 0?ut.enableLinks:c,h=e.linkLineWidth,v=h===void 0?ut.linkLineWidth:h,g=e.linkLineColor,p=g===void 0?ut.linkLineColor:g,y=e.enableCells,C=y===void 0?ut.enableCells:y,T=e.cellLineWidth,M=T===void 0?ut.cellLineWidth:T,B=e.cellLineColor,k=B===void 0?ut.cellLineColor:B,R=e.enablePoints,E=R===void 0?ut.enableCells:R,w=e.pointSize,W=w===void 0?ut.pointSize:w,S=e.pointColor,L=S===void 0?ut.pointColor:S,I=e.role,D=I===void 0?ut.role:I,j=e.forwardedRef,x=Ht(n,o,i),_=x.outerWidth,P=x.outerHeight,F=x.margin,X=x.innerWidth,ve=x.innerHeight,ne=Oa({data:t,width:X,height:ve,xDomain:s,yDomain:m}),ce=ne.points,le=ne.delaunay,Me=ne.voronoi,re={links:null,cells:null,points:null,bounds:null};f&&l.includes("links")&&(re.links=u.jsx("path",{stroke:p,strokeWidth:v,fill:"none",d:le.render()},"links")),C&&l.includes("cells")&&(re.cells=u.jsx("path",{d:Me.render(),fill:"none",stroke:k,strokeWidth:M},"cells")),E&&l.includes("points")&&(re.points=u.jsx("path",{stroke:"none",fill:L,d:le.renderPoints(void 0,W/2)},"points")),l.includes("bounds")&&(re.bounds=u.jsx("path",{fill:"none",stroke:k,strokeWidth:M,d:Me.renderBounds()},"bounds"));var Q=Fa({points:ce,delaunay:le,voronoi:Me});return u.jsx(Cn,{width:_,height:P,margin:F,role:D,ref:j,children:l.map(function(U,de){return re[U]!==void 0?re[U]:typeof U=="function"?u.jsx(b.Fragment,{children:b.createElement(U,Q)},de):null})})},Ga=b.forwardRef(function(e,t){var n=e.theme,o=ki(e,Ha);return u.jsx(zt,{isInteractive:!1,animate:!1,theme:n,children:u.jsx(Va,an({},o,{forwardedRef:t}))})}),Ya=["defaultWidth","defaultHeight","onResize","debounceResize"];b.forwardRef(function(e,t){var n=e.defaultWidth,o=e.defaultHeight,i=e.onResize,a=e.debounceResize,l=ki(e,Ya);return u.jsx(Ft,{defaultWidth:n,defaultHeight:o,onResize:i,debounceResize:a,children:function(r){var s=r.width,d=r.height;return u.jsx(Ga,an({},l,{width:s,height:d,ref:t}))}})});var Xa=function(e){var t=e.nodes,n=e.width,o=e.height,i=e.margin,a=i===void 0?Gt:i,l=e.getNodePosition,r=e.setCurrent,s=e.onMouseEnter,d=e.onMouseMove,m=e.onMouseLeave,c=e.onMouseDown,f=e.onMouseUp,h=e.onClick,v=e.onDoubleClick,g=e.onTouchStart,p=e.onTouchMove,y=e.onTouchEnd,C=e.enableTouchCrosshair,T=C!==void 0&&C,M=e.detectionRadius,B=M===void 0?1/0:M,k=e.tooltip,R=e.tooltipPosition,E=R===void 0?wi:R,w=e.tooltipAnchor,W=w===void 0?Ci:w,S=e.debug,L=b.useRef(null),I=Mi({points:t,getNodePosition:l,width:n,height:o,margin:a,debug:S}),D=I.delaunay,j=I.voronoi,x=za({elementRef:L,nodes:t,delaunay:D,margin:a,detectionRadius:B,setCurrent:r,onMouseEnter:s,onMouseMove:d,onMouseLeave:m,onMouseDown:c,onMouseUp:f,onClick:h,onDoubleClick:v,onTouchStart:g,onTouchMove:p,onTouchEnd:y,enableTouchCrosshair:T,tooltip:k,tooltipPosition:E,tooltipAnchor:W}),_=x.current,P=x.handleMouseEnter,F=x.handleMouseMove,X=x.handleMouseLeave,ve=x.handleMouseDown,ne=x.handleMouseUp,ce=x.handleClick,le=x.handleDoubleClick,Me=x.handleTouchStart,re=x.handleTouchMove,Q=x.handleTouchEnd,U=b.useMemo(function(){if(S&&j)return j.render()},[S,j]);return u.jsxs("g",{ref:L,transform:"translate("+-a.left+","+-a.top+")",children:[S&&j&&u.jsxs(u.Fragment,{children:[u.jsx("path",{d:U,stroke:"red",strokeWidth:1,opacity:.75}),B<1/0&&u.jsx("path",{stroke:"red",strokeWidth:.35,fill:"none",d:D.renderPoints(void 0,B)}),_&&u.jsx("path",{fill:"pink",opacity:.35,d:j.renderCell(_[0])})]}),u.jsx("rect",{"data-ref":"mesh-interceptor",width:a.left+n+a.right,height:a.top+o+a.bottom,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:P,onMouseMove:F,onMouseLeave:X,onMouseDown:ve,onMouseUp:ne,onTouchStart:Me,onTouchMove:re,onTouchEnd:Q,onClick:ce,onDoubleClick:le})]})},Ua=function(e,t){e.save(),e.globalAlpha=.75,e.beginPath(),t.render(e),e.strokeStyle="red",e.lineWidth=1,e.stroke(),e.restore()},qa=function(e,t,n){e.save(),e.globalAlpha=.35,e.beginPath(),t.renderCell(n,e),e.fillStyle="pink",e.fill(),e.restore()};function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Je.apply(null,arguments)}function dn(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var Xn,kt={xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},curve:"linear",colors:{scheme:"nivo"},lineWidth:2,layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],enablePoints:!0,pointSize:6,pointColor:{from:"series.color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,enableGridX:!0,enableGridY:!0,legends:[],isInteractive:!0,tooltip:b.memo(function(e){var t=e.point;return u.jsx(ii,{id:u.jsxs("span",{children:["x: ",u.jsx("strong",{children:t.data.xFormatted}),", y:"," ",u.jsx("strong",{children:t.data.yFormatted})]}),enableChip:!0,color:t.seriesColor})}),sliceTooltip:b.memo(function(e){var t=e.slice,n=e.axis,o=mt(),i=n==="x"?"y":"x";return u.jsx(Gi,{rows:t.points.map(function(a){return[u.jsx(Yi,{color:a.seriesColor,style:o.tooltip.chip},"chip"),a.seriesId,u.jsx("span",{style:o.tooltip.tableCellValue,children:a.data[i+"Formatted"]},"value")]})})}),debugMesh:!1,renderWrapper:!0},G=Je({},kt,{defs:[],fill:[],enablePointLabel:!1,pointLabel:"data.yFormatted",areaBlendMode:"normal",axisTop:null,axisRight:null,axisBottom:nn,axisLeft:nn,useMesh:!1,enableSlices:!1,debugSlices:!1,enableCrosshair:!0,crosshairType:"bottom-left",enableTouchCrosshair:!1,initialHiddenIds:[],animate:!0,motionConfig:"gentle",role:"img",isFocusable:!1}),Se=Je({},kt,{pixelRatio:typeof window<"u"&&(Xn=window.devicePixelRatio)!=null?Xn:1,axisTop:null,axisRight:null,axisBottom:nn,axisLeft:nn});function Ka(e){return b.useMemo(function(){return io().defined(function(t){return t.x!==null&&t.y!==null}).x(function(t){return t.x}).y(function(t){return t.y}).curve(ci(e))},[e])}function Ja(e){var t=e.curve,n=e.yScale,o=e.areaBaselineValue;return b.useMemo(function(){return no().defined(function(i){return i.x!==null&&i.y!==null}).x(function(i){return i.x}).y1(function(i){return i.y}).curve(ci(t)).y0(n(o))},[t,n,o])}var Za=function(e){var t=e.componentId,n=e.enableSlices,o=e.points,i=e.width,a=e.height;return b.useMemo(function(){if(n==="x"){var l=new Map;return o.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(l.has(s.x)?l.get(s.x).push(s):l.set(s.x,[s]))}),Array.from(l.entries()).sort(function(s,d){return s[0]-d[0]}).map(function(s,d,m){var c,f,h=s[0],v=s[1],g=m[d-1],p=m[d+1];return c=g?h-(h-g[0])/2:h,f=p?h-c+(p[0]-h)/2:i-c,{id:"slice:"+t+":"+h,x0:c,x:h,y0:0,y:0,width:f,height:a,points:v.reverse()}})}if(n==="y"){var r=new Map;return o.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(r.has(s.y)?r.get(s.y).push(s):r.set(s.y,[s]))}),Array.from(r.entries()).sort(function(s,d){return s[0]-d[0]}).map(function(s,d,m){var c,f,h=s[0],v=s[1],g=m[d-1],p=m[d+1];return c=g?h-(h-g[0])/2:h,f=p?h-c+(p[0]-h)/2:a-c,{id:h,x0:0,x:0,y0:c,y:h,width:i,height:f,points:v.reverse()}})}return[]},[t,n,a,o,i])},Qa="line",Si=function(e){var t=e.data,n=e.xScale,o=n===void 0?kt.xScale:n,i=e.xFormat,a=e.yScale,l=a===void 0?kt.yScale:a,r=e.yFormat,s=e.width,d=e.height,m=e.colors,c=m===void 0?kt.colors:m,f=e.curve,h=f===void 0?kt.curve:f,v=e.areaBaselineValue,g=v===void 0?kt.areaBaselineValue:v,p=e.pointColor,y=p===void 0?kt.pointColor:p,C=e.pointBorderColor,T=C===void 0?kt.pointBorderColor:C,M=e.enableSlices,B=M===void 0?G.enableSlices:M,k=e.initialHiddenIds,R=k===void 0?G.initialHiddenIds:k,E=b.useState(va(Qa))[0],w=Qt(i),W=Qt(r),S=oi(c,"id"),L=mt(),I=en(y,L),D=en(T,L),j=b.useState(R??[]),x=j[0],_=j[1],P=b.useMemo(function(){return Xi(t.filter(function(U){return x.indexOf(U.id)===-1}),o,l,s,d)},[t,x,o,l,s,d]),F=P.xScale,X=P.yScale,ve=P.series,ne=b.useMemo(function(){var U=t.map(function(ee){return{id:ee.id,label:""+ee.id,color:S(ee)}}),de=U.map(function(ee){return Je({},ve.find(function(we){return we.id===ee.id}),{color:ee.color})}).filter(function(ee){return!!ee.id});return{legendData:U.map(function(ee){return Je({},ee,{hidden:!de.find(function(we){return we.id===ee.id})})}).reverse(),series:de}},[t,ve,S]),ce=ne.legendData,le=ne.series,Me=b.useCallback(function(U){_(function(de){return de.indexOf(U)>-1?de.filter(function(ee){return ee!==U}):[].concat(de,[U])})},[]),re=function(U){var de=U.series,ee=U.getPointColor,we=U.getPointBorderColor,Ve=U.formatX,Ae=U.formatY;return b.useMemo(function(){return de.reduce(function(O,N,se){return[].concat(O,N.data.filter(function(ie){return ie.position.x!==null&&ie.position.y!==null}).map(function(ie,xe){var K={id:N.id+"."+xe,indexInSeries:xe,absIndex:O.length+xe,seriesIndex:se,seriesId:N.id,seriesColor:N.color,x:ie.position.x,y:ie.position.y,data:Je({},ie.data,{xFormatted:Ve(ie.data.x),yFormatted:Ae(ie.data.y)})};return K.color=ee({series:N,point:K}),K.borderColor=we(K),K}))},[])},[de,ee,we,Ve,Ae])}({series:le,getPointColor:I,getPointBorderColor:D,formatX:w,formatY:W}),Q=Za({componentId:E,enableSlices:B,points:re,width:s,height:d});return{legendData:ce,toggleSeries:Me,lineGenerator:Ka(h),areaGenerator:Ja({curve:h,yScale:X,areaBaselineValue:g}),getColor:S,series:le,xScale:F,yScale:X,slices:Q,points:re}},el=function(e){var t=e.areaBlendMode,n=e.areaOpacity,o=e.color,i=e.fill,a=e.path,l=Et(),r=l.animate,s=l.config,d=wn(a),m=Ot({color:o,config:s,immediate:!r});return u.jsx(lt.path,{d,fill:i||m.color,fillOpacity:n,strokeWidth:0,style:{mixBlendMode:t}})},tl=b.memo(function(e){var t=e.areaGenerator,n=e.areaOpacity,o=e.areaBlendMode,i=e.series.slice(0).reverse();return u.jsx("g",{children:i.map(function(a){return u.jsx(el,Je({path:t(a.data.map(function(l){return l.position}))},Je({areaOpacity:n,areaBlendMode:o},a)),""+a.id)})})}),nl=b.memo(function(e){var t=e.lineGenerator,n=e.points,o=e.color,i=e.thickness,a=b.useMemo(function(){return t(n)},[t,n]),l=wn(a);return u.jsx(lt.path,{d:l,fill:"none",strokeWidth:i,stroke:o})}),il=b.memo(function(e){var t=e.series,n=e.lineGenerator,o=e.lineWidth;return u.jsx(u.Fragment,{children:t.slice(0).reverse().map(function(i){var a=i.id,l=i.data,r=i.color;return u.jsx(nl,{points:l.map(function(s){return s.position}),lineGenerator:n,color:r,thickness:o},a)})})}),ol=b.memo(function(e){var t=e.slice,n=e.slices,o=e.axis,i=e.debug,a=e.tooltip,l=e.isCurrent,r=e.setCurrent,s=e.onMouseEnter,d=e.onMouseMove,m=e.onMouseLeave,c=e.onMouseDown,f=e.onMouseUp,h=e.onClick,v=e.onDoubleClick,g=e.onTouchStart,p=e.onTouchMove,y=e.onTouchEnd,C=Tt(),T=C.showTooltipFromEvent,M=C.hideTooltip,B=b.useCallback(function(j){T(b.createElement(a,{slice:t,axis:o}),j,"right"),r(t),s==null||s(t,j)},[T,a,t,o,r,s]),k=b.useCallback(function(j){T(b.createElement(a,{slice:t,axis:o}),j,"right"),d==null||d(t,j)},[T,a,t,o,d]),R=b.useCallback(function(j){M(),r(null),m==null||m(t,j)},[M,r,m,t]),E=b.useCallback(function(j){c==null||c(t,j)},[t,c]),w=b.useCallback(function(j){f==null||f(t,j)},[t,f]),W=b.useCallback(function(j){h==null||h(t,j)},[t,h]),S=b.useCallback(function(j){v==null||v(t,j)},[t,v]),L=b.useCallback(function(j){T(b.createElement(a,{slice:t,axis:o}),j,"right"),r(t),g==null||g(t,j)},[o,g,r,T,t,a]),I=b.useCallback(function(j){var x=j.touches[0],_=document.elementFromPoint(x.clientX,x.clientY),P=_==null?void 0:_.getAttribute("data-ref");if(P){var F=n.find(function(X){return X.id===P});F&&(T(b.createElement(a,{slice:F,axis:o}),j,"right"),r(F))}p==null||p(t,j)},[o,p,r,T,t,n,a]),D=b.useCallback(function(j){M(),r(null),y==null||y(t,j)},[M,r,y,t]);return u.jsx("rect",{x:t.x0,y:t.y0,width:t.width,height:t.height,stroke:"red",strokeWidth:i?1:0,strokeOpacity:.75,fill:"red",fillOpacity:l&&i?.35:0,onMouseEnter:B,onMouseMove:k,onMouseLeave:R,onMouseDown:E,onMouseUp:w,onClick:W,onDoubleClick:S,onTouchStart:L,onTouchMove:I,onTouchEnd:D,"data-ref":t.id})}),al=b.memo(function(e){var t=e.slices,n=e.axis,o=e.debug,i=e.tooltip,a=e.current,l=e.setCurrent,r=e.onMouseEnter,s=e.onMouseMove,d=e.onMouseLeave,m=e.onMouseDown,c=e.onMouseUp,f=e.onClick,h=e.onDoubleClick,v=e.onTouchStart,g=e.onTouchMove,p=e.onTouchEnd;return u.jsx(u.Fragment,{children:t.map(function(y){return u.jsx(ol,{slice:y,slices:t,axis:n,debug:o,tooltip:i,setCurrent:l,isCurrent:a!==null&&a.id===y.id,onMouseEnter:r,onMouseMove:s,onMouseLeave:d,onMouseDown:m,onMouseUp:c,onClick:f,onDoubleClick:h,onTouchStart:v,onTouchMove:g,onTouchEnd:p},y.id)})})}),ll=b.memo(function(e){var t=e.points,n=e.symbol,o=e.size,i=e.borderWidth,a=e.enableLabel,l=e.label,r=e.labelYOffset,s=e.isFocusable,d=e.setCurrentPoint,m=e.tooltip,c=e.margin,f=e.ariaLabel,h=e.ariaLabelledBy,v=e.ariaDescribedBy,g=e.ariaHidden,p=e.ariaDisabled,y=Ui(l),C=Tt(),T=C.showTooltipAt,M=C.hideTooltip,B=t.slice(0).sort(function(k,R){return k.indexInSeries-R.indexInSeries}).sort(function(k,R){return R.seriesIndex-k.seriesIndex}).map(function(k){return{id:k.id,x:k.x,y:k.y,datum:k.data,fill:k.color,stroke:k.borderColor,label:a?y(k):null,ariaLabel:f?f(k):void 0,ariaLabelledBy:h?h(k):void 0,ariaDescribedBy:v?v(k):void 0,ariaHidden:g?g(k):void 0,ariaDisabled:p?p(k):void 0,onFocus:s?function(){d(k),T(b.createElement(m,{point:k}),[c.left+k.x,c.top+k.y],"top")}:void 0,onBlur:s?function(){d(null),M()}:void 0}});return u.jsx("g",{children:B.map(function(k){return u.jsx(qi,{x:k.x,y:k.y,datum:k.datum,symbol:n,size:o,color:k.fill,borderWidth:i,borderColor:k.stroke,label:k.label,labelYOffset:r,ariaLabel:k.ariaLabel,ariaLabelledBy:k.ariaLabelledBy,ariaDescribedBy:k.ariaDescribedBy,ariaHidden:k.ariaHidden,ariaDisabled:k.ariaDisabled,isFocusable:s,onFocus:k.onFocus,onBlur:k.onBlur,testId:"line.point."+k.id},k.id)})})}),rl=b.memo(function(e){var t=e.points,n=e.width,o=e.height,i=e.margin,a=e.setCurrent,l=e.onMouseEnter,r=e.onMouseMove,s=e.onMouseLeave,d=e.onMouseDown,m=e.onMouseUp,c=e.onClick,f=e.onDoubleClick,h=e.onTouchStart,v=e.onTouchMove,g=e.onTouchEnd,p=e.tooltip,y=e.debug,C=e.enableTouchCrosshair,T=Tt(),M=T.showTooltipAt,B=T.hideTooltip,k=b.useCallback(function(x,_){M(b.createElement(p,{point:x}),[x.x+i.left,x.y+i.top],"top"),l==null||l(x,_)},[M,p,l,i]),R=b.useCallback(function(x,_){M(b.createElement(p,{point:x}),[x.x+i.left,x.y+i.top],"top"),r==null||r(x,_)},[M,p,i.left,i.top,r]),E=b.useCallback(function(x,_){B(),s==null||s(x,_)},[B,s]),w=b.useCallback(function(x,_){d==null||d(x,_)},[d]),W=b.useCallback(function(x,_){m==null||m(x,_)},[m]),S=b.useCallback(function(x,_){c==null||c(x,_)},[c]),L=b.useCallback(function(x,_){f==null||f(x,_)},[f]),I=b.useCallback(function(x,_){M(b.createElement(p,{point:x}),[x.x+i.left,x.y+i.top],"top"),h==null||h(x,_)},[i.left,i.top,h,M,p]),D=b.useCallback(function(x,_){M(b.createElement(p,{point:x}),[x.x+i.left,x.y+i.top],"top"),v==null||v(x,_)},[i.left,i.top,v,M,p]),j=b.useCallback(function(x,_){B(),g==null||g(x,_)},[g,B]);return u.jsx(Xa,{nodes:t,width:n,height:o,setCurrent:a,onMouseEnter:k,onMouseMove:R,onMouseLeave:E,onMouseDown:w,onMouseUp:W,onClick:S,onDoubleClick:L,onTouchStart:I,onTouchMove:D,onTouchEnd:j,enableTouchCrosshair:C,debug:y})}),sl=["isInteractive","animate","motionConfig","theme","renderWrapper"];function dl(e){var t=e.data,n=e.xScale,o=n===void 0?G.xScale:n,i=e.xFormat,a=e.yScale,l=a===void 0?G.yScale:a,r=e.yFormat,s=e.curve,d=s===void 0?G.curve:s,m=e.margin,c=e.width,f=e.height,h=e.colors,v=h===void 0?G.colors:h,g=e.lineWidth,p=g===void 0?G.lineWidth:g,y=e.layers,C=y===void 0?G.layers:y,T=e.enableArea,M=T===void 0?G.enableArea:T,B=e.areaBaselineValue,k=B===void 0?G.areaBaselineValue:B,R=e.areaOpacity,E=R===void 0?G.areaOpacity:R,w=e.areaBlendMode,W=w===void 0?G.areaBlendMode:w,S=e.enablePoints,L=S===void 0?G.enablePoints:S,I=e.pointSymbol,D=e.pointSize,j=D===void 0?G.pointSize:D,x=e.pointColor,_=x===void 0?G.pointColor:x,P=e.pointBorderWidth,F=P===void 0?G.pointBorderWidth:P,X=e.pointBorderColor,ve=X===void 0?G.pointBorderColor:X,ne=e.enablePointLabel,ce=ne===void 0?G.enablePointLabel:ne,le=e.pointLabel,Me=le===void 0?G.pointLabel:le,re=e.pointLabelYOffset,Q=e.enableGridX,U=Q===void 0?G.enableGridX:Q,de=e.gridXValues,ee=e.enableGridY,we=ee===void 0?G.enableGridY:ee,Ve=e.gridYValues,Ae=e.axisTop,O=e.axisRight,N=e.axisBottom,se=N===void 0?G.axisBottom:N,ie=e.axisLeft,xe=ie===void 0?G.axisLeft:ie,K=e.defs,Fe=K===void 0?G.defs:K,ze=e.fill,Ge=ze===void 0?G.fill:ze,Ye=e.markers,He=e.legends,Ie=He===void 0?G.legends:He,it=e.isInteractive,Le=it===void 0?G.isInteractive:it,Pe=e.useMesh,Ze=Pe===void 0?G.useMesh:Pe,je=e.debugMesh,Be=je===void 0?G.debugMesh:je,_e=e.onMouseEnter,ot=e.onMouseMove,z=e.onMouseLeave,V=e.onMouseDown,pe=e.onMouseUp,q=e.onClick,he=e.onDoubleClick,ye=e.onTouchStart,Ne=e.onTouchMove,Te=e.onTouchEnd,oe=e.tooltip,fe=oe===void 0?G.tooltip:oe,Xe=e.enableSlices,ke=Xe===void 0?G.enableSlices:Xe,Ue=e.debugSlices,rt=Ue===void 0?G.debugSlices:Ue,Ce=e.sliceTooltip,ue=Ce===void 0?G.sliceTooltip:Ce,J=e.enableCrosshair,me=J===void 0?G.enableCrosshair:J,Ee=e.crosshairType,Re=Ee===void 0?G.crosshairType:Ee,st=e.enableTouchCrosshair,Ct=st===void 0?G.enableTouchCrosshair:st,gt=e.role,Qe=gt===void 0?G.role:gt,dt=e.ariaLabel,De=e.ariaLabelledBy,$=e.ariaDescribedBy,Z=e.isFocusable,qe=Z===void 0?G.isFocusable:Z,et=e.pointAriaLabel,ct=e.pointAriaLabelledBy,Y=e.pointAriaDescribedBy,H=e.pointAriaHidden,te=e.pointAriaDisabled,at=e.initialHiddenIds,We=at===void 0?G.initialHiddenIds:at,yt=e.forwardedRef,bt=Ht(c,f,m),Rt=bt.margin,tt=bt.innerWidth,vt=bt.innerHeight,Yt=bt.outerWidth,un=bt.outerHeight,Oe=Si({data:t,xScale:o,xFormat:i,yScale:l,yFormat:r,width:tt,height:vt,colors:v,curve:d,areaBaselineValue:k,pointColor:_,pointBorderColor:ve,enableSlices:ke,initialHiddenIds:We}),cn=Oe.legendData,A=Oe.toggleSeries,Mt=Oe.lineGenerator,It=Oe.areaGenerator,Xt=Oe.series,Ut=Oe.xScale,qt=Oe.yScale,_n=Oe.slices,hn=Oe.points,Tn=b.useState(null),Kt=Tn[0],fn=Tn[1],Wn=b.useState(null),Pt=Wn[0],Ln=Wn[1],ht={grid:null,markers:null,axes:null,areas:null,crosshair:null,lines:null,points:null,slices:null,mesh:null,legends:null};C.includes("grid")&&(U||we)&&(ht.grid=u.jsx(ti,{width:tt,height:vt,xScale:U?Ut:null,yScale:we?qt:null,xValues:de,yValues:Ve},"grid")),C.includes("markers")&&Array.isArray(Ye)&&Ye.length>0&&(ht.markers=u.jsx(ni,{markers:Ye,width:tt,height:vt,xScale:Ut,yScale:qt},"markers")),C.includes("axes")&&(ht.axes=u.jsx(ei,{xScale:Ut,yScale:qt,width:tt,height:vt,top:Ae,right:O,bottom:se,left:xe},"axes")),C.includes("lines")&&(ht.lines=u.jsx(il,{series:Xt,lineGenerator:Mt,lineWidth:p},"lines")),C.includes("legends")&&Ie.length>0&&(ht.legends=u.jsx(b.Fragment,{children:Ie.map(function(jt,mn){return u.jsx(ai,Je({},jt,{containerWidth:tt,containerHeight:vt,data:jt.data||cn,toggleSerie:jt.toggleSerie?A:void 0}),mn)})},"legends"));var ji=Qn(Fe,Xt,Ge);M&&(ht.areas=u.jsx(tl,{areaGenerator:It,areaOpacity:E,areaBlendMode:W,series:Xt},"areas")),Le&&ke!==!1&&(ht.slices=u.jsx(al,{slices:_n,axis:ke,debug:rt,tooltip:ue,current:Pt,setCurrent:Ln,onMouseEnter:_e,onMouseMove:ot,onMouseLeave:z,onMouseDown:V,onMouseUp:pe,onClick:q,onDoubleClick:he,onTouchStart:ye,onTouchMove:Ne,onTouchEnd:Te},"slices")),L&&(ht.points=u.jsx(ll,{points:hn,symbol:I,size:j,borderWidth:F,enableLabel:ce,label:Me,labelYOffset:re,isFocusable:qe,setCurrentPoint:fn,tooltip:fe,margin:Rt,ariaLabel:et,ariaLabelledBy:ct,ariaDescribedBy:Y,ariaHidden:H,ariaDisabled:te},"points")),Le&&me&&(Kt!==null&&(ht.crosshair=u.jsx(Rn,{width:tt,height:vt,x:Kt.x,y:Kt.y,type:Re},"crosshair")),Pt!==null&&ke&&(ht.crosshair=u.jsx(Rn,{width:tt,height:vt,x:Pt.x,y:Pt.y,type:ke},"crosshair"))),Le&&Ze&&ke===!1&&(ht.mesh=u.jsx(rl,{points:hn,width:tt,height:vt,margin:Rt,setCurrent:fn,onMouseEnter:_e,onMouseMove:ot,onMouseLeave:z,onMouseDown:V,onMouseUp:pe,onClick:q,onDoubleClick:he,onTouchStart:ye,onTouchMove:Ne,onTouchEnd:Te,tooltip:fe,enableTouchCrosshair:Ct,debug:Be},"mesh"));var _i=Je({},e,{innerWidth:tt,innerHeight:vt,series:Xt,slices:_n,points:hn,xScale:Ut,yScale:qt,lineGenerator:Mt,areaGenerator:It,currentPoint:Kt,setCurrentPoint:fn,currentSlice:Pt,setCurrentSlice:Ln});return u.jsx(Cn,{defs:ji,width:Yt,height:un,margin:Rt,role:Qe,ariaLabel:dt,ariaLabelledBy:De,ariaDescribedBy:$,isFocusable:qe,ref:yt,children:C.map(function(jt,mn){return typeof jt=="function"?u.jsx(b.Fragment,{children:jt(_i)},mn):ht[jt]})})}var ul=b.forwardRef(function(e,t){var n=e.isInteractive,o=n===void 0?G.isInteractive:n,i=e.animate,a=i===void 0?G.animate:i,l=e.motionConfig,r=l===void 0?G.motionConfig:l,s=e.theme,d=e.renderWrapper,m=dn(e,sl);return u.jsx(zt,{animate:a,isInteractive:o,motionConfig:r,renderWrapper:d,theme:s,children:u.jsx(dl,Je({isInteractive:o},m,{forwardedRef:t}))})}),cl=["defaultWidth","defaultHeight","onResize","debounceResize"],hl=b.forwardRef(function(e,t){var n=e.defaultWidth,o=e.defaultHeight,i=e.onResize,a=e.debounceResize,l=dn(e,cl);return u.jsx(Ft,{defaultWidth:n,defaultHeight:o,onResize:i,debounceResize:a,children:function(r){var s=r.width,d=r.height;return u.jsx(ul,Je({width:s,height:d},l,{ref:t}))}})}),fl=["isInteractive","renderWrapper","theme"],ml=function(e){var t=e.width,n=e.height,o=e.margin,i=e.pixelRatio,a=i===void 0?Se.pixelRatio:i,l=e.data,r=e.xScale,s=r===void 0?Se.xScale:r,d=e.xFormat,m=e.yScale,c=m===void 0?Se.yScale:m,f=e.yFormat,h=e.curve,v=h===void 0?Se.curve:h,g=e.layers,p=g===void 0?Se.layers:g,y=e.colors,C=y===void 0?Se.colors:y,T=e.lineWidth,M=T===void 0?Se.lineWidth:T,B=e.enableArea,k=B===void 0?Se.enableArea:B,R=e.areaBaselineValue,E=R===void 0?Se.areaBaselineValue:R,w=e.areaOpacity,W=w===void 0?Se.areaOpacity:w,S=e.enablePoints,L=S===void 0?Se.enablePoints:S,I=e.pointSize,D=I===void 0?Se.pointSize:I,j=e.pointColor,x=j===void 0?Se.pointColor:j,_=e.pointBorderWidth,P=_===void 0?Se.pointBorderWidth:_,F=e.pointBorderColor,X=F===void 0?Se.pointBorderColor:F,ve=e.enableGridX,ne=ve===void 0?Se.enableGridX:ve,ce=e.gridXValues,le=e.enableGridY,Me=le===void 0?Se.enableGridY:le,re=e.gridYValues,Q=e.axisTop,U=e.axisRight,de=e.axisBottom,ee=de===void 0?Se.axisBottom:de,we=e.axisLeft,Ve=we===void 0?Se.axisLeft:we,Ae=e.legends,O=Ae===void 0?Se.legends:Ae,N=e.isInteractive,se=N===void 0?Se.isInteractive:N,ie=e.debugMesh,xe=ie===void 0?Se.debugMesh:ie,K=e.onMouseLeave,Fe=e.onMouseDown,ze=e.onMouseUp,Ge=e.onClick,Ye=e.onDoubleClick,He=e.tooltip,Ie=He===void 0?Se.tooltip:He,it=e.role,Le=e.forwardedRef,Pe=b.useRef(null),Ze=Ht(t,n,o),je=Ze.margin,Be=Ze.innerWidth,_e=Ze.innerHeight,ot=Ze.outerWidth,z=Ze.outerHeight,V=mt(),pe=b.useState(null),q=pe[0],he=pe[1],ye=Si({data:l,xScale:s,xFormat:d,yScale:c,yFormat:f,width:Be,height:_e,colors:C,curve:v,areaBaselineValue:E,pointColor:x,pointBorderColor:X}),Ne=ye.lineGenerator,Te=ye.areaGenerator,oe=ye.series,fe=ye.xScale,Xe=ye.yScale,ke=ye.points,Ue=b.useMemo(function(){return{innerWidth:Be,innerHeight:_e,series:oe,points:ke,xScale:fe,yScale:Xe,lineWidth:M,lineGenerator:Ne,areaGenerator:Te,currentPoint:q,setCurrentPoint:he}},[Be,_e,oe,ke,fe,Xe,M,Ne,Te,q,he]),rt=Mi({points:ke,width:Be,height:_e,debug:xe}),Ce=rt.delaunay,ue=rt.voronoi;b.useEffect(function(){if(Pe.current!==null){Pe.current.width=ot*a,Pe.current.height=z*a;var $=Pe.current.getContext("2d");$.scale(a,a),$.fillStyle=V.background,$.fillRect(0,0,ot,z),$.translate(je.left,je.top),p.forEach(function(Z){var qe;typeof Z=="function"&&Z($,Ue);var et=(qe=V.grid.line.strokeWidth)!=null?qe:0;if(Z==="grid"&&typeof et!="string"&&et>0&&($.lineWidth=et,$.strokeStyle=V.grid.line.stroke,ne&&tn($,{width:Be,height:_e,scale:fe,axis:"x",values:ce}),Me&&tn($,{width:Be,height:_e,scale:Xe,axis:"y",values:re})),Z==="axes"&&ri($,{xScale:fe,yScale:Xe,width:Be,height:_e,top:Q,right:U,bottom:ee,left:Ve,theme:V}),Z==="areas"&&k===!0){$.save(),$.globalAlpha=W,Te.context($);for(var ct=oe.length-1;ct>=0;ct--)$.fillStyle=oe[ct].color,$.beginPath(),Te(oe[ct].data.map(function(H){return H.position})),$.fill();$.restore()}if(Z==="lines"&&(Ne.context($),oe.forEach(function(H){$.strokeStyle=H.color,$.lineWidth=M,$.beginPath(),Ne(H.data.map(function(te){return te.position})),$.stroke()})),Z==="points"&&L===!0&&D>0&&ke.forEach(function(H){$.fillStyle=H.color,$.beginPath(),$.arc(H.x,H.y,D/2,0,2*Math.PI),$.fill(),P>0&&($.strokeStyle=H.borderColor,$.lineWidth=P,$.stroke())}),Z==="mesh"&&xe===!0&&ue!==void 0&&(Ua($,ue),q&&qa($,ue,q.absIndex)),Z==="legends"){var Y=oe.map(function(H){return{id:H.id,label:H.id,color:H.color}}).reverse();O.forEach(function(H){si($,Je({},H,{data:H.data||Y,containerWidth:Be,containerHeight:_e,theme:V}))})}})}},[Pe,Be,ot,_e,z,je.left,je.top,a,p,V,Ne,oe,fe,Xe,ne,ce,Me,re,Q,U,ee,Ve,O,ke,L,D,P,q,Ue,xe,k,Te,W,M,ue]);var J=b.useCallback(function($){if(!Pe.current)return null;var Z=Dt(Pe.current,$),qe=Z[0],et=Z[1];if(!ui(je.left,je.top,Be,_e,qe,et))return null;var ct=Ce.find(qe-je.left,et-je.top);return ke[ct]},[Pe,je,Be,_e,Ce,ke]),me=Tt(),Ee=me.showTooltipFromEvent,Re=me.hideTooltip,st=b.useCallback(function($){var Z=J($);he(Z),Z?Ee(b.createElement(Ie,{point:Z}),$):Re()},[J,he,Ee,Re,Ie]),Ct=b.useCallback(function($){Re(),he(null),q&&(K==null||K(q,$))},[Re,he,K,q]),gt=b.useCallback(function($){if(Fe){var Z=J($);Z&&Fe(Z,$)}},[J,Fe]),Qe=b.useCallback(function($){if(ze){var Z=J($);Z&&ze(Z,$)}},[J,ze]),dt=b.useCallback(function($){if(Ge){var Z=J($);Z&&Ge(Z,$)}},[J,Ge]),De=b.useCallback(function($){if(Ye){var Z=J($);Z&&Ye(Z,$)}},[J,Ye]);return u.jsx("canvas",{ref:di(Pe,Le),width:ot*a,height:z*a,style:{width:ot,height:z,cursor:se?"auto":"normal"},onMouseEnter:se?st:void 0,onMouseMove:se?st:void 0,onMouseLeave:se?Ct:void 0,onMouseDown:se?gt:void 0,onMouseUp:se?Qe:void 0,onClick:se?dt:void 0,onDoubleClick:se?De:void 0,role:it})},gl=b.forwardRef(function(e,t){var n=e.isInteractive,o=e.renderWrapper,i=e.theme,a=dn(e,fl);return u.jsx(zt,{isInteractive:n,renderWrapper:o,theme:i,animate:!1,children:u.jsx(ml,Je({},a,{forwardedRef:t}))})}),bl=["defaultWidth","defaultHeight","onResize","debounceResize"];b.forwardRef(function(e,t){var n=e.defaultWidth;e.defaultHeight;var o=e.onResize,i=e.debounceResize,a=dn(e,bl);return u.jsx(Ft,{defaultWidth:n,defaultHeight:n,onResize:o,debounceResize:i,children:function(l){var r=l.width,s=l.height;return u.jsx(gl,Je({width:r,height:s},a,{ref:t}))}})});function vl({className:e}){const[t,n]=b.useState([]);return b.useEffect(()=>{const o=[];for(let i=0;i<20;i++)o.push({x:i,y:Math.random()*(i%5===0?5:1)});n([{id:"errors",color:"hsl(0, 70%, 50%)",data:o}])},[]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"font-semibold text-sm",children:"Error Rate (Errors/min)"}),u.jsx("span",{className:"text-xs font-mono text-red-400",children:"Current: 0.2%"})]}),u.jsx("div",{className:"h-[200px]",children:u.jsx(hl,{data:t,margin:{top:10,right:10,bottom:20,left:30},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},curve:"monotoneX",axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:5,tickRotation:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},enableGridX:!1,colors:["#ef4444"],enablePoints:!1,enableArea:!0,areaOpacity:.15,useMesh:!0,theme:{axis:{ticks:{text:{fill:"#666"}}},grid:{line:{stroke:"#333"}},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function xl({className:e}){const[t,n]=b.useState({cpu:0,memory:0});return b.useEffect(()=>{const o=setInterval(()=>{n({cpu:Math.floor(Math.random()*30)+10,memory:Math.floor(Math.random()*40)+20})},2e3);return()=>clearInterval(o)},[]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Client Resources"}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"flex flex-col items-center p-4 bg-slate-900/50 rounded-lg",children:[u.jsx(oo,{className:"w-6 h-6 text-blue-400 mb-2"}),u.jsxs("span",{className:"text-2xl font-bold text-slate-200",children:[t.cpu,"%"]}),u.jsx("span",{className:"text-xs text-slate-500",children:"CPU Usage"}),u.jsx("div",{className:"w-full h-1 bg-slate-800 mt-2 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${t.cpu}%`}})})]}),u.jsxs("div",{className:"flex flex-col items-center p-4 bg-slate-900/50 rounded-lg",children:[u.jsx(ao,{className:"w-6 h-6 text-purple-400 mb-2"}),u.jsxs("span",{className:"text-2xl font-bold text-slate-200",children:[t.memory,"MB"]}),u.jsx("span",{className:"text-xs text-slate-500",children:"Heap Used"}),u.jsx("div",{className:"w-full h-1 bg-slate-800 mt-2 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-purple-500 transition-all duration-500",style:{width:`${t.memory}%`}})})]})]})]})}function pl({className:e}){const{events:t}=Wi(),[n,o]=b.useState(0);return b.useEffect(()=>{const i=setInterval(()=>{o(Math.floor(Math.random()*10)+5)},1e3);return()=>clearInterval(i)},[t]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Event Throughput"}),u.jsx("div",{className:"flex items-center justify-center h-[150px]",children:u.jsxs("div",{className:"relative flex flex-col items-center",children:[u.jsx(lo,{className:"w-12 h-12 text-yellow-400 mb-2 animate-pulse"}),u.jsx("span",{className:"text-5xl font-bold text-white tracking-tighter",children:n}),u.jsx("span",{className:"text-sm text-slate-400 mt-1",children:"events / sec"})]})})]})}function yl({className:e}){const[t,n]=b.useState(0);return b.useEffect(()=>{const o=setInterval(()=>{n(Math.floor(Math.random()*20))},500);return()=>clearInterval(o)},[]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Processing Queue Depth"}),u.jsxs("div",{className:"flex flex-col justify-center h-[150px] space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[u.jsx("span",{children:"Empty"}),u.jsx("span",{children:"Critical"})]}),u.jsx("div",{className:"flex gap-1 h-12",children:Array.from({length:20}).map((o,i)=>u.jsx("div",{className:`flex-1 rounded-sm transition-all duration-300 ${i<t?i>15?"bg-red-500":i>10?"bg-yellow-500":"bg-green-500":"bg-slate-800"}`},i))}),u.jsxs("div",{className:"text-center mt-2",children:[u.jsx("span",{className:"text-2xl font-bold text-slate-200",children:t}),u.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"pending events"})]})]})]})}function kl({className:e}){const t=[{name:"API Uptime",value:"99.99%",status:"healthy"},{name:"Stream Availability",value:"99.95%",status:"healthy"},{name:"Processing Success",value:"99.8%",status:"warning"},{name:"Avg Response Time",value:"45ms",status:"healthy"}];return u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Service Level Agreement"}),u.jsx("div",{className:"space-y-4",children:t.map(n=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900/50 rounded-lg",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[n.status==="healthy"?u.jsx(uo,{className:"w-4 h-4 text-green-500"}):n.status==="warning"?u.jsx(ro,{className:"w-4 h-4 text-yellow-500"}):u.jsx(so,{className:"w-4 h-4 text-red-500"}),u.jsx("span",{className:"text-sm font-medium",children:n.name})]}),u.jsx("span",{className:`text-sm font-bold ${n.status==="healthy"?"text-green-400":n.status==="warning"?"text-yellow-400":"text-red-400"}`,children:n.value})]},n.name))})]})}function wl({className:e}){const[t,n]=b.useState([]);return b.useEffect(()=>{const o=setInterval(()=>{const a={id:Math.random().toString(36).substring(7),timestamp:new Date().toLocaleTimeString(),service:Math.random()>.5?"ingest-service":"analysis-core",status:Math.random()>.9?"error":"success",duration:Math.floor(Math.random()*100)+"ms"};n(l=>[a,...l].slice(0,20))},1500);return()=>clearInterval(o)},[]),u.jsxs(pt,{className:`p-4 ${e}`,children:[u.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Live Trace Viewer"}),u.jsx(qn,{className:"h-[250px]",children:u.jsx("div",{className:"space-y-2",children:t.map(o=>u.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900/30 rounded text-xs border border-slate-800",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-mono text-slate-500",children:o.timestamp}),u.jsx(Dn,{variant:"outline",className:"text-xs font-normal",children:o.service}),u.jsx("span",{className:"font-mono text-slate-300",children:o.id})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-slate-400",children:o.duration}),u.jsx(Dn,{variant:o.status==="success"?"default":"destructive",className:"h-5",children:o.status})]})]},o.id))})})]})}const Ol=()=>u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx(Ei,{}),u.jsxs("main",{className:"pt-20 pb-8 px-4 sm:px-6 lg:px-8 max-w-[1800px] mx-auto",children:[u.jsxs("div",{className:"mb-8",children:[u.jsxs(ft.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-2xl font-bold flex items-center gap-2",children:[u.jsx(Li,{className:"w-6 h-6 text-primary"}),"System Monitor"]}),u.jsx(ft.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground mt-1",children:"Real-time instrumentation, metrics, and health checks"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:u.jsx(kl,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:u.jsx(vl,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:u.jsx(ho,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:u.jsx(xl,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:u.jsx(pl,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:u.jsx(yl,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:u.jsx(ha,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:u.jsx(fo,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:u.jsx(wl,{})}),u.jsx(ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"xl:col-span-3",children:u.jsx(co,{})})]})]})]});export{Ol as default};
