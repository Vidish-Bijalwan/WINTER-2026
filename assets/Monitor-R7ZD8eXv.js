import{r as l,j as e,ai as p,aP as f,ar as j,aQ as y,aR as g,aS as v,v as N,Z as b,aT as w,aU as S,a4 as k,o as r,g as M}from"./vendor-BPNd0lDP.js";import{S as x,N as R}from"./Navigation-PwT9yHHg.js";import{C as o}from"./card-DA2NkwAB.js";import{B as h}from"./button-TxjNP0dA.js";import{S as E}from"./switch-CNLRBQ4E.js";import{u as $}from"./index-B2lD_z9c.js";import{B as m}from"./badge-p9Elgbwt.js";function A({className:n}){const[a,s]=l.useState(""),[t,i]=l.useState(!1),c=async()=>{i(!0);try{const u=await(await fetch("http://localhost:8000/metrics")).text();s(u)}catch{s(`# Error fetching metrics
# Ensure backend is running at http://localhost:8000`)}finally{i(!1)}};return l.useEffect(()=>{c();const d=setInterval(c,1e4);return()=>clearInterval(d)},[]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Prometheus Exporter Output"}),e.jsx(h,{variant:"ghost",size:"sm",onClick:c,disabled:t,children:e.jsx(p,{className:`w-4 h-4 ${t?"animate-spin":""}`})})]}),e.jsx(x,{className:"h-[200px] bg-slate-950 rounded p-4 font-mono text-xs text-green-400",children:e.jsx("pre",{children:a})})]})}function P({className:n}){const[a,s]=l.useState([{id:1,name:"High Latency > 200ms",active:!0},{id:2,name:"Error Rate > 1%",active:!0},{id:3,name:"Low Throughput < 10 eps",active:!1},{id:4,name:"Bot Activity Spike > 50%",active:!0}]),t=i=>{s(a.map(c=>c.id===i?{...c,active:!c.active}:c))};return e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Alert Rules"]}),e.jsxs(h,{variant:"outline",size:"sm",className:"h-7 text-xs",children:[e.jsx(j,{className:"w-3 h-3 mr-1"})," Add Rule"]})]}),e.jsx("div",{className:"space-y-3",children:a.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900/30 rounded border border-slate-800",children:[e.jsx("span",{className:"text-sm text-slate-300",children:i.name}),e.jsx(E,{checked:i.active,onCheckedChange:()=>t(i.id)})]},i.id))})]})}function C({className:n}){const a=[{name:"WebSocket Receive",width:"15%",color:"bg-blue-500"},{name:"JSON Parse",width:"10%",color:"bg-green-500"},{name:"TDA Analysis",width:"40%",color:"bg-purple-500"},{name:"ML Inference",width:"25%",color:"bg-orange-500"},{name:"Render",width:"10%",color:"bg-pink-500"}];return e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Pipeline Flamegraph"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-12 w-full flex rounded-md overflow-hidden",children:a.map((s,t)=>e.jsx("div",{className:`${s.color} h-full flex items-center justify-center text-xs font-bold text-white/90 hover:opacity-90 transition-opacity cursor-help`,style:{width:s.width},title:s.name,children:s.name},t))}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-400",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.color}`}),e.jsx("span",{children:s.name})]},t))})]})]})}function T({className:n}){const[a,s]=l.useState([]);return l.useEffect(()=>{s([{range:"0-50ms",count:45},{range:"50-100ms",count:30},{range:"100-200ms",count:15},{range:"200-500ms",count:8},{range:"500ms+",count:2}])},[]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Latency Distribution"}),e.jsx("div",{className:"h-[250px]",children:e.jsx(y,{data:a,keys:["count"],indexBy:"range",margin:{top:10,right:10,bottom:30,left:40},padding:.3,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:"#3b82f6",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},theme:{axis:{ticks:{text:{fill:"#666"}}},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function D({className:n}){const[a,s]=l.useState([]);return l.useEffect(()=>{const t=[];for(let i=0;i<20;i++)t.push({x:i,y:Math.random()*(i%5===0?5:1)});s([{id:"errors",color:"hsl(0, 70%, 50%)",data:t}])},[]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Error Rate (Errors/min)"}),e.jsx("span",{className:"text-xs font-mono text-red-400",children:"Current: 0.2%"})]}),e.jsx("div",{className:"h-[200px]",children:e.jsx(g,{data:a,margin:{top:10,right:10,bottom:20,left:30},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},curve:"monotoneX",axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:5,tickRotation:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0},enableGridX:!1,colors:["#ef4444"],enablePoints:!1,enableArea:!0,areaOpacity:.15,useMesh:!0,theme:{axis:{ticks:{text:{fill:"#666"}}},grid:{line:{stroke:"#333"}},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function I({className:n}){const[a,s]=l.useState({cpu:0,memory:0});return l.useEffect(()=>{const t=setInterval(()=>{s({cpu:Math.floor(Math.random()*30)+10,memory:Math.floor(Math.random()*40)+20})},2e3);return()=>clearInterval(t)},[]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Client Resources"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center p-4 bg-slate-900/50 rounded-lg",children:[e.jsx(v,{className:"w-6 h-6 text-blue-400 mb-2"}),e.jsxs("span",{className:"text-2xl font-bold text-slate-200",children:[a.cpu,"%"]}),e.jsx("span",{className:"text-xs text-slate-500",children:"CPU Usage"}),e.jsx("div",{className:"w-full h-1 bg-slate-800 mt-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:`${a.cpu}%`}})})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-slate-900/50 rounded-lg",children:[e.jsx(N,{className:"w-6 h-6 text-purple-400 mb-2"}),e.jsxs("span",{className:"text-2xl font-bold text-slate-200",children:[a.memory,"MB"]}),e.jsx("span",{className:"text-xs text-slate-500",children:"Heap Used"}),e.jsx("div",{className:"w-full h-1 bg-slate-800 mt-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 transition-all duration-500",style:{width:`${a.memory}%`}})})]})]})]})}function L({className:n}){const{events:a}=$(),[s,t]=l.useState(0);return l.useEffect(()=>{const i=setInterval(()=>{t(Math.floor(Math.random()*10)+5)},1e3);return()=>clearInterval(i)},[a]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Event Throughput"}),e.jsx("div",{className:"flex items-center justify-center h-[150px]",children:e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx(b,{className:"w-12 h-12 text-yellow-400 mb-2 animate-pulse"}),e.jsx("span",{className:"text-5xl font-bold text-white tracking-tighter",children:s}),e.jsx("span",{className:"text-sm text-slate-400 mt-1",children:"events / sec"})]})})]})}function B({className:n}){const[a,s]=l.useState(0);return l.useEffect(()=>{const t=setInterval(()=>{s(Math.floor(Math.random()*20))},500);return()=>clearInterval(t)},[]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Processing Queue Depth"}),e.jsxs("div",{className:"flex flex-col justify-center h-[150px] space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[e.jsx("span",{children:"Empty"}),e.jsx("span",{children:"Critical"})]}),e.jsx("div",{className:"flex gap-1 h-12",children:Array.from({length:20}).map((t,i)=>e.jsx("div",{className:`flex-1 rounded-sm transition-all duration-300 ${i<a?i>15?"bg-red-500":i>10?"bg-yellow-500":"bg-green-500":"bg-slate-800"}`},i))}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("span",{className:"text-2xl font-bold text-slate-200",children:a}),e.jsx("span",{className:"text-xs text-slate-500 ml-2",children:"pending events"})]})]})]})}function z({className:n}){const a=[{name:"API Uptime",value:"99.99%",status:"healthy"},{name:"Stream Availability",value:"99.95%",status:"healthy"},{name:"Processing Success",value:"99.8%",status:"warning"},{name:"Avg Response Time",value:"45ms",status:"healthy"}];return e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Service Level Agreement"}),e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.status==="healthy"?e.jsx(w,{className:"w-4 h-4 text-green-500"}):s.status==="warning"?e.jsx(S,{className:"w-4 h-4 text-yellow-500"}):e.jsx(k,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsx("span",{className:`text-sm font-bold ${s.status==="healthy"?"text-green-400":s.status==="warning"?"text-yellow-400":"text-red-400"}`,children:s.value})]},s.name))})]})}function U({className:n}){const[a,s]=l.useState([]);return l.useEffect(()=>{const t=setInterval(()=>{const c={id:Math.random().toString(36).substring(7),timestamp:new Date().toLocaleTimeString(),service:Math.random()>.5?"ingest-service":"analysis-core",status:Math.random()>.9?"error":"success",duration:Math.floor(Math.random()*100)+"ms"};s(d=>[c,...d].slice(0,20))},1500);return()=>clearInterval(t)},[]),e.jsxs(o,{className:`p-4 ${n}`,children:[e.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Live Trace Viewer"}),e.jsx(x,{className:"h-[250px]",children:e.jsx("div",{className:"space-y-2",children:a.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900/30 rounded text-xs border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono text-slate-500",children:t.timestamp}),e.jsx(m,{variant:"outline",className:"text-xs font-normal",children:t.service}),e.jsx("span",{className:"font-mono text-slate-300",children:t.id})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-slate-400",children:t.duration}),e.jsx(m,{variant:t.status==="success"?"default":"destructive",className:"h-5",children:t.status})]})]},t.id))})})]})}const V=()=>e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(R,{}),e.jsxs("main",{className:"pt-20 pb-8 px-4 sm:px-6 lg:px-8 max-w-[1800px] mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(r.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6 text-primary"}),"System Monitor"]}),e.jsx(r.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground mt-1",children:"Real-time instrumentation, metrics, and health checks"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(z,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(D,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(P,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(I,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(L,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsx(B,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsx(T,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsx(C,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsx(U,{})}),e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"xl:col-span-3",children:e.jsx(A,{})})]})]})]});export{V as default};
