import{u as y,a2 as P,r as s,j as e,o as k,I as m,a3 as S,E as C,a1 as L,p as E,K as R}from"./vendor-BPNd0lDP.js";import{a as I,d as q}from"./index-B2lD_z9c.js";import{B as x}from"./button-TxjNP0dA.js";import{I as p}from"./input-CknSnZz4.js";import{L as h}from"./label-C1d_A_ih.js";import{P as B}from"./PasswordStrength-Dt2b5cSt.js";function G(){const{toast:t}=I(),o=y(),[f]=P(),a=f.get("token"),[i,w]=s.useState(""),[l,g]=s.useState(""),[n,b]=s.useState(!1),[c,d]=s.useState(!1),[u,j]=s.useState(!1);s.useEffect(()=>{a||(t({variant:"destructive",title:"Invalid Link",description:"Missing reset token. Please request a new link."}),o("/forgot-password"))},[a,o,t]);const v=async r=>{if(r.preventDefault(),i!==l){t({variant:"destructive",title:"Passwords do not match",description:"Please ensure both passwords match."});return}if(a){d(!0);try{await q.resetPassword(a,i),j(!0),t({title:"Password Reset Successful",description:"You can now login with your new password."}),setTimeout(()=>{o("/login")},3e3)}catch(N){t({variant:"destructive",title:"Error",description:N.message||"Failed to reset password"})}finally{d(!1)}}};return a?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] -z-10"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-background/90 backdrop-blur-[1px] -z-10"}),e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2 bg-clip-text text-transparent bg-gradient-to-r from-primary to-blue-400",children:"Set New Password"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a strong password for your account"})]}),e.jsxs("div",{className:"bg-card/50 backdrop-blur-xl border border-border/50 rounded-xl p-6 shadow-2xl",children:[u?e.jsxs("div",{className:"text-center space-y-4 py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(L,{className:"w-8 h-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-semibold",children:"Password Reset Complete"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Your password has been successfully updated. Redirecting to login..."}),e.jsx(x,{className:"w-full mt-4",onClick:()=>o("/login"),children:"Go to Login Now"})]}):e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(p,{id:"password",type:n?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 bg-background/50",value:i,onChange:r=>w(r.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n?e.jsx(S,{className:"w-4 h-4"}):e.jsx(C,{className:"w-4 h-4"})})]}),e.jsx(B,{password:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(p,{id:"confirmPassword",type:"password",placeholder:"••••••••",className:"pl-10 bg-background/50",value:l,onChange:r=>g(r.target.value),required:!0})]})]}),e.jsx(x,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:c,children:c?"Resetting Password...":"Reset Password"})]}),!u&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(E,{to:"/login",className:"text-sm text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Back to Login"]})})]})]})]}):null}export{G as default};
