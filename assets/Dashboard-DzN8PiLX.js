import{c as V,r as m,t as k,w as Ge,u as $e,j as s,a as B,X as ei,A as Vt,C as qn,x as Xn,y as ti,d as ni}from"./index--xrktNsK.js";import{m as ne,B as je,c as ri}from"./button-qKzjhVfS.js";import{S as ii,A as Yn,D as oi,a as si,b as ai,c as li,d as ci,e as di,f as ui,N as fi}from"./Navigation-CCnB3BJO.js";import{B as Un}from"./badge-DyOow1xh.js";import{U as pi}from"./user-CwflAf-k.js";import{S as wn,a as hi,f as zt,L as Ue,b as mi,A as vi,i as mt,c as Gn,E as gi,g as yt,d as xi,C as yi,e as Oe,h as bi,u as wi,G as Ci,j as Zn,k as Cn,l as Si,X as Jn,Y as Qn,m as ji,R as Ni,T as Di,n as Ai,o as Ei}from"./generateCategoricalChart-BwAcbB-p.js";import{P as Ri}from"./PersistenceDiagram-DSoYpBKa.js";import{C as ki,a as Pi,b as Ti,d as Mi}from"./card-3sR0m8q4.js";import{R as Oi,P as er}from"./refresh-cw-LHX02uMk.js";import{Z as Ii}from"./zap-CCOOT5oZ.js";import{A as Li,C as _i}from"./_baseAssignValue-Dol-jihx.js";import"./database-BhRGqcbv.js";import"./log-out-CriHxoqG.js";import"./shield-DM6M_zfJ.js";import"./trending-up-D7sox4r_.js";import"./range-D9bsgeQp.js";import"./isNumber-BwiXoauw.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=V("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=V("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=V("ChartScatter",[["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["circle",{cx:"18.5",cy:"5.5",r:".5",fill:"currentColor",key:"lysivs"}],["circle",{cx:"11.5",cy:"11.5",r:".5",fill:"currentColor",key:"byv1b8"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["circle",{cx:"17.5",cy:"14.5",r:".5",fill:"currentColor",key:"1gjh6j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=V("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=V("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=V("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=V("FilePlus",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=V("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=V("GitGraph",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M5 9v6",key:"158jrl"}],["circle",{cx:"5",cy:"18",r:"3",key:"104gr9"}],["path",{d:"M12 3v18",key:"108xh3"}],["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M16 15.7A9 9 0 0 0 19 9",key:"1e3vqb"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=V("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=V("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=V("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=V("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=V("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=V("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);function Ji(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ze(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function en(e){return"nodeType"in e}function X(e){var t,n;return e?ze(e)?e:en(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function tn(e){const{Document:t}=X(e);return e instanceof t}function at(e){return ze(e)?!1:e instanceof X(e).HTMLElement}function nr(e){return e instanceof X(e).SVGElement}function Be(e){return e?ze(e)?e.document:en(e)?tn(e)?e:at(e)||nr(e)?e.ownerDocument:document:document:document}const ae=Pt?m.useLayoutEffect:m.useEffect;function nn(e){const t=m.useRef(e);return ae(()=>{t.current=e}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function Qi(){const e=m.useRef(null),t=m.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function nt(e,t){t===void 0&&(t=[e]);const n=m.useRef(e);return ae(()=>{n.current!==e&&(n.current=e)},t),n}function lt(e,t){const n=m.useRef();return m.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ct(e){const t=nn(e),n=m.useRef(null),r=m.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function qt(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let Bt={};function ct(e,t){return m.useMemo(()=>{if(t)return t;const n=Bt[e]==null?0:Bt[e]+1;return Bt[e]=n,e+"-"+n},[e,t])}function rr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,a)=>{const c=Object.entries(a);for(const[l,f]of c){const d=o[l];d!=null&&(o[l]=d+e*f)}return o},{...t})}}const Ie=rr(1),rt=rr(-1);function eo(e){return"clientX"in e&&"clientY"in e}function rn(e){if(!e)return!1;const{KeyboardEvent:t}=X(e.target);return t&&e instanceof t}function to(e){if(!e)return!1;const{TouchEvent:t}=X(e.target);return t&&e instanceof t}function Xt(e){if(to(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return eo(e)?{x:e.clientX,y:e.clientY}:null}const it=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[it.Translate.toString(e),it.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Sn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function no(e){return e.matches(Sn)?e:e.querySelector(Sn)}const ro={display:"none"};function io(e){let{id:t,value:n}=e;return k.createElement("div",{id:t,style:ro},n)}function oo(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return k.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function so(){const[e,t]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ir=m.createContext(null);function ao(e){const t=m.useContext(ir);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function lo(){const[e]=m.useState(()=>new Set),t=m.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[m.useCallback(r=>{let{type:i,event:o}=r;e.forEach(a=>{var c;return(c=a[i])==null?void 0:c.call(a,o)})},[e]),t]}const co={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},uo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fo(e){let{announcements:t=uo,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=co}=e;const{announce:o,announcement:a}=so(),c=ct("DndLiveRegion"),[l,f]=m.useState(!1);if(m.useEffect(()=>{f(!0)},[]),ao(m.useMemo(()=>({onDragStart(u){let{active:p}=u;o(t.onDragStart({active:p}))},onDragMove(u){let{active:p,over:h}=u;t.onDragMove&&o(t.onDragMove({active:p,over:h}))},onDragOver(u){let{active:p,over:h}=u;o(t.onDragOver({active:p,over:h}))},onDragEnd(u){let{active:p,over:h}=u;o(t.onDragEnd({active:p,over:h}))},onDragCancel(u){let{active:p,over:h}=u;o(t.onDragCancel({active:p,over:h}))}}),[o,t])),!l)return null;const d=k.createElement(k.Fragment,null,k.createElement(io,{id:r,value:i.draggable}),k.createElement(oo,{id:c,announcement:a}));return n?Ge.createPortal(d,n):d}var L;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(L||(L={}));function St(){}function jn(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function po(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const re=Object.freeze({x:0,y:0});function or(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ho(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Nn(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function ar(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Dn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const mo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Dn(t,t.left,t.top),o=[];for(const a of r){const{id:c}=a,l=n.get(c);if(l){const f=or(Dn(l),i);o.push({id:c,data:{droppableContainer:a,value:f}})}}return o.sort(sr)},vo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Nn(t),o=[];for(const a of r){const{id:c}=a,l=n.get(c);if(l){const f=Nn(l),d=i.reduce((p,h,x)=>p+or(f[x],h),0),u=Number((d/4).toFixed(4));o.push({id:c,data:{droppableContainer:a,value:u}})}}return o.sort(sr)};function go(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=i-r,c=o-n;if(r<i&&n<o){const l=t.width*t.height,f=e.width*e.height,d=a*c,u=d/(l+f-d);return Number(u.toFixed(4))}return 0}const xo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:a}=o,c=n.get(a);if(c){const l=go(c,t);l>0&&i.push({id:a,data:{droppableContainer:o,value:l}})}}return i.sort(ho)};function yo(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function lr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:re}function bo(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((a,c)=>({...a,top:a.top+e*c.y,bottom:a.bottom+e*c.y,left:a.left+e*c.x,right:a.right+e*c.x}),{...n})}}const wo=bo(1);function Co(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function So(e,t,n){const r=Co(t);if(!r)return e;const{scaleX:i,scaleY:o,x:a,y:c}=r,l=e.left-a-(1-i)*parseFloat(n),f=e.top-c-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?e.width/i:e.width,u=o?e.height/o:e.height;return{width:d,height:u,top:f,right:l+d,bottom:f+u,left:l}}const jo={ignoreTransform:!1};function Fe(e,t){t===void 0&&(t=jo);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:d}=X(e).getComputedStyle(e);f&&(n=So(n,f,d))}const{top:r,left:i,width:o,height:a,bottom:c,right:l}=n;return{top:r,left:i,width:o,height:a,bottom:c,right:l}}function An(e){return Fe(e,{ignoreTransform:!0})}function No(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Do(e,t){return t===void 0&&(t=X(e).getComputedStyle(e)),t.position==="fixed"}function Ao(e,t){t===void 0&&(t=X(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function Tt(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(tn(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!at(i)||nr(i)||n.includes(i))return n;const o=X(e).getComputedStyle(i);return i!==e&&Ao(i,o)&&n.push(i),Do(i,o)?n:r(i.parentNode)}return e?r(e):n}function cr(e){const[t]=Tt(e,1);return t??null}function Ft(e){return!Pt||!e?null:ze(e)?e:en(e)?tn(e)||e===Be(e).scrollingElement?window:at(e)?e:null:null}function dr(e){return ze(e)?e.scrollX:e.scrollLeft}function ur(e){return ze(e)?e.scrollY:e.scrollTop}function Yt(e){return{x:dr(e),y:ur(e)}}var z;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(z||(z={}));function fr(e){return!Pt||!e?!1:e===document.scrollingElement}function pr(e){const t={x:0,y:0},n=fr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:a,isRight:c,maxScroll:r,minScroll:t}}const Eo={x:.2,y:.2};function Ro(e,t,n,r,i){let{top:o,left:a,right:c,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=Eo);const{isTop:f,isBottom:d,isLeft:u,isRight:p}=pr(e),h={x:0,y:0},x={x:0,y:0},g={height:t.height*i.y,width:t.width*i.x};return!f&&o<=t.top+g.height?(h.y=z.Backward,x.y=r*Math.abs((t.top+g.height-o)/g.height)):!d&&l>=t.bottom-g.height&&(h.y=z.Forward,x.y=r*Math.abs((t.bottom-g.height-l)/g.height)),!p&&c>=t.right-g.width?(h.x=z.Forward,x.x=r*Math.abs((t.right-g.width-c)/g.width)):!u&&a<=t.left+g.width&&(h.x=z.Backward,x.x=r*Math.abs((t.left+g.width-a)/g.width)),{direction:h,speed:x}}function ko(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function hr(e){return e.reduce((t,n)=>Ie(t,Yt(n)),re)}function Po(e){return e.reduce((t,n)=>t+dr(n),0)}function To(e){return e.reduce((t,n)=>t+ur(n),0)}function Mo(e,t){if(t===void 0&&(t=Fe),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);cr(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Oo=[["x",["left","right"],Po],["y",["top","bottom"],To]];class on{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Tt(n),i=hr(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,a,c]of Oo)for(const l of a)Object.defineProperty(this,l,{get:()=>{const f=c(r),d=i[o]-f;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ze{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Io(e){const{EventTarget:t}=X(e);return e instanceof t?e:Be(e)}function Wt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var te;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(te||(te={}));function En(e){e.preventDefault()}function Lo(e){e.stopPropagation()}var R;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(R||(R={}));const mr={start:[R.Space,R.Enter],cancel:[R.Esc],end:[R.Space,R.Enter,R.Tab]},_o=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case R.Right:return{...n,x:n.x+25};case R.Left:return{...n,x:n.x-25};case R.Down:return{...n,y:n.y+25};case R.Up:return{...n,y:n.y-25}}};class sn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ze(Be(n)),this.windowListeners=new Ze(X(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(te.Resize,this.handleCancel),this.windowListeners.add(te.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(te.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Mo(r),n(re)}handleKeyDown(t){if(rn(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=mr,coordinateGetter:a=_o,scrollBehavior:c="smooth"}=i,{code:l}=t;if(o.end.includes(l)){this.handleEnd(t);return}if(o.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:f}=r.current,d=f?{x:f.left,y:f.top}:re;this.referenceCoordinates||(this.referenceCoordinates=d);const u=a(t,{active:n,context:r.current,currentCoordinates:d});if(u){const p=rt(u,d),h={x:0,y:0},{scrollableAncestors:x}=r.current;for(const g of x){const v=t.code,{isTop:y,isRight:w,isLeft:b,isBottom:D,maxScroll:N,minScroll:S}=pr(g),A=ko(g),E={x:Math.min(v===R.Right?A.right-A.width/2:A.right,Math.max(v===R.Right?A.left:A.left+A.width/2,u.x)),y:Math.min(v===R.Down?A.bottom-A.height/2:A.bottom,Math.max(v===R.Down?A.top:A.top+A.height/2,u.y))},T=v===R.Right&&!w||v===R.Left&&!b,O=v===R.Down&&!D||v===R.Up&&!y;if(T&&E.x!==u.x){const P=g.scrollLeft+p.x,I=v===R.Right&&P<=N.x||v===R.Left&&P>=S.x;if(I&&!p.y){g.scrollTo({left:P,behavior:c});return}I?h.x=g.scrollLeft-P:h.x=v===R.Right?g.scrollLeft-N.x:g.scrollLeft-S.x,h.x&&g.scrollBy({left:-h.x,behavior:c});break}else if(O&&E.y!==u.y){const P=g.scrollTop+p.y,I=v===R.Down&&P<=N.y||v===R.Up&&P>=S.y;if(I&&!p.x){g.scrollTo({top:P,behavior:c});return}I?h.y=g.scrollTop-P:h.y=v===R.Down?g.scrollTop-N.y:g.scrollTop-S.y,h.y&&g.scrollBy({top:-h.y,behavior:c});break}}this.handleMove(t,Ie(rt(u,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=mr,onActivation:i}=t,{active:o}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Rn(e){return!!(e&&"distance"in e)}function kn(e){return!!(e&&"delay"in e)}class an{constructor(t,n,r){var i;r===void 0&&(r=Io(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:a}=o;this.props=t,this.events=n,this.document=Be(a),this.documentListeners=new Ze(this.document),this.listeners=new Ze(r),this.windowListeners=new Ze(X(a)),this.initialCoordinates=(i=Xt(o))!=null?i:re,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(te.Resize,this.handleCancel),this.windowListeners.add(te.DragStart,En),this.windowListeners.add(te.VisibilityChange,this.handleCancel),this.windowListeners.add(te.ContextMenu,En),this.documentListeners.add(te.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(kn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Rn(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(te.Click,Lo,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(te.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:a,options:{activationConstraint:c}}=o;if(!i)return;const l=(n=Xt(t))!=null?n:re,f=rt(i,l);if(!r&&c){if(Rn(c)){if(c.tolerance!=null&&Wt(f,c.tolerance))return this.handleCancel();if(Wt(f,c.distance))return this.handleStart()}if(kn(c)&&Wt(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}t.cancelable&&t.preventDefault(),a(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===R.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const $o={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ln extends an{constructor(t){const{event:n}=t,r=Be(n.target);super(t,$o,r)}}ln.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const zo={move:{name:"mousemove"},end:{name:"mouseup"}};var Ut;(function(e){e[e.RightClick=2]="RightClick"})(Ut||(Ut={}));class Bo extends an{constructor(t){super(t,zo,Be(t.event.target))}}Bo.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Ut.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ht={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Fo extends an{constructor(t){super(t,Ht)}static setup(){return window.addEventListener(Ht.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ht.move.name,t)};function t(){}}}Fo.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Je;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Je||(Je={}));var jt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(jt||(jt={}));function Wo(e){let{acceleration:t,activator:n=Je.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:a=5,order:c=jt.TreeOrder,pointerCoordinates:l,scrollableAncestors:f,scrollableAncestorRects:d,delta:u,threshold:p}=e;const h=Ko({delta:u,disabled:!o}),[x,g]=Qi(),v=m.useRef({x:0,y:0}),y=m.useRef({x:0,y:0}),w=m.useMemo(()=>{switch(n){case Je.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Je.DraggableRect:return i}},[n,i,l]),b=m.useRef(null),D=m.useCallback(()=>{const S=b.current;if(!S)return;const A=v.current.x*y.current.x,E=v.current.y*y.current.y;S.scrollBy(A,E)},[]),N=m.useMemo(()=>c===jt.TreeOrder?[...f].reverse():f,[c,f]);m.useEffect(()=>{if(!o||!f.length||!w){g();return}for(const S of N){if((r==null?void 0:r(S))===!1)continue;const A=f.indexOf(S),E=d[A];if(!E)continue;const{direction:T,speed:O}=Ro(S,E,w,t,p);for(const P of["x","y"])h[P][T[P]]||(O[P]=0,T[P]=0);if(O.x>0||O.y>0){g(),b.current=S,x(D,a),v.current=O,y.current=T;return}}v.current={x:0,y:0},y.current={x:0,y:0},g()},[t,D,r,g,o,a,JSON.stringify(w),JSON.stringify(h),x,f,N,d,JSON.stringify(p)])}const Ho={x:{[z.Backward]:!1,[z.Forward]:!1},y:{[z.Backward]:!1,[z.Forward]:!1}};function Ko(e){let{delta:t,disabled:n}=e;const r=qt(t);return lt(i=>{if(n||!r||!i)return Ho;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[z.Backward]:i.x[z.Backward]||o.x===-1,[z.Forward]:i.x[z.Forward]||o.x===1},y:{[z.Backward]:i.y[z.Backward]||o.y===-1,[z.Forward]:i.y[z.Forward]||o.y===1}}},[n,t,r])}function Vo(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return lt(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function qo(e,t){return m.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...o]},[]),[e,t])}var ot;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ot||(ot={}));var Gt;(function(e){e.Optimized="optimized"})(Gt||(Gt={}));const Pn=new Map;function Xo(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,a]=m.useState(null),{frequency:c,measure:l,strategy:f}=i,d=m.useRef(e),u=v(),p=nt(u),h=m.useCallback(function(y){y===void 0&&(y=[]),!p.current&&a(w=>w===null?y:w.concat(y.filter(b=>!w.includes(b))))},[p]),x=m.useRef(null),g=lt(y=>{if(u&&!n)return Pn;if(!y||y===Pn||d.current!==e||o!=null){const w=new Map;for(let b of e){if(!b)continue;if(o&&o.length>0&&!o.includes(b.id)&&b.rect.current){w.set(b.id,b.rect.current);continue}const D=b.node.current,N=D?new on(l(D),D):null;b.rect.current=N,N&&w.set(b.id,N)}return w}return y},[e,o,n,u,l]);return m.useEffect(()=>{d.current=e},[e]),m.useEffect(()=>{u||h()},[n,u]),m.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),m.useEffect(()=>{u||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{h(),x.current=null},c))},[c,u,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:o!=null};function v(){switch(f){case ot.Always:return!1;case ot.BeforeDragging:return n;default:return!n}}}function vr(e,t){return lt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Yo(e,t){return vr(e,t)}function Uo(e){let{callback:t,disabled:n}=e;const r=nn(t),i=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return m.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Mt(e){let{callback:t,disabled:n}=e;const r=nn(t),i=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return m.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Go(e){return new on(Fe(e),e)}function Tn(e,t,n){t===void 0&&(t=Go);const[r,i]=m.useState(null);function o(){i(l=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=l??n)!=null?f:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const a=Uo({callback(l){if(e)for(const f of l){const{type:d,target:u}=f;if(d==="childList"&&u instanceof HTMLElement&&u.contains(e)){o();break}}}}),c=Mt({callback:o});return ae(()=>{o(),e?(c==null||c.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[e]),r}function Zo(e){const t=vr(e);return lr(e,t)}const Mn=[];function Jo(e){const t=m.useRef(e),n=lt(r=>e?r&&r!==Mn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Tt(e):Mn,[e]);return m.useEffect(()=>{t.current=e},[e]),n}function Qo(e){const[t,n]=m.useState(null),r=m.useRef(e),i=m.useCallback(o=>{const a=Ft(o.target);a&&n(c=>c?(c.set(a,Yt(a)),new Map(c)):null)},[]);return m.useEffect(()=>{const o=r.current;if(e!==o){a(o);const c=e.map(l=>{const f=Ft(l);return f?(f.addEventListener("scroll",i,{passive:!0}),[f,Yt(f)]):null}).filter(l=>l!=null);n(c.length?new Map(c):null),r.current=e}return()=>{a(e),a(o)};function a(c){c.forEach(l=>{const f=Ft(l);f==null||f.removeEventListener("scroll",i)})}},[i,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,a)=>Ie(o,a),re):hr(e):re,[e,t])}function On(e,t){t===void 0&&(t=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},t),m.useEffect(()=>{const r=e!==re;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?rt(e,n.current):re}function es(e){m.useEffect(()=>{if(!Pt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function ts(e,t){return m.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=a=>{o(a,t)},n},{}),[e,t])}function gr(e){return m.useMemo(()=>e?No(e):null,[e])}const In=[];function ns(e,t){t===void 0&&(t=Fe);const[n]=e,r=gr(n?X(n):null),[i,o]=m.useState(In);function a(){o(()=>e.length?e.map(l=>fr(l)?r:new on(t(l),l)):In)}const c=Mt({callback:a});return ae(()=>{c==null||c.disconnect(),a(),e.forEach(l=>c==null?void 0:c.observe(l))},[e]),i}function rs(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return at(t)?t:e}function is(e){let{measure:t}=e;const[n,r]=m.useState(null),i=m.useCallback(f=>{for(const{target:d}of f)if(at(d)){r(u=>{const p=t(d);return u?{...u,width:p.width,height:p.height}:p});break}},[t]),o=Mt({callback:i}),a=m.useCallback(f=>{const d=rs(f);o==null||o.disconnect(),d&&(o==null||o.observe(d)),r(d?t(d):null)},[t,o]),[c,l]=Ct(a);return m.useMemo(()=>({nodeRef:c,rect:n,setRef:l}),[n,c,l])}const os=[{sensor:ln,options:{}},{sensor:sn,options:{}}],ss={current:{}},bt={draggable:{measure:An},droppable:{measure:An,strategy:ot.WhileDragging,frequency:Gt.Optimized},dragOverlay:{measure:Fe}};class Qe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const as={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:St},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:bt,measureDroppableContainers:St,windowRect:null,measuringScheduled:!1},ls={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:St,draggableNodes:new Map,over:null,measureDroppableContainers:St},Ot=m.createContext(ls),xr=m.createContext(as);function cs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qe}}}function ds(e,t){switch(t.type){case L.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case L.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case L.DragEnd:case L.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case L.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Qe(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case L.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Qe(e.droppable.containers);return a.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case L.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Qe(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function us(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=m.useContext(Ot),o=qt(r),a=qt(n==null?void 0:n.id);return m.useEffect(()=>{if(!t&&!r&&o&&a!=null){if(!rn(o)||document.activeElement===o.target)return;const c=i.get(a);if(!c)return;const{activatorNode:l,node:f}=c;if(!l.current&&!f.current)return;requestAnimationFrame(()=>{for(const d of[l.current,f.current]){if(!d)continue;const u=no(d);if(u){u.focus();break}}})}},[r,t,i,a,o]),null}function fs(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function ps(e){return m.useMemo(()=>({draggable:{...bt.draggable,...e==null?void 0:e.draggable},droppable:{...bt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...bt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function hs(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=m.useRef(!1),{x:a,y:c}=typeof i=="boolean"?{x:i,y:i}:i;ae(()=>{if(!a&&!c||!t){o.current=!1;return}if(o.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const d=n(f),u=lr(d,r);if(a||(u.x=0),c||(u.y=0),o.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const p=cr(f);p&&p.scrollBy({top:u.y,left:u.x})}},[t,a,c,r,n])}const yr=m.createContext({...re,scaleX:1,scaleY:1});var be;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(be||(be={}));const ms=m.memo(function(t){var n,r,i,o;let{id:a,accessibility:c,autoScroll:l=!0,children:f,sensors:d=os,collisionDetection:u=xo,measuring:p,modifiers:h,...x}=t;const g=m.useReducer(ds,void 0,cs),[v,y]=g,[w,b]=lo(),[D,N]=m.useState(be.Uninitialized),S=D===be.Initialized,{draggable:{active:A,nodes:E,translate:T},droppable:{containers:O}}=v,P=A!=null?E.get(A):null,I=m.useRef({initial:null,translated:null}),_=m.useMemo(()=>{var W;return A!=null?{id:A,data:(W=P==null?void 0:P.data)!=null?W:ss,rect:I}:null},[A,P]),H=m.useRef(null),[Ce,De]=m.useState(null),[K,Ae]=m.useState(null),le=nt(x,Object.values(x)),We=ct("DndDescribedBy",a),ut=m.useMemo(()=>O.getEnabled(),[O]),q=ps(p),{droppableRects:ce,measureDroppableContainers:Se,measuringScheduled:He}=Xo(ut,{dragging:S,dependencies:[T.x,T.y],config:q.droppable}),J=Vo(E,A),ft=m.useMemo(()=>K?Xt(K):null,[K]),he=Qr(),de=Yo(J,q.draggable.measure);hs({activeNode:A!=null?E.get(A):null,config:he.layoutShiftCompensation,initialRect:de,measure:q.draggable.measure});const M=Tn(J,q.draggable.measure,de),Ke=Tn(J?J.parentElement:null),ie=m.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:ce,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ee=O.getNodeFor((n=ie.current.over)==null?void 0:n.id),ue=is({measure:q.dragOverlay.measure}),Re=(r=ue.nodeRef.current)!=null?r:J,ke=S?(i=ue.rect)!=null?i:M:null,pn=!!(ue.nodeRef.current&&ue.rect),hn=Zo(pn?null:M),Lt=gr(Re?X(Re):null),me=Jo(S?Ee??J:null),pt=ns(me),ht=fs(h,{transform:{x:T.x-hn.x,y:T.y-hn.y,scaleX:1,scaleY:1},activatorEvent:K,active:_,activeNodeRect:M,containerNodeRect:Ke,draggingNodeRect:ke,over:ie.current.over,overlayNodeRect:ue.rect,scrollableAncestors:me,scrollableAncestorRects:pt,windowRect:Lt}),mn=ft?Ie(ft,T):null,vn=Qo(me),qr=On(vn),Xr=On(vn,[M]),Pe=Ie(ht,qr),Te=ke?wo(ke,ht):null,Ve=_&&Te?u({active:_,collisionRect:Te,droppableRects:ce,droppableContainers:ut,pointerCoordinates:mn}):null,gn=ar(Ve,"id"),[ve,xn]=m.useState(null),Yr=pn?ht:Ie(ht,Xr),Ur=yo(Yr,(o=ve==null?void 0:ve.rect)!=null?o:null,M),_t=m.useRef(null),yn=m.useCallback((W,Y)=>{let{sensor:U,options:ge}=Y;if(H.current==null)return;const Q=E.get(H.current);if(!Q)return;const G=W.nativeEvent,oe=new U({active:H.current,activeNode:Q,event:G,options:ge,context:ie,onAbort(F){if(!E.get(F))return;const{onDragAbort:se}=le.current,fe={id:F};se==null||se(fe),w({type:"onDragAbort",event:fe})},onPending(F,xe,se,fe){if(!E.get(F))return;const{onDragPending:Xe}=le.current,ye={id:F,constraint:xe,initialCoordinates:se,offset:fe};Xe==null||Xe(ye),w({type:"onDragPending",event:ye})},onStart(F){const xe=H.current;if(xe==null)return;const se=E.get(xe);if(!se)return;const{onDragStart:fe}=le.current,qe={activatorEvent:G,active:{id:xe,data:se.data,rect:I}};Ge.unstable_batchedUpdates(()=>{fe==null||fe(qe),N(be.Initializing),y({type:L.DragStart,initialCoordinates:F,active:xe}),w({type:"onDragStart",event:qe}),De(_t.current),Ae(G)})},onMove(F){y({type:L.DragMove,coordinates:F})},onEnd:Me(L.DragEnd),onCancel:Me(L.DragCancel)});_t.current=oe;function Me(F){return async function(){const{active:se,collisions:fe,over:qe,scrollAdjustedTranslate:Xe}=ie.current;let ye=null;if(se&&Xe){const{cancelDrop:Ye}=le.current;ye={activatorEvent:G,active:se,collisions:fe,delta:Xe,over:qe},F===L.DragEnd&&typeof Ye=="function"&&await Promise.resolve(Ye(ye))&&(F=L.DragCancel)}H.current=null,Ge.unstable_batchedUpdates(()=>{y({type:F}),N(be.Uninitialized),xn(null),De(null),Ae(null),_t.current=null;const Ye=F===L.DragEnd?"onDragEnd":"onDragCancel";if(ye){const $t=le.current[Ye];$t==null||$t(ye),w({type:Ye,event:ye})}})}}},[E]),Gr=m.useCallback((W,Y)=>(U,ge)=>{const Q=U.nativeEvent,G=E.get(ge);if(H.current!==null||!G||Q.dndKit||Q.defaultPrevented)return;const oe={active:G};W(U,Y.options,oe)===!0&&(Q.dndKit={capturedBy:Y.sensor},H.current=ge,yn(U,Y))},[E,yn]),bn=qo(d,Gr);es(d),ae(()=>{M&&D===be.Initializing&&N(be.Initialized)},[M,D]),m.useEffect(()=>{const{onDragMove:W}=le.current,{active:Y,activatorEvent:U,collisions:ge,over:Q}=ie.current;if(!Y||!U)return;const G={active:Y,activatorEvent:U,collisions:ge,delta:{x:Pe.x,y:Pe.y},over:Q};Ge.unstable_batchedUpdates(()=>{W==null||W(G),w({type:"onDragMove",event:G})})},[Pe.x,Pe.y]),m.useEffect(()=>{const{active:W,activatorEvent:Y,collisions:U,droppableContainers:ge,scrollAdjustedTranslate:Q}=ie.current;if(!W||H.current==null||!Y||!Q)return;const{onDragOver:G}=le.current,oe=ge.get(gn),Me=oe&&oe.rect.current?{id:oe.id,rect:oe.rect.current,data:oe.data,disabled:oe.disabled}:null,F={active:W,activatorEvent:Y,collisions:U,delta:{x:Q.x,y:Q.y},over:Me};Ge.unstable_batchedUpdates(()=>{xn(Me),G==null||G(F),w({type:"onDragOver",event:F})})},[gn]),ae(()=>{ie.current={activatorEvent:K,active:_,activeNode:J,collisionRect:Te,collisions:Ve,droppableRects:ce,draggableNodes:E,draggingNode:Re,draggingNodeRect:ke,droppableContainers:O,over:ve,scrollableAncestors:me,scrollAdjustedTranslate:Pe},I.current={initial:ke,translated:Te}},[_,J,Ve,Te,E,Re,ke,ce,O,ve,me,Pe]),Wo({...he,delta:T,draggingRect:Te,pointerCoordinates:mn,scrollableAncestors:me,scrollableAncestorRects:pt});const Zr=m.useMemo(()=>({active:_,activeNode:J,activeNodeRect:M,activatorEvent:K,collisions:Ve,containerNodeRect:Ke,dragOverlay:ue,draggableNodes:E,droppableContainers:O,droppableRects:ce,over:ve,measureDroppableContainers:Se,scrollableAncestors:me,scrollableAncestorRects:pt,measuringConfiguration:q,measuringScheduled:He,windowRect:Lt}),[_,J,M,K,Ve,Ke,ue,E,O,ce,ve,Se,me,pt,q,He,Lt]),Jr=m.useMemo(()=>({activatorEvent:K,activators:bn,active:_,activeNodeRect:M,ariaDescribedById:{draggable:We},dispatch:y,draggableNodes:E,over:ve,measureDroppableContainers:Se}),[K,bn,_,M,y,We,E,ve,Se]);return k.createElement(ir.Provider,{value:b},k.createElement(Ot.Provider,{value:Jr},k.createElement(xr.Provider,{value:Zr},k.createElement(yr.Provider,{value:Ur},f)),k.createElement(us,{disabled:(c==null?void 0:c.restoreFocus)===!1})),k.createElement(fo,{...c,hiddenTextDescribedById:We}));function Qr(){const W=(Ce==null?void 0:Ce.autoScrollEnabled)===!1,Y=typeof l=="object"?l.enabled===!1:l===!1,U=S&&!W&&!Y;return typeof l=="object"?{...l,enabled:U}:{enabled:U}}}),vs=m.createContext(null),Ln="button",gs="Draggable";function xs(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=ct(gs),{activators:a,activatorEvent:c,active:l,activeNodeRect:f,ariaDescribedById:d,draggableNodes:u,over:p}=m.useContext(Ot),{role:h=Ln,roleDescription:x="draggable",tabIndex:g=0}=i??{},v=(l==null?void 0:l.id)===t,y=m.useContext(v?yr:vs),[w,b]=Ct(),[D,N]=Ct(),S=ts(a,t),A=nt(n);ae(()=>(u.set(t,{id:t,key:o,node:w,activatorNode:D,data:A}),()=>{const T=u.get(t);T&&T.key===o&&u.delete(t)}),[u,t]);const E=m.useMemo(()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&h===Ln?!0:void 0,"aria-roledescription":x,"aria-describedby":d.draggable}),[r,h,g,v,x,d.draggable]);return{active:l,activatorEvent:c,activeNodeRect:f,attributes:E,isDragging:v,listeners:r?void 0:S,node:w,over:p,setNodeRef:b,setActivatorNodeRef:N,transform:y}}function ys(){return m.useContext(xr)}const bs="Droppable",ws={timeout:25};function Cs(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=ct(bs),{active:a,dispatch:c,over:l,measureDroppableContainers:f}=m.useContext(Ot),d=m.useRef({disabled:n}),u=m.useRef(!1),p=m.useRef(null),h=m.useRef(null),{disabled:x,updateMeasurementsFor:g,timeout:v}={...ws,...i},y=nt(g??r),w=m.useCallback(()=>{if(!u.current){u.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{f(Array.isArray(y.current)?y.current:[y.current]),h.current=null},v)},[v]),b=Mt({callback:w,disabled:x||!a}),D=m.useCallback((E,T)=>{b&&(T&&(b.unobserve(T),u.current=!1),E&&b.observe(E))},[b]),[N,S]=Ct(D),A=nt(t);return m.useEffect(()=>{!b||!N.current||(b.disconnect(),u.current=!1,b.observe(N.current))},[N,b]),m.useEffect(()=>(c({type:L.RegisterDroppable,element:{id:r,key:o,disabled:n,node:N,rect:p,data:A}}),()=>c({type:L.UnregisterDroppable,key:o,id:r})),[r]),m.useEffect(()=>{n!==d.current.disabled&&(c({type:L.SetDroppableDisabled,id:r,key:o,disabled:n}),d.current.disabled=n)},[r,o,n,c]),{active:a,rect:p,isOver:(l==null?void 0:l.id)===r,node:N,over:l,setNodeRef:S}}function cn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Ss(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function vt(e){return e!==null&&e>=0}function js(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ns(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const dn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=cn(t,r,n),a=t[i],c=o[i];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},br="Sortable",wr=k.createContext({activeIndex:-1,containerId:br,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:dn,disabled:{draggable:!1,droppable:!1}});function Ds(e){let{children:t,id:n,items:r,strategy:i=dn,disabled:o=!1}=e;const{active:a,dragOverlay:c,droppableRects:l,over:f,measureDroppableContainers:d}=ys(),u=ct(br,n),p=c.rect!==null,h=m.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),x=a!=null,g=a?h.indexOf(a.id):-1,v=f?h.indexOf(f.id):-1,y=m.useRef(h),w=!js(h,y.current),b=v!==-1&&g===-1||w,D=Ns(o);ae(()=>{w&&x&&d(h)},[w,h,x,d]),m.useEffect(()=>{y.current=h},[h]);const N=m.useMemo(()=>({activeIndex:g,containerId:u,disabled:D,disableTransforms:b,items:h,overIndex:v,useDragOverlay:p,sortedRects:Ss(h,l),strategy:i}),[g,u,D.draggable,D.droppable,b,h,v,l,p,i]);return k.createElement(wr.Provider,{value:N},t)}const As=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return cn(n,r,i).indexOf(t)},Es=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:a,previousItems:c,previousContainerId:l,transition:f}=e;return!f||!r||c!==o&&i===a?!1:n?!0:a!==i&&t===l},Rs={duration:200,easing:"ease"},Cr="transform",ks=it.Transition.toString({property:Cr,duration:0,easing:"linear"}),Ps={roleDescription:"sortable"};function Ts(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,a]=m.useState(null),c=m.useRef(n);return ae(()=>{if(!t&&n!==c.current&&r.current){const l=i.current;if(l){const f=Fe(r.current,{ignoreTransform:!0}),d={x:l.left-f.left,y:l.top-f.top,scaleX:l.width/f.width,scaleY:l.height/f.height};(d.x||d.y)&&a(d)}}n!==c.current&&(c.current=n)},[t,n,r,i]),m.useEffect(()=>{o&&a(null)},[o]),o}function Ms(e){let{animateLayoutChanges:t=Es,attributes:n,disabled:r,data:i,getNewIndex:o=As,id:a,strategy:c,resizeObserverConfig:l,transition:f=Rs}=e;const{items:d,containerId:u,activeIndex:p,disabled:h,disableTransforms:x,sortedRects:g,overIndex:v,useDragOverlay:y,strategy:w}=m.useContext(wr),b=Os(r,h),D=d.indexOf(a),N=m.useMemo(()=>({sortable:{containerId:u,index:D,items:d},...i}),[u,i,D,d]),S=m.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:A,node:E,isOver:T,setNodeRef:O}=Cs({id:a,data:N,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:P,activatorEvent:I,activeNodeRect:_,attributes:H,setNodeRef:Ce,listeners:De,isDragging:K,over:Ae,setActivatorNodeRef:le,transform:We}=xs({id:a,data:N,attributes:{...Ps,...n},disabled:b.draggable}),ut=Ji(O,Ce),q=!!P,ce=q&&!x&&vt(p)&&vt(v),Se=!y&&K,He=Se&&ce?We:null,ft=ce?He??(c??w)({rects:g,activeNodeRect:_,activeIndex:p,overIndex:v,index:D}):null,he=vt(p)&&vt(v)?o({id:a,items:d,activeIndex:p,overIndex:v}):D,de=P==null?void 0:P.id,M=m.useRef({activeId:de,items:d,newIndex:he,containerId:u}),Ke=d!==M.current.items,ie=t({active:P,containerId:u,isDragging:K,isSorting:q,id:a,index:D,items:d,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:f,wasDragging:M.current.activeId!=null}),Ee=Ts({disabled:!ie,index:D,node:E,rect:A});return m.useEffect(()=>{q&&M.current.newIndex!==he&&(M.current.newIndex=he),u!==M.current.containerId&&(M.current.containerId=u),d!==M.current.items&&(M.current.items=d)},[q,he,u,d]),m.useEffect(()=>{if(de===M.current.activeId)return;if(de!=null&&M.current.activeId==null){M.current.activeId=de;return}const Re=setTimeout(()=>{M.current.activeId=de},50);return()=>clearTimeout(Re)},[de]),{active:P,activeIndex:p,attributes:H,data:N,rect:A,index:D,newIndex:he,items:d,isOver:T,isSorting:q,isDragging:K,listeners:De,node:E,overIndex:v,over:Ae,setNodeRef:ut,setActivatorNodeRef:le,setDroppableNodeRef:O,setDraggableNodeRef:Ce,transform:Ee??ft,transition:ue()};function ue(){if(Ee||Ke&&M.current.newIndex===D)return ks;if(!(Se&&!rn(I)||!f)&&(q||ie))return it.Transition.toString({...f,property:Cr})}}function Os(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Nt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Is=[R.Down,R.Right,R.Up,R.Left],Ls=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:a,scrollableAncestors:c}}=t;if(Is.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];o.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const p=i.get(u.id);if(p)switch(e.code){case R.Down:r.top<p.top&&l.push(u);break;case R.Up:r.top>p.top&&l.push(u);break;case R.Left:r.left>p.left&&l.push(u);break;case R.Right:r.left<p.left&&l.push(u);break}});const f=vo({collisionRect:r,droppableRects:i,droppableContainers:l});let d=ar(f,"id");if(d===(a==null?void 0:a.id)&&f.length>1&&(d=f[1].id),d!=null){const u=o.get(n.id),p=o.get(d),h=p?i.get(p.id):null,x=p==null?void 0:p.node.current;if(x&&h&&u&&p){const v=Tt(x).some((S,A)=>c[A]!==S),y=Sr(u,p),w=_s(u,p),b=v||!y?{x:0,y:0}:{x:w?r.width-h.width:0,y:w?r.height-h.height:0},D={x:h.left,y:h.top};return b.x&&b.y?D:rt(D,b)}}}};function Sr(e,t){return!Nt(e)||!Nt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function _s(e,t){return!Nt(e)||!Nt(t)||!Sr(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const $s=k.forwardRef(({event:e,index:t},n)=>{const r=e.delta&&e.delta>0?"text-success":e.delta&&e.delta<0?"text-critical":"text-muted-foreground",i=a=>{if(!a)return null;const c=a>0?"+":"";return Math.abs(a)>=1e3?`${c}${(a/1e3).toFixed(1)}K`:`${c}${a}`},o=()=>e.type==="new"?s.jsx(Ki,{className:"w-3 h-3"}):e.type==="categorize"?s.jsx(Zi,{className:"w-3 h-3"}):s.jsx(Hi,{className:"w-3 h-3"});return s.jsx(ne.div,{ref:n,initial:{opacity:0,x:-20,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:20,height:0},transition:{duration:.2,delay:t*.02},className:"border-b border-border/30 py-2 px-1 last:border-0",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:B("p-1 rounded mt-0.5",e.type==="new"?"bg-success/10 text-success":"bg-primary/10 text-primary"),children:o()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[s.jsx("span",{className:"text-xs font-medium truncate max-w-[180px]",title:e.title,children:e.title}),e.minor&&s.jsx(Un,{variant:"outline",className:"text-[8px] px-1 py-0",children:"m"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[e.bot?s.jsx(zi,{className:"w-3 h-3"}):s.jsx(pi,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate max-w-[80px]",title:e.user,children:e.user})]}),s.jsx("span",{className:"opacity-50",children:""}),s.jsx("span",{className:"font-mono opacity-70",children:e.wiki.replace("wiki","")}),e.delta!==void 0&&e.delta!==0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"opacity-50",children:""}),s.jsx("span",{className:B("font-mono font-medium",r),children:i(e.delta)})]})]})]}),s.jsx("span",{className:"text-[9px] text-muted-foreground shrink-0",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})})});function zs({className:e,maxItems:t=15}){const{events:n,isConnected:r,eventsPerSecond:i}=$e(),[o,a]=k.useState([]),[c,l]=k.useState("all");k.useEffect(()=>{n.length>0&&a(u=>[...n,...u].slice(0,50))},[n]);const d=o.filter(u=>c==="all"?!0:c==="bot"?u.bot:c==="user"?!u.bot:!0).slice(0,t);return s.jsxs("div",{className:B("relative h-full flex flex-col",e),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 px-1 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Live Feed"}),r&&s.jsxs(ne.div,{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-success/10 text-success text-[9px]",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-success"}),i,"/s"]})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-slate-800/50 rounded-lg p-0.5",children:[s.jsx("button",{onClick:()=>l("all"),className:B("px-2 py-0.5 text-[10px] rounded transition-colors",c==="all"?"bg-primary/20 text-primary":"text-muted-foreground hover:text-foreground"),children:"All"}),s.jsx("button",{onClick:()=>l("user"),className:B("px-2 py-0.5 text-[10px] rounded transition-colors",c==="user"?"bg-primary/20 text-primary":"text-muted-foreground hover:text-foreground"),children:"User"}),s.jsx("button",{onClick:()=>l("bot"),className:B("px-2 py-0.5 text-[10px] rounded transition-colors",c==="bot"?"bg-primary/20 text-primary":"text-muted-foreground hover:text-foreground"),children:"Bot"})]})]}),s.jsx(ii,{className:"flex-1 pr-2 -mr-2",children:s.jsx("div",{className:"pr-2",children:s.jsx(Yn,{mode:"popLayout",initial:!1,children:d.length>0?d.map((u,p)=>s.jsx($s,{event:u,index:p},u.id)):s.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},className:"py-8 text-center text-muted-foreground",children:s.jsx("p",{className:"text-xs",children:r?"Waiting for events...":"Connect to see live edits"})})})})}),r&&d.length>0&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-border/30 flex items-center justify-between text-[10px] text-muted-foreground shrink-0",children:[s.jsxs("span",{children:[d.filter(u=>u.bot).length," bot edits"]}),s.jsxs("span",{children:[d.filter(u=>u.type==="new").length," new articles"]})]})]})}function Bs({className:e}){var l;const{timeline:t,isConnected:n}=$e(),r=m.useMemo(()=>t.length>0?t:Array.from({length:24},(f,d)=>({time:`${String(d).padStart(2,"0")}:00`,timestamp:new Date,value:.1+Math.random()*.1,anomaly:!1,eventCount:0})),[t]),i=Math.max(...r.map(f=>f.value),.1),o=100/(r.length-1),a=r.map((f,d)=>{const u=d*o,p=100-f.value/i*80;return`${d===0?"M":"L"} ${u} ${p}`}).join(" "),c=`${a} L 100 100 L 0 100 Z`;return s.jsxs("div",{className:B("relative bg-card/50 rounded-xl p-4 border border-border/50",e),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-foreground",children:"Anomaly Timeline"}),n&&s.jsxs(ne.div,{className:"flex items-center gap-1 px-2 py-0.5 rounded-full bg-success/10 text-success text-[10px]",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-success"}),"Live"]})]}),s.jsxs("div",{className:"flex gap-3 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-anomaly"}),s.jsx("span",{className:"text-muted-foreground",children:"Warning"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-critical"}),s.jsx("span",{className:"text-muted-foreground",children:"Critical"})]})]})]}),s.jsxs("svg",{className:"w-full h-32",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:"0.3"}),s.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:"0"})]}),s.jsxs("linearGradient",{id:"lineGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[s.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))"}),s.jsx("stop",{offset:"50%",stopColor:"hsl(var(--primary-glow))"}),s.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))"})]})]}),s.jsx("g",{opacity:"0.1",children:[25,50,75].map(f=>s.jsx("line",{x1:"0",y1:f,x2:"100",y2:f,stroke:"hsl(var(--foreground))",strokeWidth:"0.5"},f))}),s.jsx(ne.path,{d:c,fill:"url(#areaGradient)",initial:{opacity:0},animate:{opacity:1},transition:{duration:1}}),s.jsx(ne.path,{d:a,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeOut"}}),r.map((f,d)=>{if(!f.anomaly)return null;const u=d*o,p=100-f.value/i*80,h="severity"in f&&f.severity==="critical";return s.jsxs(ne.g,{children:[s.jsx(ne.circle,{cx:u||0,cy:p||0,r:"8",fill:h?"hsl(var(--critical))":"hsl(var(--anomaly))",opacity:"0.3",animate:{r:[8,15,8],opacity:[.3,0,.3]},transition:{duration:2,repeat:1/0}}),s.jsx(ne.circle,{cx:u||0,cy:p||0,r:"4",fill:h?"hsl(var(--critical))":"hsl(var(--anomaly))",initial:{scale:0},animate:{scale:1},transition:{delay:d*.05+.5,type:"spring"}})]},d)}),r.length>0&&s.jsx(ne.circle,{cx:100,cy:100-r[r.length-1].value/i*80,r:"4",fill:"hsl(var(--primary))",animate:{r:[4,6,4],opacity:[1,.7,1]},transition:{duration:1.5,repeat:1/0}})]}),s.jsx("div",{className:"flex justify-between mt-2 text-[10px] text-muted-foreground",children:r.filter((f,d)=>d%Math.max(1,Math.floor(r.length/6))===0).map((f,d)=>s.jsx("span",{children:f.time},d))}),n&&t.length>0&&s.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] text-muted-foreground bg-card/80 px-2 py-1 rounded",children:[((l=t[t.length-1])==null?void 0:l.eventCount)||0," events/interval"]})]})}function Fs({id:e,title:t,children:n,onRemove:r,className:i}){const{attributes:o,listeners:a,setNodeRef:c,transform:l,transition:f,isDragging:d}=Ms({id:e}),[u,p]=k.useState(!1),[h,x]=k.useState(!1),g={transform:it.Transform.toString(l),transition:f,zIndex:d||u?50:"auto",position:u?"fixed":"relative",top:u?0:"auto",left:u?0:"auto",right:u?0:"auto",bottom:u?0:"auto",width:u?"100vw":"auto",height:u?"100vh":"100%"},v=()=>{x(!0),setTimeout(()=>x(!1),1e3)},y=e==="feed"?"live-feed":e==="topology"?"topology-viz":void 0;return s.jsx("div",{ref:c,style:g,className:B("h-full",i,u&&"z-[100] p-4 bg-background/80 backdrop-blur-sm"),"data-tour":y,children:s.jsxs(ki,{className:B("h-full flex flex-col overflow-hidden transition-all duration-200 glass-card",d&&"shadow-2xl ring-2 ring-primary/50 opacity-80 rotate-1",u&&"border-primary/20 shadow-2xl"),children:[s.jsxs(Pi,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-4 border-b border-slate-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[!u&&s.jsx("div",{...o,...a,className:"cursor-grab active:cursor-grabbing p-1 hover:bg-slate-800 rounded transition-colors",children:s.jsx(Xi,{className:"w-4 h-4 text-slate-500"})}),s.jsxs(Ti,{className:"text-sm font-medium text-slate-200 flex items-center gap-2",children:[t,h&&s.jsx("span",{className:"text-xs text-muted-foreground animate-pulse",children:"Refreshing..."})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(je,{variant:"ghost",size:"icon",className:B("h-6 w-6 text-slate-500 hover:text-primary",h&&"animate-spin text-primary"),onClick:v,children:s.jsx(Oi,{className:"w-3 h-3"})}),s.jsx(je,{variant:"ghost",size:"icon",className:"h-6 w-6 text-slate-500 hover:text-primary",onClick:()=>p(!u),children:u?s.jsx(Ui,{className:"w-3 h-3"}):s.jsx(Yi,{className:"w-3 h-3"})}),r&&!u&&s.jsx(je,{variant:"ghost",size:"icon",className:"h-6 w-6 text-slate-500 hover:text-red-400 hover:bg-red-500/10",onClick:()=>r(e),children:s.jsx(ei,{className:"w-3 h-3"})})]})]}),s.jsx(Mi,{className:"flex-1 p-0 h-[calc(100%-60px)] relative overflow-hidden",children:n})]})})}const jr=[{id:"feed",title:"Live Event Feed",description:"Real-time stream of Wikipedia edits and anomalies.",icon:Vt,defaultSize:"medium"},{id:"timeline",title:"Anomaly Timeline",description:"Historical view of detected anomalies over time.",icon:qi,defaultSize:"large"},{id:"threats",title:"Threat Intelligence",description:"Latest threat indicators and C2 server detections.",icon:tr,defaultSize:"medium"},{id:"topology",title:"Persistence Diagram",description:"Topological data analysis visualization.",icon:Vi,defaultSize:"medium"},{id:"tda-stats",title:"Advanced TDA Metrics",description:"Wasserstein distance, landscapes, and multi-modal anomaly scores.",icon:qn,defaultSize:"medium"},{id:"barcode",title:"Persistence Barcode",description:"Interactive barcode showing feature lifetimes.",icon:$i,defaultSize:"large"},{id:"birth-death",title:"Birth-Death Plane",description:"Scatter plot of topological features.",icon:Bi,defaultSize:"medium"},{id:"filtration",title:"Filtration Animation",description:"Visual timeline of the filtration process.",icon:Wi,defaultSize:"medium"}];function Ws({open:e,onOpenChange:t,onAddWidget:n,activeWidgets:r}){return s.jsx(oi,{open:e,onOpenChange:t,children:s.jsxs(si,{className:"sm:max-w-[500px] bg-slate-900 border-slate-800 text-slate-200",children:[s.jsxs(ai,{children:[s.jsx(li,{children:"Add Widget"}),s.jsx(ci,{className:"text-slate-400",children:"Choose a widget to add to your dashboard."})]}),s.jsx("div",{className:"grid gap-4 py-4",children:jr.map(i=>{const o=r.includes(i.id);return s.jsxs("div",{className:B("flex items-start gap-4 p-3 rounded-lg border transition-all",o?"border-slate-800 bg-slate-800/50 opacity-50 cursor-not-allowed":"border-slate-700 bg-slate-800/30 hover:bg-slate-800 hover:border-primary/50 cursor-pointer"),onClick:()=>!o&&n(i.id),children:[s.jsx("div",{className:B("p-2 rounded-md",o?"bg-slate-700":"bg-primary/10 text-primary"),children:s.jsx(i.icon,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium leading-none mb-1.5",children:i.title}),s.jsx("p",{className:"text-xs text-slate-400 leading-snug",children:i.description})]}),!o&&s.jsx(je,{size:"icon",variant:"ghost",className:"h-8 w-8 text-primary",children:s.jsx(er,{className:"w-4 h-4"})})]},i.id)})}),s.jsx(di,{children:s.jsx(ui,{asChild:!0,children:s.jsx(je,{variant:"ghost",children:"Cancel"})})})]})})}function pe({className:e,...t}){return s.jsx("div",{className:B("animate-pulse rounded-md bg-muted",e),...t})}function Hs(){return s.jsxs("div",{className:"p-4 space-y-4 h-full",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(pe,{className:"h-12 w-12 rounded-full bg-slate-800"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(pe,{className:"h-4 w-[250px] bg-slate-800"}),s.jsx(pe,{className:"h-4 w-[200px] bg-slate-800"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(pe,{className:"h-4 w-full bg-slate-800"}),s.jsx(pe,{className:"h-4 w-full bg-slate-800"}),s.jsx(pe,{className:"h-4 w-3/4 bg-slate-800"})]}),s.jsxs("div",{className:"pt-4 grid grid-cols-3 gap-4",children:[s.jsx(pe,{className:"h-20 w-full bg-slate-800"}),s.jsx(pe,{className:"h-20 w-full bg-slate-800"}),s.jsx(pe,{className:"h-20 w-full bg-slate-800"})]})]})}let Zt={},Nr;function Kt(e={}){Zt={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function C(e){return e?Zt[e]:Zt}function Ks(e){Nr=e}function Z(){return Nr}let Dt={};function gt(e,t){Dt[e]=t}function Ne(e){var t;(t=Dt[e])==null||t.call(Dt)}function Vs(){Dt={}}function xt(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function Dr(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap(n=>{const r=n.matches(t),i=Array.from(n.querySelectorAll(t));return[...r?[n]:[],...i]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&Ys(n))}function Ar(e){if(!e||Xs(e))return;const t=C("smoothScroll"),n=e.offsetHeight>window.innerHeight;e.scrollIntoView({behavior:!t||qs(e)?"auto":"smooth",inline:"center",block:n?"start":"center"})}function qs(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}function Xs(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function Ys(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let At={};function $(e,t){At[e]=t}function j(e){return e?At[e]:At}function _n(){At={}}function Us(e,t,n,r){let i=j("__activeStagePosition");const o=i||n.getBoundingClientRect(),a=r.getBoundingClientRect(),c=xt(e,o.x,a.x-o.x,t),l=xt(e,o.y,a.y-o.y,t),f=xt(e,o.width,a.width-o.width,t),d=xt(e,o.height,a.height-o.height,t);i={x:c,y:l,width:f,height:d},Rr(i),$("__activeStagePosition",i)}function Er(e){if(!e)return;const t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};$("__activeStagePosition",n),Rr(n)}function Gs(){const e=j("__activeStagePosition"),t=j("__overlaySvg");if(!e)return;if(!t){console.warn("No stage svg found.");return}const n=window.innerWidth,r=window.innerHeight;t.setAttribute("viewBox",`0 0 ${n} ${r}`)}function Zs(e){const t=Js(e);document.body.appendChild(t),Tr(t,n=>{n.target.tagName==="path"&&Ne("overlayClick")}),$("__overlaySvg",t)}function Rr(e){const t=j("__overlaySvg");if(!t){Zs(e);return}const n=t.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",kr(e))}function Js(e){const t=window.innerWidth,n=window.innerHeight,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.classList.add("driver-overlay","driver-overlay-animated"),r.setAttribute("viewBox",`0 0 ${t} ${n}`),r.setAttribute("xmlSpace","preserve"),r.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("preserveAspectRatio","xMinYMin slice"),r.style.fillRule="evenodd",r.style.clipRule="evenodd",r.style.strokeLinejoin="round",r.style.strokeMiterlimit="2",r.style.zIndex="10000",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%";const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",kr(e)),i.style.fill=C("overlayColor")||"rgb(0,0,0)",i.style.opacity=`${C("overlayOpacity")}`,i.style.pointerEvents="auto",i.style.cursor="auto",r.appendChild(i),r}function kr(e){const t=window.innerWidth,n=window.innerHeight,r=C("stagePadding")||0,i=C("stageRadius")||0,o=e.width+r*2,a=e.height+r*2,c=Math.min(i,o/2,a/2),l=Math.floor(Math.max(c,0)),f=e.x-r+l,d=e.y-r,u=o-l*2,p=a-l*2;return`M${t},0L0,0L0,${n}L${t},${n}L${t},0Z
    M${f},${d} h${u} a${l},${l} 0 0 1 ${l},${l} v${p} a${l},${l} 0 0 1 -${l},${l} h-${u} a${l},${l} 0 0 1 -${l},-${l} v-${p} a${l},${l} 0 0 1 ${l},-${l} z`}function Qs(){const e=j("__overlaySvg");e&&e.remove()}function ea(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function $n(e){const{element:t}=e;let n=typeof t=="function"?t():typeof t=="string"?document.querySelector(t):t;n||(n=ea()),na(n,e)}function ta(){const e=j("__activeElement"),t=j("__activeStep");e&&(Er(e),Gs(),Or(e,t))}function na(e,t){var n;const r=Date.now(),i=j("__activeStep"),o=j("__activeElement")||e,a=!o||o===e,c=e.id==="driver-dummy-element",l=o.id==="driver-dummy-element",f=C("animate"),d=t.onHighlightStarted||C("onHighlightStarted"),u=(t==null?void 0:t.onHighlighted)||C("onHighlighted"),p=(i==null?void 0:i.onDeselected)||C("onDeselected"),h=C(),x=j();!a&&p&&p(l?void 0:o,i,{config:h,state:x,driver:Z()}),d&&d(c?void 0:e,t,{config:h,state:x,driver:Z()});const g=!a&&f;let v=!1;aa(),$("previousStep",i),$("previousElement",o),$("activeStep",t),$("activeElement",e);const y=()=>{if(j("__transitionCallback")!==y)return;const w=Date.now()-r,b=400-w<=400/2;t.popover&&b&&!v&&g&&(zn(e,t),v=!0),C("animate")&&w<400?Us(w,400,o,e):(Er(e),u&&u(c?void 0:e,t,{config:C(),state:j(),driver:Z()}),$("__transitionCallback",void 0),$("__previousStep",i),$("__previousElement",o),$("__activeStep",t),$("__activeElement",e)),window.requestAnimationFrame(y)};$("__transitionCallback",y),window.requestAnimationFrame(y),Ar(e),!g&&t.popover&&zn(e,t),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),((n=t.disableActiveInteraction)!=null?n:C("disableActiveInteraction"))&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function ra(){var e;(e=document.getElementById("driver-dummy-element"))==null||e.remove(),document.querySelectorAll(".driver-active-element").forEach(t=>{t.classList.remove("driver-active-element","driver-no-interaction"),t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-expanded"),t.removeAttribute("aria-controls")})}function st(){const e=j("__resizeTimeout");e&&window.cancelAnimationFrame(e),$("__resizeTimeout",window.requestAnimationFrame(ta))}function ia(e){var t;if(!j("isInitialized")||!(e.key==="Tab"||e.keyCode===9))return;const n=j("__activeElement"),r=(t=j("popover"))==null?void 0:t.wrapper,i=Dr([...r?[r]:[],...n?[n]:[]]),o=i[0],a=i[i.length-1];if(e.preventDefault(),e.shiftKey){const c=i[i.indexOf(document.activeElement)-1]||a;c==null||c.focus()}else{const c=i[i.indexOf(document.activeElement)+1]||o;c==null||c.focus()}}function Pr(e){var t;((t=C("allowKeyboardControl"))==null||t)&&(e.key==="Escape"?Ne("escapePress"):e.key==="ArrowRight"?Ne("arrowRightPress"):e.key==="ArrowLeft"&&Ne("arrowLeftPress"))}function Tr(e,t,n){const r=(i,o)=>{const a=i.target;e.contains(a)&&((!n||n(a))&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()),o==null||o(i))};document.addEventListener("pointerdown",r,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("pointerup",r,!0),document.addEventListener("mouseup",r,!0),document.addEventListener("click",i=>{r(i,t)},!0)}function oa(){window.addEventListener("keyup",Pr,!1),window.addEventListener("keydown",ia,!1),window.addEventListener("resize",st),window.addEventListener("scroll",st)}function sa(){window.removeEventListener("keyup",Pr),window.removeEventListener("resize",st),window.removeEventListener("scroll",st)}function aa(){const e=j("popover");e&&(e.wrapper.style.display="none")}function zn(e,t){var n,r;let i=j("popover");i&&document.body.removeChild(i.wrapper),i=ca(),document.body.appendChild(i.wrapper);const{title:o,description:a,showButtons:c,disableButtons:l,showProgress:f,nextBtnText:d=C("nextBtnText")||"Next &rarr;",prevBtnText:u=C("prevBtnText")||"&larr; Previous",progressText:p=C("progressText")||"{current} of {total}"}=t.popover||{};i.nextButton.innerHTML=d,i.previousButton.innerHTML=u,i.progress.innerHTML=p,o?(i.title.innerHTML=o,i.title.style.display="block"):i.title.style.display="none",a?(i.description.innerHTML=a,i.description.style.display="block"):i.description.style.display="none";const h=c||C("showButtons"),x=f||C("showProgress")||!1,g=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||x;i.closeButton.style.display=h.includes("close")?"block":"none",g?(i.footer.style.display="flex",i.progress.style.display=x?"block":"none",i.nextButton.style.display=h.includes("next")?"block":"none",i.previousButton.style.display=h.includes("previous")?"block":"none"):i.footer.style.display="none";const v=l||C("disableButtons")||[];v!=null&&v.includes("next")&&(i.nextButton.disabled=!0,i.nextButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("previous")&&(i.previousButton.disabled=!0,i.previousButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("close")&&(i.closeButton.disabled=!0,i.closeButton.classList.add("driver-popover-btn-disabled"));const y=i.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description");const w=i.arrow;w.className="driver-popover-arrow";const b=((n=t.popover)==null?void 0:n.popoverClass)||C("popoverClass")||"";y.className=`driver-popover ${b}`.trim(),Tr(i.wrapper,A=>{var E,T,O;const P=A.target,I=((E=t.popover)==null?void 0:E.onNextClick)||C("onNextClick"),_=((T=t.popover)==null?void 0:T.onPrevClick)||C("onPrevClick"),H=((O=t.popover)==null?void 0:O.onCloseClick)||C("onCloseClick");if(P.closest(".driver-popover-next-btn"))return I?I(e,t,{config:C(),state:j(),driver:Z()}):Ne("nextClick");if(P.closest(".driver-popover-prev-btn"))return _?_(e,t,{config:C(),state:j(),driver:Z()}):Ne("prevClick");if(P.closest(".driver-popover-close-btn"))return H?H(e,t,{config:C(),state:j(),driver:Z()}):Ne("closeClick")},A=>!(i!=null&&i.description.contains(A))&&!(i!=null&&i.title.contains(A))&&typeof A.className=="string"&&A.className.includes("driver-popover")),$("popover",i);const D=((r=t.popover)==null?void 0:r.onPopoverRender)||C("onPopoverRender");D&&D(i,{config:C(),state:j(),driver:Z()}),Or(e,t),Ar(y);const N=e.classList.contains("driver-dummy-element"),S=Dr([y,...N?[]:[e]]);S.length>0&&S[0].focus()}function Mr(){const e=j("popover");if(!(e!=null&&e.wrapper))return;const t=e.wrapper.getBoundingClientRect(),n=C("stagePadding")||0,r=C("popoverOffset")||0;return{width:t.width+n+r,height:t.height+n+r,realWidth:t.width,realHeight:t.height}}function Bn(e,t){const{elementDimensions:n,popoverDimensions:r,popoverPadding:i,popoverArrowDimensions:o}=t;return e==="start"?Math.max(Math.min(n.top-i,window.innerHeight-r.realHeight-o.width),o.width):e==="end"?Math.max(Math.min(n.top-(r==null?void 0:r.realHeight)+n.height+i,window.innerHeight-(r==null?void 0:r.realHeight)-o.width),o.width):e==="center"?Math.max(Math.min(n.top+n.height/2-(r==null?void 0:r.realHeight)/2,window.innerHeight-(r==null?void 0:r.realHeight)-o.width),o.width):0}function Fn(e,t){const{elementDimensions:n,popoverDimensions:r,popoverPadding:i,popoverArrowDimensions:o}=t;return e==="start"?Math.max(Math.min(n.left-i,window.innerWidth-r.realWidth-o.width),o.width):e==="end"?Math.max(Math.min(n.left-(r==null?void 0:r.realWidth)+n.width+i,window.innerWidth-(r==null?void 0:r.realWidth)-o.width),o.width):e==="center"?Math.max(Math.min(n.left+n.width/2-(r==null?void 0:r.realWidth)/2,window.innerWidth-(r==null?void 0:r.realWidth)-o.width),o.width):0}function Or(e,t){const n=j("popover");if(!n)return;const{align:r="start",side:i="left"}=(t==null?void 0:t.popover)||{},o=r,a=e.id==="driver-dummy-element"?"over":i,c=C("stagePadding")||0,l=Mr(),f=n.arrow.getBoundingClientRect(),d=e.getBoundingClientRect(),u=d.top-l.height;let p=u>=0;const h=window.innerHeight-(d.bottom+l.height);let x=h>=0;const g=d.left-l.width;let v=g>=0;const y=window.innerWidth-(d.right+l.width);let w=y>=0;const b=!p&&!x&&!v&&!w;let D=a;if(a==="top"&&p?w=v=x=!1:a==="bottom"&&x?w=v=p=!1:a==="left"&&v?w=p=x=!1:a==="right"&&w&&(v=p=x=!1),a==="over"){const N=window.innerWidth/2-l.realWidth/2,S=window.innerHeight/2-l.realHeight/2;n.wrapper.style.left=`${N}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto"}else if(b){const N=window.innerWidth/2-(l==null?void 0:l.realWidth)/2,S=10;n.wrapper.style.left=`${N}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${S}px`,n.wrapper.style.top="auto"}else if(v){const N=Math.min(g,window.innerWidth-(l==null?void 0:l.realWidth)-f.width),S=Bn(o,{elementDimensions:d,popoverDimensions:l,popoverPadding:c,popoverArrowDimensions:f});n.wrapper.style.left=`${N}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",D="left"}else if(w){const N=Math.min(y,window.innerWidth-(l==null?void 0:l.realWidth)-f.width),S=Bn(o,{elementDimensions:d,popoverDimensions:l,popoverPadding:c,popoverArrowDimensions:f});n.wrapper.style.right=`${N}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",D="right"}else if(p){const N=Math.min(u,window.innerHeight-l.realHeight-f.width);let S=Fn(o,{elementDimensions:d,popoverDimensions:l,popoverPadding:c,popoverArrowDimensions:f});n.wrapper.style.top=`${N}px`,n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",D="top"}else if(x){const N=Math.min(h,window.innerHeight-(l==null?void 0:l.realHeight)-f.width);let S=Fn(o,{elementDimensions:d,popoverDimensions:l,popoverPadding:c,popoverArrowDimensions:f});n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom=`${N}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",D="bottom"}b?n.arrow.classList.add("driver-popover-arrow-none"):la(o,D,e)}function la(e,t,n){const r=j("popover");if(!r)return;const i=n.getBoundingClientRect(),o=Mr(),a=r.arrow,c=o.width,l=window.innerWidth,f=i.width,d=i.left,u=o.height,p=window.innerHeight,h=i.top,x=i.height;a.className="driver-popover-arrow";let g=t,v=e;if(t==="top"?(d+f<=0?(g="right",v="end"):d+f-c<=0&&(g="top",v="start"),d>=l?(g="left",v="end"):d+c>=l&&(g="top",v="end")):t==="bottom"?(d+f<=0?(g="right",v="start"):d+f-c<=0&&(g="bottom",v="start"),d>=l?(g="left",v="start"):d+c>=l&&(g="bottom",v="end")):t==="left"?(h+x<=0?(g="bottom",v="end"):h+x-u<=0&&(g="left",v="start"),h>=p?(g="top",v="end"):h+u>=p&&(g="left",v="end")):t==="right"&&(h+x<=0?(g="bottom",v="start"):h+x-u<=0&&(g="right",v="start"),h>=p?(g="top",v="start"):h+u>=p&&(g="right",v="end")),!g)a.classList.add("driver-popover-arrow-none");else{a.classList.add(`driver-popover-arrow-side-${g}`),a.classList.add(`driver-popover-arrow-align-${v}`);const y=n.getBoundingClientRect(),w=a.getBoundingClientRect(),b=C("stagePadding")||0,D=y.left-b<window.innerWidth&&y.right+b>0&&y.top-b<window.innerHeight&&y.bottom+b>0;t==="bottom"&&D&&(w.x>y.x&&w.x+w.width<y.x+y.width?r.wrapper.style.transform="translateY(0)":(a.classList.remove(`driver-popover-arrow-align-${v}`),a.classList.add("driver-popover-arrow-none"),r.wrapper.style.transform=`translateY(-${b/2}px)`))}}function ca(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const r=document.createElement("div");r.id="driver-popover-description",r.classList.add("driver-popover-description"),r.style.display="none",r.innerText="Popover description is here";const i=document.createElement("button");i.type="button",i.classList.add("driver-popover-close-btn"),i.setAttribute("aria-label","Close"),i.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const a=document.createElement("span");a.classList.add("driver-popover-progress-text"),a.innerText="";const c=document.createElement("span");c.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const f=document.createElement("button");return f.type="button",f.classList.add("driver-popover-next-btn"),f.innerHTML="Next &rarr;",c.appendChild(l),c.appendChild(f),o.appendChild(a),o.appendChild(c),e.appendChild(i),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(o),{wrapper:e,arrow:t,title:n,description:r,footer:o,previousButton:l,nextButton:f,closeButton:i,footerButtons:c,progress:a}}function da(){var e;const t=j("popover");t&&((e=t.wrapper.parentElement)==null||e.removeChild(t.wrapper))}function ua(e={}){Kt(e);function t(){C("allowClose")&&d()}function n(){const p=C("overlayClickBehavior");if(C("allowClose")&&p==="close"){d();return}if(typeof p=="function"){const h=j("__activeStep"),x=j("__activeElement");p(x,h,{config:C(),state:j(),driver:Z()});return}p==="nextStep"&&r()}function r(){const p=j("activeIndex"),h=C("steps")||[];if(typeof p>"u")return;const x=p+1;h[x]?f(x):d()}function i(){const p=j("activeIndex"),h=C("steps")||[];if(typeof p>"u")return;const x=p-1;h[x]?f(x):d()}function o(p){(C("steps")||[])[p]?f(p):d()}function a(){var p;if(j("__transitionCallback"))return;const h=j("activeIndex"),x=j("__activeStep"),g=j("__activeElement");if(typeof h>"u"||typeof x>"u"||typeof j("activeIndex")>"u")return;const v=((p=x.popover)==null?void 0:p.onPrevClick)||C("onPrevClick");if(v)return v(g,x,{config:C(),state:j(),driver:Z()});i()}function c(){var p;if(j("__transitionCallback"))return;const h=j("activeIndex"),x=j("__activeStep"),g=j("__activeElement");if(typeof h>"u"||typeof x>"u")return;const v=((p=x.popover)==null?void 0:p.onNextClick)||C("onNextClick");if(v)return v(g,x,{config:C(),state:j(),driver:Z()});r()}function l(){j("isInitialized")||($("isInitialized",!0),document.body.classList.add("driver-active",C("animate")?"driver-fade":"driver-simple"),oa(),gt("overlayClick",n),gt("escapePress",t),gt("arrowLeftPress",a),gt("arrowRightPress",c))}function f(p=0){var h,x,g,v,y,w,b,D;const N=C("steps");if(!N){console.error("No steps to drive through"),d();return}if(!N[p]){d();return}$("__activeOnDestroyed",document.activeElement),$("activeIndex",p);const S=N[p],A=N[p+1],E=N[p-1],T=((h=S.popover)==null?void 0:h.doneBtnText)||C("doneBtnText")||"Done",O=C("allowClose"),P=typeof((x=S.popover)==null?void 0:x.showProgress)<"u"?(g=S.popover)==null?void 0:g.showProgress:C("showProgress"),I=(((v=S.popover)==null?void 0:v.progressText)||C("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${p+1}`).replace("{{total}}",`${N.length}`),_=((y=S.popover)==null?void 0:y.showButtons)||C("showButtons"),H=["next","previous",...O?["close"]:[]].filter(Ae=>!(_!=null&&_.length)||_.includes(Ae)),Ce=((w=S.popover)==null?void 0:w.onNextClick)||C("onNextClick"),De=((b=S.popover)==null?void 0:b.onPrevClick)||C("onPrevClick"),K=((D=S.popover)==null?void 0:D.onCloseClick)||C("onCloseClick");$n({...S,popover:{showButtons:H,nextBtnText:A?void 0:T,disableButtons:[...E?[]:["previous"]],showProgress:P,progressText:I,onNextClick:Ce||(()=>{A?f(p+1):d()}),onPrevClick:De||(()=>{f(p-1)}),onCloseClick:K||(()=>{d()}),...(S==null?void 0:S.popover)||{}}})}function d(p=!0){const h=j("__activeElement"),x=j("__activeStep"),g=j("__activeOnDestroyed"),v=C("onDestroyStarted");if(p&&v){const b=!h||(h==null?void 0:h.id)==="driver-dummy-element";v(b?void 0:h,x,{config:C(),state:j(),driver:Z()});return}const y=(x==null?void 0:x.onDeselected)||C("onDeselected"),w=C("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),sa(),da(),ra(),Qs(),Vs(),_n(),h&&x){const b=h.id==="driver-dummy-element";y&&y(b?void 0:h,x,{config:C(),state:j(),driver:Z()}),w&&w(b?void 0:h,x,{config:C(),state:j(),driver:Z()})}g&&g.focus()}const u={isActive:()=>j("isInitialized")||!1,refresh:st,drive:(p=0)=>{l(),f(p)},setConfig:Kt,setSteps:p=>{_n(),Kt({...C(),steps:p})},getConfig:C,getState:j,getActiveIndex:()=>j("activeIndex"),isFirstStep:()=>j("activeIndex")===0,isLastStep:()=>{const p=C("steps")||[],h=j("activeIndex");return h!==void 0&&h===p.length-1},getActiveStep:()=>j("activeStep"),getActiveElement:()=>j("activeElement"),getPreviousElement:()=>j("previousElement"),getPreviousStep:()=>j("previousStep"),moveNext:r,movePrevious:i,moveTo:o,hasNextStep:()=>{const p=C("steps")||[],h=j("activeIndex");return h!==void 0&&!!p[h+1]},hasPreviousStep:()=>{const p=C("steps")||[],h=j("activeIndex");return h!==void 0&&!!p[h-1]},highlight:p=>{l(),$n({...p,popover:p.popover?{showButtons:[],showProgress:!1,progressText:"",...p.popover}:void 0})},destroy:()=>{d(!1)}};return Ks(u),u}function fa(){const[e,t]=m.useState(!1);m.useEffect(()=>{if(localStorage.getItem("toposhape_tour_seen"))t(!0);else{const i=setTimeout(()=>{n()},2e3);return()=>clearTimeout(i)}},[]);const n=()=>{const r=ua({showProgress:!0,animate:!0,steps:[{element:"nav",popover:{title:"Welcome to TopoShape Insights",description:"Your advanced platform for topological data analysis and anomaly detection.",side:"right",align:"start"}},{element:'[data-tour="dashboard-widgets"]',popover:{title:"Interactive Dashboard",description:'Drag and drop widgets to customize your view. Click the "Add Widget" button to add more.',side:"bottom",align:"start"}},{element:'[data-tour="theme-toggle"]',popover:{title:"Theme & Customization",description:"Switch between Dark and Light modes here. Use Cmd+K to open the Command Palette for quick actions.",side:"bottom",align:"end"}},{element:'[data-tour="live-feed"]',popover:{title:"Real-time Feed",description:"Watch live events stream in. TDA algorithms process these in real-time to detect anomalies.",side:"left",align:"start"}},{element:'[data-tour="topology-viz"]',popover:{title:"Topological Analysis",description:"Visualize persistence diagrams and Betti numbers to understand the shape of your data.",side:"left",align:"start"}}],onDestroyStarted:()=>{(!r.hasNextStep()||confirm("Are you sure you want to stop the tour?"))&&(r.destroy(),localStorage.setItem("toposhape_tour_seen","true"),t(!0))}});r.drive()};return s.jsx(je,{variant:"ghost",size:"icon",className:"fixed bottom-4 right-4 z-50 rounded-full w-10 h-10 bg-primary/10 text-primary hover:bg-primary/20 shadow-lg backdrop-blur-sm border border-primary/20",onClick:n,title:"Start Tour",children:s.jsx(Fi,{className:"w-5 h-5"})})}function pa(e){const[t,n]=m.useState(null),r=m.useRef(null),i=m.useRef(0),o=m.useRef(!1);return m.useEffect(()=>(r.current=new Worker(new URL("/WINTER-2026/assets/tda.worker-1-1pGS40.js",import.meta.url),{type:"module"}),r.current.onmessage=a=>{const{type:c,payload:l}=a.data;c==="RESULT"?(n(l),o.current=!1):c==="ERROR"&&(console.error("TDA Worker Error:",l.message),o.current=!1)},r.current.postMessage({type:"INIT",payload:{windowSize:50}}),()=>{var a;(a=r.current)==null||a.terminate()}),[]),m.useEffect(()=>{var c;const a=Date.now();a-i.current<2e3||o.current||e.length<10||(o.current=!0,i.current=a,(c=r.current)==null||c.postMessage({type:"ANALYZE",payload:{events:e,windowMs:3e4}}))},[e]),t}function ha(e,t=[]){let n=[];function r(o,a){const c=m.createContext(a);c.displayName=o+"Context";const l=n.length;n=[...n,a];const f=u=>{var y;const{scope:p,children:h,...x}=u,g=((y=p==null?void 0:p[e])==null?void 0:y[l])||c,v=m.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:v,children:h})};f.displayName=o+"Provider";function d(u,p){var g;const h=((g=p==null?void 0:p[e])==null?void 0:g[l])||c,x=m.useContext(h);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${o}\``)}return[f,d]}const i=()=>{const o=n.map(a=>m.createContext(a));return function(c){const l=(c==null?void 0:c[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...c,[e]:l}}),[c,l])}};return i.scopeName=e,[r,ma(i,...t)]}function ma(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((c,{useScope:l,scopeName:f})=>{const u=l(o)[`__scope${f}`];return{...c,...u}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var va=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ir=va.reduce((e,t)=>{const n=ri(`Primitive.${t}`),r=m.forwardRef((i,o)=>{const{asChild:a,...c}=i,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(l,{...c,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),un="Progress",fn=100,[ga]=ha(un),[xa,ya]=ga(un),Lr=m.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:o=ba,...a}=e;(i||i===0)&&!Wn(i)&&console.error(wa(`${i}`,"Progress"));const c=Wn(i)?i:fn;r!==null&&!Hn(r,c)&&console.error(Ca(`${r}`,"Progress"));const l=Hn(r,c)?r:null,f=Et(l)?o(l,c):void 0;return s.jsx(xa,{scope:n,value:l,max:c,children:s.jsx(Ir.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Et(l)?l:void 0,"aria-valuetext":f,role:"progressbar","data-state":zr(l,c),"data-value":l??void 0,"data-max":c,...a,ref:t})})});Lr.displayName=un;var _r="ProgressIndicator",$r=m.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=ya(_r,n);return s.jsx(Ir.div,{"data-state":zr(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});$r.displayName=_r;function ba(e,t){return`${Math.round(e/t*100)}%`}function zr(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Et(e){return typeof e=="number"}function Wn(e){return Et(e)&&!isNaN(e)&&e>0}function Hn(e,t){return Et(e)&&!isNaN(e)&&e<=t&&e>=0}function wa(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fn}\`.`}function Ca(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fn} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Br=Lr,Sa=$r;const wt=m.forwardRef(({className:e,value:t,...n},r)=>s.jsx(Br,{ref:r,className:B("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:s.jsx(Sa,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));wt.displayName=Br.displayName;function ja(){const{events:e}=$e(),t=pa(e);if(!t)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground space-y-2",children:[s.jsx(Vt,{className:"w-8 h-8 animate-pulse text-primary/50"}),s.jsx("p",{className:"text-sm",children:"Initializing TDA Engine..."})]});const{score:n,processingTime:r}=t,i=n.isAnomaly;return s.jsxs("div",{className:"p-4 space-y-6 h-full overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i?s.jsx(tr,{className:"w-5 h-5 text-red-500 animate-pulse"}):s.jsx(Gi,{className:"w-5 h-5 text-green-500"}),s.jsx("span",{className:"font-medium text-sm",children:"System Status"})]}),s.jsx(Un,{variant:i?"destructive":"outline",className:B(i?"animate-pulse":"bg-green-500/10 text-green-500 border-green-500/20"),children:i?"ANOMALY DETECTED":"STABLE"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[s.jsx(Vt,{className:"w-3 h-3"})," Wasserstein Distance"]}),s.jsx("span",{className:"font-mono",children:n.components.wasserstein.toFixed(2)})]}),s.jsx(wt,{value:Math.min(n.components.wasserstein*10,100),className:"h-1.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[s.jsx(qn,{className:"w-3 h-3"})," Landscape Norm (Z-Score)"]}),s.jsx("span",{className:"font-mono",children:n.components.landscape.toFixed(2)})]}),s.jsx(wt,{value:Math.min(n.components.landscape*20,100),className:"h-1.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-muted-foreground",children:"Combined Anomaly Score"}),s.jsx("span",{className:B("font-mono font-bold",n.totalScore>3?"text-red-400":"text-green-400"),children:n.totalScore.toFixed(2)})]}),s.jsx(wt,{value:Math.min(n.totalScore*20,100),className:B("h-2",n.totalScore>3?"bg-red-900/20":"bg-green-900/20")})]})]}),s.jsxs("div",{className:"pt-4 border-t border-border/50 grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Confidence"}),s.jsxs("p",{className:"text-lg font-bold text-primary",children:[(n.confidence*100).toFixed(0),"%"]})]}),s.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg",children:[s.jsxs("p",{className:"text-xs text-muted-foreground mb-1 flex items-center gap-1",children:[s.jsx(Ii,{className:"w-3 h-3"})," Latency"]}),s.jsxs("p",{className:"text-lg font-bold font-mono",children:[r.toFixed(1),"ms"]})]})]})]})}function Na({data:e,height:t=300}){const{theme:n}=Xn(),r=m.useMemo(()=>e.map((o,a)=>({...o,index:a,lifetime:o.death-o.birth})).sort((o,a)=>a.death-a.birth-(o.death-o.birth)),[e]);r.filter(o=>o.dimension===0),r.filter(o=>o.dimension===1),r.filter(o=>o.dimension===2);const i=Math.max(...e.map(o=>o.death),1);return s.jsxs("div",{className:"w-full h-full min-h-[300px] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Persistence Barcode"}),s.jsxs("div",{className:"flex gap-2 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," H0"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," H1"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"})," H2"]})]})]}),s.jsxs("div",{className:"flex-1 relative border-l border-b border-border/50 m-2",children:[s.jsx("svg",{width:"100%",height:"100%",className:"overflow-visible",children:r.map((o,a)=>{const c=a/r.length*100+"%",l=o.birth/i*100+"%",f=o.death/i*100+"%",d=o.dimension===0?"#3b82f6":o.dimension===1?"#22c55e":"#f97316";return s.jsxs("g",{className:"group cursor-pointer",children:[s.jsx("line",{x1:l,y1:c,x2:f,y2:c,stroke:d,strokeWidth:"4",strokeLinecap:"round",className:"opacity-70 group-hover:opacity-100 group-hover:stroke-[6px] transition-all"}),s.jsx("title",{children:`Dim ${o.dimension}: [${o.birth.toFixed(2)}, ${o.death.toFixed(2)}]`})]},o.id)})}),s.jsxs("div",{className:"absolute -bottom-6 left-0 right-0 flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0"}),s.jsx("span",{children:"Time "}),s.jsx("span",{children:i.toFixed(1)})]})]})]})}function Le(e){"@babel/helpers - typeof";return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(e)}function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hr(r.key),r)}}function Ea(e,t,n){return t&&Aa(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ra(e,t,n){return t=Rt(t),ka(e,Fr()?Reflect.construct(t,n||[],Rt(e).constructor):t.apply(e,n))}function ka(e,t){if(t&&(Le(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pa(e)}function Pa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fr=function(){return!!e})()}function Rt(e){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rt(e)}function Ta(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}function Jt(e,t){return Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jt(e,t)}function Wr(e,t,n){return t=Hr(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hr(e){var t=Ma(e,"string");return Le(t)=="symbol"?t:t+""}function Ma(e,t){if(Le(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Le(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var It=function(e){function t(){return Da(this,t),Ra(this,t,arguments)}return Ta(t,e),Ea(t,[{key:"render",value:function(){return null}}])}(m.Component);Wr(It,"displayName","ZAxis");Wr(It,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Oa=["option","isActive"];function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},et.apply(this,arguments)}function Ia(e,t){if(e==null)return{};var n=La(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function La(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _a(e){var t=e.option,n=e.isActive,r=Ia(e,Oa);return typeof t=="string"?m.createElement(wn,et({option:m.createElement(hi,et({type:t},r)),isActive:n,shapeType:"symbols"},r)):m.createElement(wn,et({option:t,isActive:n,shapeType:"symbols"},r))}function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt.apply(this,arguments)}function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kn(Object(n),!0).forEach(function(r){we(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vr(r.key),r)}}function za(e,t,n){return t&&Vn(e.prototype,t),n&&Vn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ba(e,t,n){return t=kt(t),Fa(e,Kr()?Reflect.construct(t,n||[],kt(e).constructor):t.apply(e,n))}function Fa(e,t){if(t&&(_e(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wa(e)}function Wa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kr=function(){return!!e})()}function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kt(e)}function Ha(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}function Qt(e,t){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Qt(e,t)}function we(e,t,n){return t=Vr(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e){var t=Ka(e,"string");return _e(t)=="symbol"?t:t+""}function Ka(e,t){if(_e(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_e(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dt=function(e){function t(){var n;$a(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Ba(this,t,[].concat(i)),we(n,"state",{isAnimationFinished:!1}),we(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),we(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),we(n,"id",wi("recharts-scatter-")),n}return Ha(t,e),za(t,[{key:"renderSymbolsStatically",value:function(r){var i=this,o=this.props,a=o.shape,c=o.activeShape,l=o.activeIndex,f=zt(this.props,!1);return r.map(function(d,u){var p=l===u,h=p?c:a,x=ee(ee({},f),d);return k.createElement(Ue,tt({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(u)},mi(i.props,d,u),{role:"img"}),k.createElement(_a,tt({option:h,isActive:p,key:"symbol-".concat(u)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,i=this.props,o=i.points,a=i.isAnimationActive,c=i.animationBegin,l=i.animationDuration,f=i.animationEasing,d=i.animationId,u=this.state.prevPoints;return k.createElement(vi,{begin:c,duration:l,isActive:a,easing:f,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var h=p.t,x=o.map(function(g,v){var y=u&&u[v];if(y){var w=mt(y.cx,g.cx),b=mt(y.cy,g.cy),D=mt(y.size,g.size);return ee(ee({},g),{},{cx:w(h),cy:b(h),size:D(h)})}var N=mt(0,g.size);return ee(ee({},g),{},{size:N(h)})});return k.createElement(Ue,null,r.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var r=this.props,i=r.points,o=r.isAnimationActive,a=this.state.prevPoints;return o&&i&&i.length&&(!a||!Li(a,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,a=i.xAxis,c=i.yAxis,l=i.children,f=Gn(l,gi);return f?f.map(function(d,u){var p=d.props,h=p.direction,x=p.dataKey;return k.cloneElement(d,{key:"".concat(h,"-").concat(x,"-").concat(o[u]),data:o,xAxis:a,yAxis:c,layout:h==="x"?"vertical":"horizontal",dataPointFormatter:function(v,y){return{x:v.cx,y:v.cy,value:h==="x"?+v.node.x:+v.node.y,errorVal:yt(v,y)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,i=r.points,o=r.line,a=r.lineType,c=r.lineJointType,l=zt(this.props,!1),f=zt(o,!1),d,u;if(a==="joint")d=i.map(function(b){return{x:b.cx,y:b.cy}});else if(a==="fitting"){var p=xi(i),h=p.xmin,x=p.xmax,g=p.a,v=p.b,y=function(D){return g*D+v};d=[{x:h,y:y(h)},{x,y:y(x)}]}var w=ee(ee(ee({},l),{},{fill:"none",stroke:l&&l.fill},f),{},{points:d});return k.isValidElement(o)?u=k.cloneElement(o,w):_i(o)?u=o(w):u=k.createElement(yi,tt({},w,{type:c})),k.createElement(Ue,{className:"recharts-scatter-line",key:"recharts-scatter-line"},u)}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.points,a=r.line,c=r.className,l=r.xAxis,f=r.yAxis,d=r.left,u=r.top,p=r.width,h=r.height,x=r.id,g=r.isAnimationActive;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,y=ti("recharts-scatter",c),w=l&&l.allowDataOverflow,b=f&&f.allowDataOverflow,D=w||b,N=Oe(x)?this.id:x;return k.createElement(Ue,{className:y,clipPath:D?"url(#clipPath-".concat(N,")"):null},w||b?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(N)},k.createElement("rect",{x:w?d:d-p/2,y:b?u:u-h/2,width:w?p:p*2,height:b?h:h*2}))):null,a&&this.renderLine(),this.renderErrorBar(),k.createElement(Ue,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||v)&&bi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}}])}(m.PureComponent);we(dt,"displayName","Scatter");we(dt,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ci.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});we(dt,"getComposedData",function(e){var t=e.xAxis,n=e.yAxis,r=e.zAxis,i=e.item,o=e.displayedData,a=e.xAxisTicks,c=e.yAxisTicks,l=e.offset,f=i.props.tooltipType,d=Gn(i.props.children,Zn),u=Oe(t.dataKey)?i.props.dataKey:t.dataKey,p=Oe(n.dataKey)?i.props.dataKey:n.dataKey,h=r&&r.dataKey,x=r?r.range:It.defaultProps.range,g=x&&x[0],v=t.scale.bandwidth?t.scale.bandwidth():0,y=n.scale.bandwidth?n.scale.bandwidth():0,w=o.map(function(b,D){var N=yt(b,u),S=yt(b,p),A=!Oe(h)&&yt(b,h)||"-",E=[{name:Oe(t.dataKey)?i.props.name:t.name||t.dataKey,unit:t.unit||"",value:N,payload:b,dataKey:u,type:f},{name:Oe(n.dataKey)?i.props.name:n.name||n.dataKey,unit:n.unit||"",value:S,payload:b,dataKey:p,type:f}];A!=="-"&&E.push({name:r.name||r.dataKey,unit:r.unit||"",value:A,payload:b,dataKey:h,type:f});var T=Cn({axis:t,ticks:a,bandSize:v,entry:b,index:D,dataKey:u}),O=Cn({axis:n,ticks:c,bandSize:y,entry:b,index:D,dataKey:p}),P=A!=="-"?r.scale(A):g,I=Math.sqrt(Math.max(P,0)/Math.PI);return ee(ee({},b),{},{cx:T,cy:O,x:T-I,y:O-I,xAxis:t,yAxis:n,zAxis:r,width:2*I,height:2*I,size:P,node:{x:N,y:S,z:A},tooltipPayload:E,tooltipPosition:{x:T,y:O},payload:b},d&&d[D]&&d[D].props)});return ee({points:w},l)});var Va=Si({chartName:"ScatterChart",GraphicalChild:dt,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:Jn},{axisType:"yAxis",AxisComp:Qn},{axisType:"zAxis",AxisComp:It}],formatAxisMap:ji});function qa({data:e}){const{theme:t}=Xn(),n=t==="dark",r=({active:i,payload:o})=>{if(i&&o&&o.length){const a=o[0].payload;return s.jsxs("div",{className:"bg-background/90 backdrop-blur border border-border p-2 rounded shadow-lg text-xs",children:[s.jsxs("p",{className:"font-bold mb-1",children:["Feature ",a.id]}),s.jsxs("p",{children:["Dimension: H",a.dimension]}),s.jsxs("p",{children:["Birth: ",a.birth.toFixed(3)]}),s.jsxs("p",{children:["Death: ",a.death.toFixed(3)]}),s.jsxs("p",{children:["Persistence: ",(a.death-a.birth).toFixed(3)]})]})}return null};return s.jsxs("div",{className:"w-full h-full min-h-[300px] flex flex-col",children:[s.jsx("div",{className:"flex items-center justify-between mb-2 px-2",children:s.jsx("h3",{className:"text-sm font-medium",children:"Birth-Death Plane"})}),s.jsx("div",{className:"flex-1",children:s.jsx(Ni,{width:"100%",height:"100%",children:s.jsxs(Va,{margin:{top:20,right:20,bottom:20,left:20},children:[s.jsx(Jn,{type:"number",dataKey:"birth",name:"Birth",label:{value:"Birth Time",position:"bottom",offset:0,fontSize:12,fill:"currentColor"},tick:{fontSize:10},stroke:"currentColor",className:"text-muted-foreground"}),s.jsx(Qn,{type:"number",dataKey:"death",name:"Death",label:{value:"Death Time",angle:-90,position:"left",offset:0,fontSize:12,fill:"currentColor"},tick:{fontSize:10},stroke:"currentColor",className:"text-muted-foreground"}),s.jsx(Di,{content:s.jsx(r,{}),cursor:{strokeDasharray:"3 3"}}),s.jsx(Ai,{segment:[{x:0,y:0},{x:1,y:1}],stroke:n?"#475569":"#cbd5e1",strokeDasharray:"3 3"}),s.jsx(dt,{name:"Features",data:e,children:e.map((i,o)=>s.jsx(Zn,{fill:i.dimension===0?"#3b82f6":i.dimension===1?"#22c55e":"#f97316",fillOpacity:.6,strokeWidth:1},`cell-${o}`))})]})})})]})}function Xa({data:e}){const[t,n]=m.useState(0),[r,i]=m.useState(!1),o=m.useRef(),a=Math.max(...e.map(d=>d.death),1),c=d=>{n(u=>{const p=u+.005;return p>1.1?0:p}),o.current=requestAnimationFrame(c)};m.useEffect(()=>(r?o.current=requestAnimationFrame(c):o.current&&cancelAnimationFrame(o.current),()=>{o.current&&cancelAnimationFrame(o.current)}),[r]);const l=e.filter(d=>d.birth/a<=t&&d.death/a>=t),f=e.filter(d=>d.death/a<t);return s.jsxs("div",{className:"w-full h-full flex flex-col p-4 relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 z-10",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Filtration Process"}),s.jsx("button",{onClick:()=>i(!r),className:"text-xs bg-primary/20 hover:bg-primary/30 text-primary px-2 py-1 rounded transition-colors",children:r?"Pause":"Play"})]}),s.jsxs("div",{className:"flex-1 relative border border-border/30 rounded-lg bg-slate-950/50 backdrop-blur-sm overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[s.jsx(Yn,{children:l.map(d=>s.jsx(ne.div,{layoutId:d.id,initial:{scale:0,opacity:0},animate:{scale:1,opacity:.8},exit:{scale:.5,opacity:0},className:`absolute rounded-full border-2 ${d.dimension===0?"border-blue-500 bg-blue-500/20":d.dimension===1?"border-green-500 bg-green-500/20":"border-orange-500 bg-orange-500/20"}`,style:{left:`${parseInt(d.id.slice(-4),16)%80+10}%`,top:`${parseInt(d.id.slice(-3),16)%80+10}%`,width:"40px",height:"40px"}},d.id))}),f.map(d=>s.jsx("div",{className:`absolute rounded-full border ${d.dimension===0?"border-blue-900/30":d.dimension===1?"border-green-900/30":"border-orange-900/30"}`,style:{left:`${parseInt(d.id.slice(-4),16)%80+10}%`,top:`${parseInt(d.id.slice(-3),16)%80+10}%`,width:"40px",height:"40px",opacity:.2}},d.id))]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-primary/10 border-t border-primary/30 transition-all duration-75 ease-linear pointer-events-none",style:{height:`${t*100}%`}}),s.jsxs("div",{className:"absolute top-2 right-2 font-mono text-xs text-muted-foreground",children:[" = ",t.toFixed(3)]})]})]})}const Ya=()=>{const{persistenceDiagram:e}=$e();return s.jsx(Na,{data:e})},Ua=()=>{const{persistenceDiagram:e}=$e();return s.jsx(qa,{data:e})},Ga=()=>{const{persistenceDiagram:e}=$e();return s.jsx(Xa,{data:e})};function hl(){const[e,t]=m.useState(["feed","timeline","threats","topology"]),[n,r]=m.useState(!1),[i,o]=m.useState(!0),{toast:a}=ni();m.useEffect(()=>{const h=setTimeout(()=>o(!1),1500);return()=>clearTimeout(h)},[]);const c=po(jn(ln),jn(sn,{coordinateGetter:Ls})),l=h=>{const{active:x,over:g}=h;x.id!==g.id&&t(v=>{const y=v.indexOf(x.id),w=v.indexOf(g.id);return cn(v,y,w)})},f=h=>{t(e.filter(x=>x!==h)),a({title:"Widget Removed",description:"The widget has been removed from your dashboard."})},d=h=>{e.includes(h)||(t([...e,h]),r(!1),a({title:"Widget Added",description:"The widget has been added to your dashboard."}))},u=h=>{const x=jr.find(g=>g.id===h);return x?x.title:"Widget"},p=h=>{if(i)return s.jsx(Hs,{});switch(h){case"feed":return s.jsx(zs,{className:"h-full"});case"timeline":return s.jsx(Bs,{});case"threats":return s.jsx(Ei,{});case"topology":return s.jsx(Ri,{});case"tda-stats":return s.jsx(ja,{});case"barcode":return s.jsx(Ya,{});case"birth-death":return s.jsx(Ua,{});case"filtration":return s.jsx(Ga,{});default:return null}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(fi,{}),s.jsxs("main",{className:"pt-20 pb-8 px-4 sm:px-6 lg:px-8 max-w-[1800px] mx-auto transition-all duration-300 md:pl-[280px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),s.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Real-time monitoring and anomaly detection."})]}),s.jsxs(je,{size:"sm",onClick:()=>r(!0),children:[s.jsx(er,{className:"w-4 h-4 mr-2"})," Add Widget"]})]}),s.jsx(ms,{sensors:c,collisionDetection:mo,onDragEnd:l,children:s.jsx(Ds,{items:e,strategy:dn,children:s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 auto-rows-[400px]","data-tour":"dashboard-widgets",children:e.map(h=>s.jsx(Fs,{id:h,title:u(h),onRemove:f,className:B(h==="timeline"?"lg:col-span-2":"","stagger-item"),children:p(h)},h))})})}),s.jsx(Ws,{open:n,onOpenChange:r,onAddWidget:d,activeWidgets:e}),s.jsx(fa,{})]})]})}export{hl as default};
