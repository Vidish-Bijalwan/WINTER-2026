import{r as f,bv as v,bw as $,bx as T,by as A,bz as M,bA as R,bB as D,j as t,bC as O,bD as B,bE as W,bF as N,bG as L,bH as I,bI as P,bJ as z,bK as H,bL as F,bM as G,bN as V,bO as Y,bP as K,bQ as U,bR as X,bS as q,bo as J,bp as Q,bq as Z,bT as _,bU as tt,o as y,f as et}from"./vendor-DukLKV3j.js";import{N as st}from"./Navigation-B2R97OZ2.js";import{u as j}from"./index-DMsRMC1O.js";import{C as k}from"./card-CaBTdLYZ.js";import{B as w}from"./badge-CL0qBMqV.js";import"./button-DnCoHbkF.js";function at({className:h}){const n=f.useRef(null),{events:c}=j(),[d,l]=f.useState({nodes:0,links:0});return f.useEffect(()=>{if(!n.current||c.length===0)return;const e=new Map,s=[];c.slice(0,50).forEach(r=>{e.has(r.user)?e.get(r.user).value++:e.set(r.user,{id:r.user,group:"user",value:1}),e.has(r.title)?e.get(r.title).value++:e.set(r.title,{id:r.title,group:"article",value:1}),s.push({source:r.user,target:r.title})});const a=Array.from(e.values());l({nodes:a.length,links:s.length}),v(n.current).selectAll("*").remove();const o=n.current.clientWidth,m=n.current.clientHeight,u=v(n.current).attr("viewBox",[0,0,o,m]),x=$(a).force("link",T(s).id(r=>r.id).distance(50)).force("charge",A().strength(-100)).force("center",M(o/2,m/2)).force("collide",R().radius(20)),i=u.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(s).join("line").attr("stroke-width",1),g=u.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(a).join("circle").attr("r",r=>r.group==="user"?5:8).attr("fill",r=>r.group==="user"?"#3b82f6":"#10b981").call(p(x));g.append("title").text(r=>r.id),x.on("tick",()=>{i.attr("x1",r=>r.source.x).attr("y1",r=>r.source.y).attr("x2",r=>r.target.x).attr("y2",r=>r.target.y),g.attr("cx",r=>r.x).attr("cy",r=>r.y)});function p(r){function E(b){b.active||r.alphaTarget(.3).restart(),b.subject.fx=b.subject.x,b.subject.fy=b.subject.y}function S(b){b.subject.fx=b.x,b.subject.fy=b.y}function C(b){b.active||r.alphaTarget(0),b.subject.fx=null,b.subject.fy=null}return D().on("start",E).on("drag",S).on("end",C)}return()=>{x.stop()}},[c]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"font-semibold text-sm",children:"Editor-Article Network"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(w,{variant:"secondary",children:[d.nodes," Nodes"]}),t.jsxs(w,{variant:"secondary",children:[d.links," Links"]})]})]}),t.jsx("svg",{ref:n,className:"w-full h-[300px] bg-slate-950/50 rounded-lg"})]})}function it({className:h}){const{events:n}=j(),[c,d]=f.useState({nodes:[],links:[]});return f.useEffect(()=>{const l=new Set,e=new Map;n.slice(0,100).forEach(o=>{const m=o.bot?"Bot":"Human",u=o.namespace===0?"Article":"Talk/Other",x=o.type==="new"?"Create":"Edit";l.add(m),l.add(u),l.add(x);const i=`${m}|${u}`;e.set(i,(e.get(i)||0)+1);const g=`${u}|${x}`;e.set(g,(e.get(g)||0)+1)});const s=Array.from(l).map(o=>({id:o})),a=Array.from(e.entries()).map(([o,m])=>{const[u,x]=o.split("|");return{source:u,target:x,value:m}});s.length>0&&a.length>0&&d({nodes:s,links:a})},[n]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Edit Flow Analysis"}),t.jsx("div",{className:"h-[300px]",children:t.jsx(O,{data:c,margin:{top:20,right:20,bottom:20,left:20},align:"justify",colors:{scheme:"category10"},nodeOpacity:1,nodeHoverOthersOpacity:.35,nodeThickness:18,nodeSpacing:24,nodeBorderWidth:0,nodeBorderColor:{from:"color",modifiers:[["darker",.8]]},linkOpacity:.5,linkHoverOthersOpacity:.1,enableLinkGradient:!0,labelPosition:"outside",labelOrientation:"vertical",labelPadding:16,labelTextColor:{from:"color",modifiers:[["darker",1]]},theme:{text:{fill:"#888888"},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function nt({className:h}){const{events:n}=j(),[c,d]=f.useState(null);return f.useEffect(()=>{const l={name:"Wikipedia",children:[]},e={};n.slice(0,100).forEach(s=>{const a=s.wiki||"other";e[a]||(e[a]={name:a,children:[]},l.children.push(e[a])),e[a].children.length<20&&e[a].children.push({name:s.title.substring(0,15)+(s.title.length>15?"...":""),loc:Math.abs(s.delta||100)})}),d(l)},[n]),c?t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Volume by Language & Article"}),t.jsx("div",{className:"h-[300px]",children:t.jsx(B,{data:c,identity:"name",value:"loc",valueFormat:".02s",margin:{top:10,right:10,bottom:10,left:10},labelSkipSize:12,labelTextColor:{from:"color",modifiers:[["darker",1.2]]},parentLabelTextColor:{from:"color",modifiers:[["darker",2]]},colors:{scheme:"nivo"},borderColor:{from:"color",modifiers:[["darker",.1]]},theme:{text:{fill:"#ffffff",fontWeight:600},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]}):null}function ot({className:h}){const n=f.useRef(null),{events:c}=j();return f.useEffect(()=>{if(!n.current||c.length===0)return;const d={name:"Wiki",children:[]},l={};c.slice(0,50).forEach(i=>{const g=i.wiki||"other";l[g]||(l[g]={name:g,children:[]},d.children.push(l[g]));let p=l[g].children.find(r=>r.name===i.user);p||(p={name:i.user,children:[]},l[g].children.push(p)),p.children.push({name:i.title.substring(0,10),value:1})});const e=600,s=600,a=e/2,o=W().size([2*Math.PI,a-100]),m=N(d);o(m);const u=v(n.current);u.selectAll("*").remove();const x=u.attr("viewBox",`${-e/2} ${-s/2} ${e} ${s}`).append("g");x.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(m.links()).join("path").attr("d",L().angle(i=>i.x).radius(i=>i.y)),x.append("g").selectAll("circle").data(m.descendants()).join("circle").attr("transform",i=>`
        rotate(${i.x*180/Math.PI-90})
        translate(${i.y},0)
      `).attr("fill",i=>i.children?"#555":"#999").attr("r",2.5),x.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("text").data(m.descendants()).join("text").attr("transform",i=>`
        rotate(${i.x*180/Math.PI-90}) 
        translate(${i.y},0) 
        rotate(${i.x>=Math.PI?180:0})
      `).attr("dy","0.31em").attr("x",i=>i.x<Math.PI==!i.children?6:-6).attr("text-anchor",i=>i.x<Math.PI==!i.children?"start":"end").text(i=>i.data.name).clone(!0).lower().attr("stroke","white")},[c]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Topic Clustering"}),t.jsx("div",{className:"flex justify-center overflow-hidden",children:t.jsx("svg",{ref:n,className:"w-full h-[300px]"})})]})}function rt({className:h}){const{events:n}=j(),[c,d]=f.useState([]);return f.useEffect(()=>{const l=Date.now(),e={};for(let s=0;s<20;s++)e[s]={"Human Edit":0,"Bot Edit":0,"New Page":0,"Minor Edit":0};n.forEach(s=>{const a=l-s.timestamp.getTime(),o=Math.floor(a/3e3);o<20&&o>=0&&(s.bot?e[o]["Bot Edit"]++:s.type==="new"?e[o]["New Page"]++:s.minor?e[o]["Minor Edit"]++:e[o]["Human Edit"]++)}),d(Object.values(e).reverse())},[n]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Edit Types Stream"}),t.jsx("div",{className:"h-[300px]",children:t.jsx(I,{data:c,keys:["Human Edit","Bot Edit","New Page","Minor Edit"],margin:{top:20,right:110,bottom:20,left:30},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Time (relative)",legendOffset:36},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Volume",legendOffset:-40},enableGridX:!1,enableGridY:!1,offsetType:"silhouette",colors:{scheme:"nivo"},fillOpacity:.85,borderColor:{theme:"background"},legends:[{anchor:"bottom-right",direction:"column",translateX:100,itemWidth:80,itemHeight:20,itemTextColor:"#999",symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}],theme:{tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function lt({className:h}){const n=f.useRef(null),{events:c}=j();return f.useEffect(()=>{if(!n.current||c.length===0)return;const d=["length","namespace","bot","minor"],l=c.slice(0,50).map(i=>({length:Math.abs(i.delta||0),namespace:i.namespace,bot:i.bot?1:0,minor:i.minor?1:0})),e={top:30,right:10,bottom:10,left:10},s=n.current.clientWidth-e.left-e.right,a=n.current.clientHeight-e.top-e.bottom,o=v(n.current);o.selectAll("*").remove();const m=o.append("g").attr("transform",`translate(${e.left},${e.top})`),u={};d.forEach(i=>{u[i]=P().domain(z(l,g=>g[i])).range([a,0])});const x=H().range([0,s]).padding(1).domain(d);m.selectAll("path").data(l).join("path").attr("d",i=>F()(d.map(g=>[x(g),u[g](i[g])]))).style("fill","none").style("stroke","#3b82f6").style("opacity",.5),m.selectAll("myAxis").data(d).enter().append("g").attr("transform",i=>`translate(${x(i)},0)`).each(function(i){v(this).call(G(u[i]))}).append("text").style("text-anchor","middle").attr("y",-9).text(i=>i).style("fill","white")},[c]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Multi-Dimensional Analysis"}),t.jsx("svg",{ref:n,className:"w-full h-[300px]"})]})}function ct({className:h}){const{events:n}=j(),[c,d]=f.useState([]),[l,e]=f.useState([]);return f.useEffect(()=>{const s=["en","de","fr","es","it"],a=s.length,o=Array(a).fill(0).map(()=>Array(a).fill(0));n.forEach(m=>{const u=(m.wiki||"en").substring(0,2),x=s.indexOf(u);if(x!==-1){const i=Math.floor(Math.random()*a);o[i][x]+=1}}),d(o),e(s.map(m=>m.toUpperCase()))},[n]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Cross-Wiki Edit Flow"}),t.jsx("div",{className:"h-[300px]",children:t.jsx(V,{data:c,keys:l,margin:{top:20,right:20,bottom:20,left:20},valueFormat:".2f",padAngle:.02,innerRadiusRatio:.96,innerRadiusOffset:.02,inactiveArcOpacity:.25,arcBorderColor:{from:"color",modifiers:[["darker",.6]]},activeRibbonOpacity:.75,ribbonBorderColor:{from:"color",modifiers:[["darker",.6]]},labelRotation:-90,labelTextColor:{from:"color",modifiers:[["darker",1]]},colors:{scheme:"category10"},theme:{text:{fill:"#888888"},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function dt({className:h}){const n=f.useRef(null),{events:c}=j(),[d,l]=f.useState({});return f.useEffect(()=>{const e={...d};c.forEach(s=>{e[s.user]=(e[s.user]||0)+1}),l(e)},[c]),f.useEffect(()=>{if(!n.current)return;const e=Object.entries(d).map(([p,r])=>({name:p,value:r})).sort((p,r)=>r.value-p.value).slice(0,15),s=n.current.clientWidth,a=n.current.clientHeight,o=v(n.current);o.selectAll("*").remove();const m=Y().size([s,a]).padding(2),u=N({children:e}).sum(p=>p.value),x=m(u).leaves(),g=o.append("g").selectAll("g").data(x).join("g").attr("transform",p=>`translate(${p.x},${p.y})`);g.append("circle").attr("r",p=>p.r).attr("fill",(p,r)=>K[r%10]).attr("opacity",.8),g.append("text").attr("dy","0.3em").style("text-anchor","middle").style("font-size",p=>Math.min(p.r/2,12)).style("fill","white").text(p=>p.data.name?String(p.data.name).substring(0,8):"")},[d]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Top Editors Race"}),t.jsx("svg",{ref:n,className:"w-full h-[300px]"})]})}function mt({className:h}){const{events:n}=j(),[c,d]=f.useState([]);return f.useEffect(()=>{const l={},e=new Set(["the","and","of","to","a","in","for","is","on","that","by","this","with","i","you","it","not","or","be","are","from","at","as"]);n.forEach(a=>{`${a.title} ${a.comment||""}`.toLowerCase().split(/\W+/).forEach(m=>{m.length>3&&!e.has(m)&&!/^\d+$/.test(m)&&(l[m]=(l[m]||0)+1)})});const s=Object.entries(l).map(([a,o])=>({text:a,value:o})).sort((a,o)=>o.value-a.value).slice(0,50);d(s)},[n]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Trending Topics"}),t.jsx("div",{className:"h-[300px]",children:t.jsx(U,{words:c,options:{rotations:2,rotationAngles:[-90,0],fontSizes:[12,60],colors:["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],enableTooltip:!0,deterministic:!1,fontFamily:"Inter"}})})]})}function ft({className:h}){const{events:n}=j(),[c,d]=f.useState([]);return f.useEffect(()=>{const l=new Date,e=[];for(let s=0;s<365;s++){const a=new Date(l);a.setDate(a.getDate()-s),e.push({day:a.toISOString().split("T")[0],value:Math.floor(Math.random()*100)})}d(e)},[]),t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Contribution Calendar"}),t.jsx("div",{className:"h-[200px]",children:t.jsx(X,{data:c,from:new Date(new Date().setFullYear(new Date().getFullYear()-1)).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0],emptyColor:"#1e293b",colors:["#1e293b","#064e3b","#065f46","#047857","#10b981"],margin:{top:20,right:20,bottom:20,left:20},yearSpacing:40,monthBorderColor:"#ffffff",dayBorderWidth:2,dayBorderColor:"#0f172a",theme:{text:{fill:"#888888"},tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]})}function ht({className:h}){const{events:n}=j(),[c,d]=f.useState(null);return f.useEffect(()=>{const l={name:"root",children:[]},e={};n.slice(0,200).forEach(s=>{const a=s.wiki||"other";e[a]||(e[a]={name:a,children:[{name:"Main",children:[]},{name:"Talk",children:[]}]},l.children.push(e[a]));const o=s.namespace===0?0:1,m=s.bot?"Bot":"Human";let u=e[a].children[o].children.find(x=>x.name===m);u||(u={name:m,loc:0},e[a].children[o].children.push(u)),u.loc++}),d(l)},[n]),c?t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"Hierarchical Breakdown"}),t.jsx("div",{className:"h-[300px]",children:t.jsx(q,{data:c,margin:{top:10,right:10,bottom:10,left:10},id:"name",value:"loc",cornerRadius:2,borderColor:{theme:"background"},colors:{scheme:"nivo"},childColor:{from:"color",modifiers:[["brighter",.1]]},enableArcLabels:!0,arcLabelsSkipAngle:10,arcLabelsTextColor:{from:"color",modifiers:[["darker",1.4]]},theme:{tooltip:{container:{background:"#1e293b",color:"#fff"}}}})})]}):null}function ut({events:h}){const[n,c]=f.useState([]),[d,l]=f.useState([]);return f.useEffect(()=>{const e=h.slice(0,50).map((a,o)=>({id:a.user,position:[(Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*10],color:a.bot?"#3b82f6":"#10b981"})),s=[];for(let a=0;a<e.length;a++)for(let o=a+1;o<e.length;o++)Math.random()>.9&&s.push({start:e[a].position,end:e[o].position});c(e),l(s)},[h]),Z(e=>{e.clock.getElapsedTime()}),t.jsxs("group",{children:[n.map((e,s)=>t.jsx(_,{position:e.position,args:[.2,16,16],children:t.jsx("meshStandardMaterial",{color:e.color})},s)),d.map((e,s)=>t.jsx(tt,{points:[e.start,e.end],color:"#555",lineWidth:1,transparent:!0,opacity:.3},s))]})}function pt({className:h}){const{events:n}=j();return t.jsxs(k,{className:`p-4 ${h}`,children:[t.jsx("h3",{className:"font-semibold text-sm mb-4",children:"3D Network Topology"}),t.jsx("div",{className:"h-[300px] bg-slate-950 rounded-lg overflow-hidden",children:t.jsxs(J,{camera:{position:[0,0,15],fov:60},gl:{preserveDrawingBuffer:!0},children:[t.jsx("ambientLight",{intensity:.5}),t.jsx("pointLight",{position:[10,10,10]}),t.jsx(ut,{events:n}),t.jsx(Q,{autoRotate:!0,autoRotateSpeed:.5})]})})]})}const vt=()=>t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(st,{}),t.jsxs("main",{className:"pt-20 pb-8 px-4 sm:px-6 lg:px-8 max-w-[1800px] mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs(y.h1,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(et,{className:"w-6 h-6 text-primary"}),"Advanced Visualizations"]}),t.jsx(y.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm text-muted-foreground mt-1",children:"Deep dive into Wikipedia edit patterns and network topology"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:t.jsx(at,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:t.jsx(it,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:t.jsx(pt,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:t.jsx(nt,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:t.jsx(ht,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:t.jsx(ot,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:t.jsx(rt,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:t.jsx(mt,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:t.jsx(dt,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:t.jsx(lt,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},children:t.jsx(ct,{})}),t.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},children:t.jsx(ft,{})})]})]})]});export{vt as default};
