import{r as u,j as e,o as i}from"./vendor-DGrUDQ2I.js";import{u as p,c as f}from"./index-DNdMQf1B.js";function b({className:x,data:t,animated:r=!0}){const{persistenceDiagram:a,isConnected:h}=p(),m=u.useMemo(()=>t&&t.length>0?t:a.length>0?a:[{id:"p0",birth:.1,death:.8,dimension:0},{id:"p1",birth:.15,death:.6,dimension:0},{id:"p2",birth:.2,death:.75,dimension:1},{id:"p3",birth:.3,death:.9,dimension:1},{id:"p4",birth:.25,death:.5,dimension:0},{id:"p5",birth:.4,death:.85,dimension:2},{id:"p6",birth:.35,death:.7,dimension:1}],[t,a]),d=s=>{switch(s){case 0:return"var(--topo-h0)";case 1:return"var(--topo-h1)";case 2:return"var(--topo-h2)";default:return"var(--primary)"}};return e.jsxs("div",{className:f("relative bg-card/50 rounded-xl p-4 border border-border/50",x),children:[e.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:"Persistence Diagram"}),h&&e.jsxs(i.div,{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-full bg-success/10 text-success text-[9px]",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-success"}),"Live"]})]}),e.jsxs("svg",{className:"w-full h-full min-h-[200px]",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("g",{opacity:"0.2",children:[20,40,60,80].map(s=>e.jsxs("g",{children:[e.jsx("line",{x1:"10",y1:s,x2:"90",y2:s,stroke:"hsl(var(--border))",strokeWidth:"0.5",strokeDasharray:"2 2"}),e.jsx("line",{x1:s,y1:"10",x2:s,y2:"90",stroke:"hsl(var(--border))",strokeWidth:"0.5",strokeDasharray:"2 2"})]},s))}),e.jsx("line",{x1:"10",y1:"90",x2:"90",y2:"10",stroke:"hsl(var(--muted-foreground))",strokeWidth:"0.5",strokeOpacity:"0.5"}),m.map((s,n)=>{const o=10+s.birth*80,l=90-s.death*80,c=2+(s.death-s.birth)*4;return e.jsxs(i.g,{children:[e.jsx(i.circle,{cx:o||0,cy:l||0,r:(c||0)*2,fill:`hsl(${d(s.dimension)})`,opacity:.2,initial:r?{scale:0}:{},animate:r?{scale:[1,1.3,1],opacity:[.2,.3,.2]}:{},transition:{delay:n*.1,duration:3,repeat:1/0}}),e.jsx(i.circle,{cx:o||0,cy:l||0,r:c||0,fill:`hsl(${d(s.dimension)})`,initial:r?{scale:0,opacity:0}:{},animate:r?{scale:1,opacity:1}:{},transition:{delay:n*.1,type:"spring",stiffness:200}})]},n)}),e.jsx("text",{x:"50",y:"98",textAnchor:"middle",className:"fill-muted-foreground text-[4px]",children:"Birth"}),e.jsx("text",{x:"5",y:"50",textAnchor:"middle",className:"fill-muted-foreground text-[4px]",transform:"rotate(-90, 5, 50)",children:"Death"})]}),e.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-3 text-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-topo-h0"}),e.jsx("span",{className:"text-muted-foreground",children:"H₀"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-topo-h1"}),e.jsx("span",{className:"text-muted-foreground",children:"H₁"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-topo-h2"}),e.jsx("span",{className:"text-muted-foreground",children:"H₂"})]})]})]})}export{b as P};
