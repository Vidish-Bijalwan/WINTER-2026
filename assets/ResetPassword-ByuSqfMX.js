import{c as N,d as P,b as k,p as S,r as s,j as e,L,o as C}from"./index--xrktNsK.js";import{m as E,B as u}from"./button-qKzjhVfS.js";import{I as p}from"./input-DtGWKDhW.js";import{L as x}from"./label-BiGFmgi0.js";import{P as R}from"./PasswordStrength-DNM6JgDp.js";import{L as f}from"./lock-Da4A8mb2.js";import{E as I}from"./eye-DQE7l3ep.js";import{C as M}from"./circle-check-BMN-XR7E.js";import{A as q}from"./arrow-left-CGCIeCLj.js";import"./check-DyxIPI8D.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=N("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function K(){const{toast:t}=P(),o=k(),[h]=S(),a=h.get("token"),[i,w]=s.useState(""),[l,g]=s.useState(""),[n,b]=s.useState(!1),[c,d]=s.useState(!1),[m,j]=s.useState(!1);s.useEffect(()=>{a||(t({variant:"destructive",title:"Invalid Link",description:"Missing reset token. Please request a new link."}),o("/forgot-password"))},[a,o,t]);const y=async r=>{if(r.preventDefault(),i!==l){t({variant:"destructive",title:"Passwords do not match",description:"Please ensure both passwords match."});return}if(a){d(!0);try{await C.resetPassword(a,i),j(!0),t({title:"Password Reset Successful",description:"You can now login with your new password."}),setTimeout(()=>{o("/login")},3e3)}catch(v){t({variant:"destructive",title:"Error",description:v.message||"Failed to reset password"})}finally{d(!1)}}};return a?e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] -z-10"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-background/90 backdrop-blur-[1px] -z-10"}),e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-2 bg-clip-text text-transparent bg-gradient-to-r from-primary to-blue-400",children:"Set New Password"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a strong password for your account"})]}),e.jsxs("div",{className:"bg-card/50 backdrop-blur-xl border border-border/50 rounded-xl p-6 shadow-2xl",children:[m?e.jsxs("div",{className:"text-center space-y-4 py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(M,{className:"w-8 h-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-semibold",children:"Password Reset Complete"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Your password has been successfully updated. Redirecting to login..."}),e.jsx(u,{className:"w-full mt-4",onClick:()=>o("/login"),children:"Go to Login Now"})]}):e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(p,{id:"password",type:n?"text":"password",placeholder:"••••••••",className:"pl-10 pr-10 bg-background/50",value:i,onChange:r=>w(r.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:n?e.jsx(A,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]}),e.jsx(R,{password:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(p,{id:"confirmPassword",type:"password",placeholder:"••••••••",className:"pl-10 bg-background/50",value:l,onChange:r=>g(r.target.value),required:!0})]})]}),e.jsx(u,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:c,children:c?"Resetting Password...":"Reset Password"})]}),!m&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(L,{to:"/login",className:"text-sm text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),"Back to Login"]})})]})]})]}):null}export{K as default};
