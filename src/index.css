@import "@fontsource/inter/400.css";
@import "@fontsource/inter/500.css";
@import "@fontsource/inter/600.css";
@import "@fontsource/inter/700.css";
@import "@fontsource/jetbrains-mono/400.css";
@import "@fontsource/jetbrains-mono/500.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* TopoForge Design System
   A sophisticated, data-centric design language for topological analysis
   Dark-mode first, with liquid glass aesthetics and spatial depth
*/

@layer base {
  :root {
    /* Core palette - Light mode fallback */
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 8%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 10%;
    --popover-foreground: 210 40% 98%;

    /* Primary - Cyan/Teal for topology connections */
    --primary: 186 100% 50%;
    --primary-foreground: 222 47% 6%;
    --primary-glow: 186 100% 60%;
    --primary-muted: 186 50% 30%;

    /* Secondary - Slate blue */
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;

    /* Muted surfaces */
    --muted: 217 33% 12%;
    --muted-foreground: 215 20% 55%;

    /* Accent - Subtle highlights */
    --accent: 217 33% 20%;
    --accent-foreground: 210 40% 98%;

    /* Semantic - Anomaly/Warning */
    --anomaly: 25 95% 55%;
    --anomaly-foreground: 222 47% 6%;
    --anomaly-glow: 25 100% 65%;

    /* Semantic - Critical */
    --critical: 0 84% 60%;
    --critical-foreground: 210 40% 98%;
    --critical-glow: 0 100% 70%;

    /* Semantic - Success/Normal */
    --success: 142 76% 45%;
    --success-foreground: 222 47% 6%;
    --success-glow: 142 100% 55%;

    /* Semantic - Info */
    --info: 217 91% 60%;
    --info-foreground: 210 40% 98%;

    /* Destructive */
    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    /* Borders and inputs */
    --border: 217 33% 18%;
    --input: 217 33% 15%;
    --ring: 186 100% 50%;

    /* Radius */
    --radius: 0.75rem;

    /* Glass effect tokens */
    --glass-background: 222 47% 8% / 0.6;
    --glass-border: 217 33% 30% / 0.3;
    --glass-blur: 20px;

    /* Topology visualization colors */
    --topo-h0: 186 100% 50%; /* Connected components - cyan */
    --topo-h1: 280 80% 60%; /* Loops - purple */
    --topo-h2: 45 100% 50%; /* Voids - gold */
    --topo-birth: 142 76% 45%; /* Birth - green */
    --topo-death: 0 84% 60%; /* Death - red */

    /* Gradient tokens */
    --gradient-primary: linear-gradient(135deg, hsl(186 100% 50%), hsl(217 91% 60%));
    --gradient-anomaly: linear-gradient(135deg, hsl(25 95% 55%), hsl(0 84% 60%));
    --gradient-surface: linear-gradient(180deg, hsl(222 47% 10%), hsl(222 47% 6%));
    --gradient-glass: linear-gradient(135deg, hsl(217 33% 20% / 0.4), hsl(217 33% 10% / 0.2));
    --gradient-mesh: radial-gradient(ellipse at 50% 0%, hsl(186 100% 50% / 0.15), transparent 50%);

    /* Shadow tokens */
    --shadow-sm: 0 2px 8px hsl(222 47% 4% / 0.3);
    --shadow-md: 0 4px 16px hsl(222 47% 4% / 0.4);
    --shadow-lg: 0 8px 32px hsl(222 47% 4% / 0.5);
    --shadow-glow-primary: 0 0 40px hsl(186 100% 50% / 0.3);
    --shadow-glow-anomaly: 0 0 40px hsl(25 95% 55% / 0.4);
    --shadow-glow-critical: 0 0 40px hsl(0 84% 60% / 0.4);

    /* Animation tokens */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-spring: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);

    /* Sidebar */
    --sidebar-background: 222 47% 7%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 186 100% 50%;
    --sidebar-primary-foreground: 222 47% 6%;
    --sidebar-accent: 217 33% 15%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 217 33% 15%;
    --sidebar-ring: 186 100% 50%;
  }

  .dark {
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply antialiased;
    font-feature-settings: "cv11", "ss01";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-family: "Inter", system-ui, sans-serif;
  }

  /* Selection styling */
  ::selection {
    @apply bg-primary/30 text-foreground;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-muted/30;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border rounded-full;
    transition: background-color var(--transition-base);
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/50;
  }
}

@layer components {
  /* Glass morphism card */
  .glass-card {
    @apply relative overflow-hidden rounded-xl;
    background: linear-gradient(
      135deg,
      hsl(var(--card) / 0.8),
      hsl(var(--card) / 0.4)
    );
    backdrop-filter: blur(var(--glass-blur));
    border: 1px solid hsl(var(--border) / 0.5);
  }

  .glass-card::before {
    content: "";
    @apply absolute inset-0 pointer-events-none;
    background: linear-gradient(
      135deg,
      hsl(var(--primary) / 0.05),
      transparent 50%
    );
  }

  /* Glow effects */
  .glow-primary {
    box-shadow: var(--shadow-glow-primary);
  }

  .glow-anomaly {
    box-shadow: var(--shadow-glow-anomaly);
  }

  .glow-critical {
    box-shadow: var(--shadow-glow-critical);
  }

  /* Animated border gradient */
  .border-gradient {
    @apply relative;
  }

  .border-gradient::before {
    content: "";
    @apply absolute -inset-[1px] rounded-xl -z-10;
    background: var(--gradient-primary);
    opacity: 0;
    transition: opacity var(--transition-base);
  }

  .border-gradient:hover::before {
    opacity: 1;
  }

  /* Mesh gradient background */
  .mesh-gradient {
    @apply relative;
  }

  .mesh-gradient::before {
    content: "";
    @apply absolute inset-0 pointer-events-none;
    background: var(--gradient-mesh);
  }

  /* Data visualization pulse */
  .pulse-anomaly {
    animation: pulseAnomaly 2s ease-in-out infinite;
  }

  @keyframes pulseAnomaly {
    0%, 100% {
      box-shadow: 0 0 0 0 hsl(var(--anomaly) / 0.4);
    }
    50% {
      box-shadow: 0 0 20px 10px hsl(var(--anomaly) / 0);
    }
  }

  /* Topology node animation */
  .topo-node {
    animation: topoFloat 6s ease-in-out infinite;
  }

  @keyframes topoFloat {
    0%, 100% {
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(-8px) scale(1.02);
    }
  }

  /* Grid pattern overlay */
  .grid-pattern {
    background-image: 
      linear-gradient(hsl(var(--border) / 0.3) 1px, transparent 1px),
      linear-gradient(90deg, hsl(var(--border) / 0.3) 1px, transparent 1px);
    background-size: 40px 40px;
  }

  /* Dot pattern overlay */
  .dot-pattern {
    background-image: radial-gradient(
      circle at 1px 1px,
      hsl(var(--border) / 0.5) 1px,
      transparent 0
    );
    background-size: 24px 24px;
  }

  /* Metric card variants */
  .metric-normal {
    @apply border-success/30;
  }

  .metric-warning {
    @apply border-anomaly/50;
    box-shadow: 0 0 20px hsl(var(--anomaly) / 0.15);
  }

  .metric-critical {
    @apply border-critical/50;
    box-shadow: 0 0 20px hsl(var(--critical) / 0.2);
    animation: criticalPulse 2s ease-in-out infinite;
  }

  @keyframes criticalPulse {
    0%, 100% {
      border-color: hsl(var(--critical) / 0.5);
    }
    50% {
      border-color: hsl(var(--critical) / 0.8);
    }
  }

  /* Text gradient */
  .text-gradient-primary {
    @apply bg-clip-text text-transparent;
    background-image: var(--gradient-primary);
  }

  .text-gradient-anomaly {
    @apply bg-clip-text text-transparent;
    background-image: var(--gradient-anomaly);
  }

  /* Monospace for data */
  .font-mono {
    font-family: "JetBrains Mono", monospace;
  }

  /* Interactive hover states */
  .interactive-scale {
    transition: transform var(--transition-spring), box-shadow var(--transition-base);
  }

  .interactive-scale:hover {
    transform: scale(1.02);
    box-shadow: var(--shadow-md);
  }

  .interactive-scale:active {
    transform: scale(0.98);
  }

  /* Focus ring */
  .focus-ring {
    @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
  }

  /* Skeleton loading */
  .skeleton {
    @apply animate-pulse bg-muted rounded;
  }

  /* Status indicators */
  .status-dot {
    @apply w-2 h-2 rounded-full;
  }

  .status-dot-active {
    @apply bg-success;
    box-shadow: 0 0 8px hsl(var(--success));
  }

  .status-dot-warning {
    @apply bg-anomaly;
    box-shadow: 0 0 8px hsl(var(--anomaly));
  }

  .status-dot-critical {
    @apply bg-critical;
    box-shadow: 0 0 8px hsl(var(--critical));
    animation: criticalBlink 1s ease-in-out infinite;
  }

  @keyframes criticalBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  /* Navigation link */
  .nav-link {
    @apply relative px-4 py-2 text-muted-foreground transition-colors duration-200;
  }

  .nav-link:hover {
    @apply text-foreground;
  }

  .nav-link.active {
    @apply text-primary;
  }

  .nav-link.active::after {
    content: "";
    @apply absolute bottom-0 left-1/2 -translate-x-1/2 w-1/2 h-0.5 bg-primary rounded-full;
  }

  /* Badge variants */
  .badge-anomaly {
    @apply bg-anomaly/20 text-anomaly border-anomaly/30;
  }

  .badge-critical {
    @apply bg-critical/20 text-critical border-critical/30;
  }

  .badge-success {
    @apply bg-success/20 text-success border-success/30;
  }

  .badge-info {
    @apply bg-info/20 text-info border-info/30;
  }
}

@layer utilities {
  /* Blur utilities */
  .blur-glass {
    backdrop-filter: blur(var(--glass-blur));
  }

  /* Animation delays */
  .animation-delay-100 { animation-delay: 100ms; }
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-500 { animation-delay: 500ms; }
  .animation-delay-700 { animation-delay: 700ms; }
  .animation-delay-1000 { animation-delay: 1000ms; }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Text balance */
  .text-balance {
    text-wrap: balance;
  }
}
